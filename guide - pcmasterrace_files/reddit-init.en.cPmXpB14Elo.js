try{(function(e,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():e.returnExports=t()})(this,function(){function h(){}function J(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function K(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function Q(e){var t,n,r;if(K(e))return e;n=e.valueOf;if(a(n)){t=n.call(e);if(K(t))return t}r=e.toString;if(a(r)){t=r.call(e);if(K(t))return t}throw new TypeError}var e=Function.prototype.call,t=Array.prototype,n=Object.prototype,r=t.slice,i=Array.prototype.splice,s=Array.prototype.push,o=Array.prototype.unshift,u=n.toString,a=function(e){return n.toString.call(e)==="[object Function]"},f=function(e){return n.toString.call(e)==="[object RegExp]"},l=function(t){return u.call(t)==="[object Array]"},c=function(t){var n=u.call(t),r=n==="[object Arguments]";return r||(r=!l(n)&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&a(t.callee)),r};Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(!a(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=r.call(arguments,1),s=function(){if(this instanceof l){var e=n.apply(this,i.concat(r.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(r.call(arguments)))},o=Math.max(0,n.length-i.length),u=[];for(var f=0;f<o;f++)u.push("$"+f);var l=Function("binder","return function ("+u.join(",")+"){return binder.apply(this,arguments)}")(s);return n.prototype&&(h.prototype=n.prototype,l.prototype=new h,h.prototype=null),l});var p=e.bind(n.hasOwnProperty),d,v,m,g,y;if(y=p(n,"__defineGetter__"))d=e.bind(n.__defineGetter__),v=e.bind(n.__defineSetter__),m=e.bind(n.__lookupGetter__),g=e.bind(n.__lookupSetter__);var b=function(){var e={};return Array.prototype.splice.call(e,0,0,1),e.length===1}(),w=[1].splice(0).length===0,E=function(){var e=[1,2],t=e.splice();return e.length===2&&l(t)&&t.length===0}();E&&(Array.prototype.splice=function(t,n){return arguments.length===0?[]:i.apply(this,arguments)});if(!w||!b)Array.prototype.splice=function(t,n){if(arguments.length===0)return[];var s=arguments;return this.length=Math.max(J(this.length),0),arguments.length>0&&typeof n!="number"&&(s=r.call(arguments),s.length<2?s.push(J(n)):s[1]=J(n)),i.apply(this,s)};[].unshift(0)!==1&&(Array.prototype.unshift=function(){return o.apply(this,arguments),this.length}),Array.isArray||(Array.isArray=l);var S=Object("a"),x=S[0]!=="a"||!(0 in S),T=function(t){var n=!0,r=!0;return t&&(t.call("foo",function(e,t,r){typeof r!="object"&&(n=!1)}),t.call([1],function(){"use strict";r=typeof this=="string"},"x")),!!t&&n&&r};if(!Array.prototype.forEach||!T(Array.prototype.forEach))Array.prototype.forEach=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(!a(t))throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)};if(!Array.prototype.map||!T(Array.prototype.map))Array.prototype.map=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(!a(t))throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(s[f]=t.call(o,r[f],f,n));return s};if(!Array.prototype.filter||!T(Array.prototype.filter))Array.prototype.filter=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,f=arguments[1];if(!a(t))throw new TypeError(t+" is not a function");for(var l=0;l<i;l++)l in r&&(o=r[l],t.call(f,o,l,n)&&s.push(o));return s};if(!Array.prototype.every||!T(Array.prototype.every))Array.prototype.every=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(!a(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0};if(!Array.prototype.some||!T(Array.prototype.some))Array.prototype.some=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(!a(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1};var N=!1;Array.prototype.reduce&&(N=typeof Array.prototype.reduce.call("es5",function(e,t,n,r){return r})=="object");if(!Array.prototype.reduce||!N)Array.prototype.reduce=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0;if(!a(t))throw new TypeError(t+" is not a function");if(!i&&arguments.length===1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o};var C=!1;Array.prototype.reduceRight&&(C=typeof Array.prototype.reduceRight.call("es5",function(e,t,n,r){return r})=="object");if(!Array.prototype.reduceRight||!C)Array.prototype.reduceRight=function(t){var n=G(this),r=x&&u.call(this)==="[object String]"?this.split(""):n,i=r.length>>>0;if(!a(t))throw new TypeError(t+" is not a function");if(!i&&arguments.length===1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);if(o<0)return s;do o in r&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s};if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!==-1)Array.prototype.indexOf=function(t){var n=x&&u.call(this)==="[object String]"?this.split(""):G(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=J(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!==-1)Array.prototype.lastIndexOf=function(t){var n=x&&u.call(this)==="[object String]"?this.split(""):G(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,J(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};var k=Object.keys&&function(){return Object.keys(arguments).length===2}(1,2);if(!Object.keys){var L=!{toString:null}.propertyIsEnumerable("toString"),A=function(){}.propertyIsEnumerable("prototype"),O=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=O.length;Object.keys=function(t){var n=a(t),r=c(t),i=t!==null&&typeof t=="object",s=i&&u.call(t)==="[object String]";if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var o=[],f=A&&n;if(s||r)for(var l=0;l<t.length;++l)o.push(String(l));else for(var h in t)(!f||h!=="prototype")&&p(t,h)&&o.push(String(h));if(L){var d=t.constructor,v=d&&d.prototype===t;for(var m=0;m<M;m++){var g=O[m];(!v||g!=="constructor")&&p(t,g)&&o.push(g)}}return o}}else if(!k){var _=Object.keys;Object.keys=function(t){return c(t)?_(Array.prototype.slice.call(t)):_(t)}}var D=-621987552e5,P="-000001";if(!Date.prototype.toISOString||(new Date(D)).toISOString().indexOf(P)===-1)Date.prototype.toISOString=function(){var t,n,r,i,s;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");i=this.getUTCFullYear(),s=this.getUTCMonth(),i+=Math.floor(s/12),s=(s%12+12)%12,t=[s+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6),n=t.length;while(n--)r=t[n],r<10&&(t[n]="0"+r);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};var H=!1;try{H=Date.prototype.toJSON&&(new Date(NaN)).toJSON()===null&&(new Date(D)).toJSON().indexOf(P)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(B){}H||(Date.prototype.toJSON=function(t){var n=Object(this),r=Q(n),i;if(typeof r=="number"&&!isFinite(r))return null;i=n.toISOString;if(typeof i!="function")throw new TypeError("toISOString property is not callable");return i.call(n)});var j=Date.parse("+033658-09-27T01:46:40.000Z")===1e15,F=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),I=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(!Date.parse||I||F||!j)Date=function(e){function t(n,r,i,s,o,u,a){var f=arguments.length;if(this instanceof e){var l=f===1&&String(n)===n?new e(t.parse(n)):f>=7?new e(n,r,i,s,o,u,a):f>=6?new e(n,r,i,s,o,u):f>=5?new e(n,r,i,s,o):f>=4?new e(n,r,i,s):f>=3?new e(n,r,i):f>=2?new e(n,r):f>=1?new e(n):new e;return l.constructor=t,l}return e.apply(this,arguments)}function i(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function s(t){return Number(new e(1970,0,1,0,0,0,t))}var n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var o in e)t[o]=e[o];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(r){var o=n.exec(r);if(o){var u=Number(o[1]),a=Number(o[2]||1)-1,f=Number(o[3]||1)-1,l=Number(o[4]||0),c=Number(o[5]||0),h=Number(o[6]||0),p=Math.floor(Number(o[7]||0)*1e3),d=Boolean(o[4]&&!o[8]),v=o[9]==="-"?1:-1,m=Number(o[10]||0),g=Number(o[11]||0),y;if(l<(c>0||h>0||p>0?24:25)&&c<60&&h<60&&p<1e3&&a>-1&&a<12&&m<24&&g<60&&f>-1&&f<i(u,a+1)-i(u,a)){y=((i(u,a)+f)*24+l+m*v)*60,y=((y+c+g*v)*60+h)*1e3+p,d&&(y=s(y));if(-864e13<=y&&y<=864e13)return y}return NaN}return e.parse.apply(this,arguments)},t}(Date);Date.now||(Date.now=function(){return(new Date).getTime()}),(!Number.prototype.toFixed||8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)==="0"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")&&function(){function i(r,i){var s=-1;while(++s<t)i+=r*n[s],n[s]=i%e,i=Math.floor(i/e)}function s(r){var i=t,s=0;while(--i>=0)s+=n[i],n[i]=Math.floor(s/r),s=s%r*e}function o(){var e=t,r="";while(--e>=0)if(r!==""||e===0||n[e]!==0){var i=String(n[e]);r===""?r=i:r+="0000000".slice(0,7-i.length)+i}return r}function u(e,t,n){return t===0?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)}function a(e){var t=0;while(e>=4096)t+=12,e/=4096;while(e>=2)t+=1,e/=2;return t}var e,t,n,r;e=1e7,t=6,n=[0,0,0,0,0,0],Number.prototype.toFixed=function(t){var n,r,f,l,c,h,p,d;n=Number(t),n=n!==n?0:Math.floor(n);if(n<0||n>20)throw new RangeError("Number.toFixed called with invalid number of decimals");r=Number(this);if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);f="",r<0&&(f="-",r=-r),l="0";if(r>1e-21){c=a(r*u(2,69,1))-69,h=c<0?r*u(2,-c,1):r/u(2,c,1),h*=4503599627370496,c=52-c;if(c>0){i(0,h),p=n;while(p>=7)i(1e7,0),p-=7;i(u(10,p,1),0),p=c-1;while(p>=23)s(1<<23),p-=23;s(1<<p),i(1,1),s(2),l=o()}else i(0,h),i(1<<-c,0),l=o()+"0.00000000000000000000".slice(2,2+n)}return n>0?(d=l.length,d<=n?l=f+"0.0000000000000000000".slice(0,n-d+2)+l:l=f+l.slice(0,d-n)+"."+l.slice(d-n)):l=f+l,l}}();var q=String.prototype.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;String.prototype.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if(u.call(t)!=="[object RegExp]")return q.call(this,t,n);var i=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),o=0,a,f,l,c;t=new RegExp(t.source,s+"g"),r+="",e||(a=new RegExp("^"+t.source+"$(?!\\s)",s)),n=n===void 0?-1>>>0:Y(n);while(f=t.exec(r)){l=f.index+f[0].length;if(l>o){i.push(r.slice(o,f.index)),!e&&f.length>1&&f[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===void 0&&(f[e]=void 0)}),f.length>1&&f.index<r.length&&Array.prototype.push.apply(i,f.slice(1)),c=f[0].length,o=l;if(i.length>=n)break}t.lastIndex===f.index&&t.lastIndex++}return o===r.length?(c||!t.test(""))&&i.push(""):i.push(r.slice(o)),i.length>n?i.slice(0,n):i}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,n){return t===void 0&&n===0?[]:q.call(this,t,n)});var R=String.prototype.replace,U=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){e.push(n)}),e.length===1&&typeof e[0]=="undefined"}();U||(String.prototype.replace=function(t,n){var r=a(n),i=f(t)&&/\)[*?]/.test(t.source);if(!r||!i)return R.call(this,t,n);var s=function(e){var r=arguments.length,i=t.lastIndex;t.lastIndex=0;var s=t.exec(e);return t.lastIndex=i,s.push(arguments[r-2],arguments[r-1]),n.apply(this,s)};return R.call(this,t,s)});if("".substr&&"0b".substr(-1)!=="b"){var z=String.prototype.substr;String.prototype.substr=function(t,n){return z.call(this,t<0?(t=this.length+t)<0?0:t:t,n)}}var W="	\n\f\r   ᠎             　\u2028\u2029﻿",X="​";if(!String.prototype.trim||W.trim()||!X.trim()){W="["+W+"]";var V=new RegExp("^"+W+W+"*"),$=new RegExp(W+W+"*$");String.prototype.trim=function(){if(this===void 0||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(V,"").replace($,"")}}if(parseInt(W+"08")!==8||parseInt(W+"0x16")!==22)parseInt=function(e){var t=/^0[xX]/;return function(r,i){return r=String(r).trim(),Number(i)||(i=t.test(r)?16:10),e(r,i)}}(parseInt);var G=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)},Y=function(t){return t>>>0}});var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){function u(){try{return r in t&&t[r]}catch(e){return!1}}function a(){try{return i in t&&t[i]&&t[i][t.location.hostname]}catch(e){return!1}}var e={},t=window,n=t.document,r="localStorage",i="globalStorage",s="__storejs__",o;e.disabled=!1,e.set=function(e,t){},e.get=function(e){},e.remove=function(e){},e.clear=function(){},e.transact=function(t,n,r){var i=e.get(t);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),e.set(t,i)},e.getAll=function(){},e.serialize=function(e){return JSON.stringify(e)},e.deserialize=function(e){return typeof e!="string"?undefined:JSON.parse(e)};if(u())o=t[r],e.set=function(t,n){if(n===undefined)return e.remove(t);o.setItem(t,e.serialize(n))},e.get=function(t){return e.deserialize(o.getItem(t))},e.remove=function(e){o.removeItem(e)},e.clear=function(){o.clear()},e.getAll=function(){var t={};for(var n=0;n<o.length;++n){var r=o.key(n);t[r]=e.get(r)}return t};else if(a())o=t[i][t.location.hostname],e.set=function(t,n){if(n===undefined)return e.remove(t);o[t]=e.serialize(n)},e.get=function(t){return e.deserialize(o[t]&&o[t].value)},e.remove=function(e){delete o[e]},e.clear=function(){for(var e in o)delete o[e]},e.getAll=function(){var t={};for(var n=0;n<o.length;++n){var r=o.key(n);t[r]=e.get(r)}return t};else if(n.documentElement.addBehavior){var f,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),l.close(),f=l.w.frames[0].document,o=f.createElement("div")}catch(c){o=n.createElement("div"),f=n.body}function h(t){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),f.appendChild(o),o.addBehavior("#default#userData"),o.load(r);var i=t.apply(e,n);return f.removeChild(o),i}}function p(e){return"_"+e}e.set=h(function(t,n,i){n=p(n);if(i===undefined)return e.remove(n);t.setAttribute(n,e.serialize(i)),t.save(r)}),e.get=h(function(t,n){return n=p(n),e.deserialize(t.getAttribute(n))}),e.remove=h(function(e,t){t=p(t),e.removeAttribute(t),e.save(r)}),e.clear=h(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=0,i;i=t[n];n++)e.removeAttribute(i.name);e.save(r)}),e.getAll=h(function(t){var n=t.XMLDocument.documentElement.attributes;t.load(r);var i={};for(var s=0,o;o=n[s];++s)i[o]=e.get(o);return i})}try{e.set(s,s),e.get(s)!=s&&(e.disabled=!0),e.remove(s)}catch(c){e.disabled=!0}typeof module!="undefined"&&typeof module!="function"?module.exports=e:typeof define=="function"&&define.amd?define(e):this.store=e}(),function(e,t){var n=function(e){this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"(n != 1);"}}},domain:"messages"},this.options=_.extend({},this.defaults,e),this.textdomain(this.options
.domain);if(e.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+e.domain+"`")};n.context_delimiter=String.fromCharCode(4);var r=_.memoize(function(e){function t(e,t){var n=e(t);return n===!0?1:n?n:0}var e=e||"(n != 1)";return _.partial(t,new Function("n","return "+e))});_.extend(n.prototype,{textdomain:function(e){if(!e)return this._textdomain;this._textdomain=e},gettext:function(e){return this.dcnpgettext.call(this,t,t,e)},dgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},dcgettext:function(e,n){return this.dcnpgettext.call(this,e,t,n)},ngettext:function(e,n,r){return this.dcnpgettext.call(this,t,t,e,n,r)},dngettext:function(e,n,r,i){return this.dcnpgettext.call(this,e,t,n,r,i)},dcngettext:function(e,n,r,i){return this.dcnpgettext.call(this,e,t,n,r,i)},pgettext:function(e,n){return this.dcnpgettext.call(this,t,e,n)},dpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},dcpgettext:function(e,t,n){return this.dcnpgettext.call(this,e,t,n)},npgettext:function(e,n,r,i){return this.dcnpgettext.call(this,t,e,n,r,i)},dnpgettext:function(e,t,n,r,i){return this.dcnpgettext.call(this,e,t,n,r,i)},dcnpgettext:function(e,t,i,s,o){s=s||i,e=e||this._textdomain,o=typeof o=="undefined"?1:o;var u;if(!this.options)return u=new n,u.dcnpgettext.call(u,undefined,undefined,i,s,o);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[e])throw new Error("Domain `"+e+"` was not found.");if(!this.options.locale_data[e][""])throw new Error("No locale meta information provided.");if(!i)throw new Error("No translation key found.");if(typeof o!="number"){o=parseInt(o,10);if(isNaN(o))throw new Error("The number that was passed in is not a number.")}var a=t?t+n.context_delimiter+i:i,f=this.options.locale_data,l=f[e],c=l[""].plural_forms,h=r(c)(o)+1,p,d;if(!l)throw new Error("No domain named `"+e+"` could be found.");return p=l[a],!p||h>=p.length?(this.options.missing_key_callback&&this.options.missing_key_callback(a),d=[null,i,s],d[r()(o)+1]):(d=p[h],d?d:(d=[null,i,s],d[r()(o)+1]))}}),e.Jed=n}(this),r=window.r||{},r.setup=function(e){r.config=e,reddit=e,r.logging.init(),r.config.currentOrigin=location.protocol+"//"+location.host,r.analytics.breadcrumbs.init()},r.ajax=function(e){var t=e.url;if(e.type=="GET"&&_.isEmpty(e.data)){var n=r.preload.read(t);if(n!=null){e.dataFilter&&(n=e.dataFilter(n,"json")),e.success(n);var i=new jQuery.Deferred;return i.resolve(n),i}}var s=t&&(t[0]=="/"||t.lastIndexOf(r.config.currentOrigin,0)==0);return s&&(e.headers||(e.headers={}),e.headers["X-Modhash"]=r.config.modhash),$.ajax(e)},r.sync=function(e,t,n){var i=n.dataFilter;return n.dataFilter=function(e,t){var n;return t==="json"?n=r.utils.unescapeJson(e):n=e,i?i(n):n},r.backboneSync.call(Backbone,e,t,n)},store.safeGet=function(e,t){if(store.disabled)return t;try{return store.get(e)}catch(n){return r.sendError('Unable to read storage key "%(key)s" (%(err)s)'.format({key:e,err:n})),t}},store.safeSet=function(e,t){if(store.disabled)return!1;try{return store.set(e,t),!0}catch(n){return r.warn('Unable to set storage key "%(key)s" (%(err)s)'.format({key:e,err:n})),!1}},r.setupBackbone=function(){Backbone.emulateJSON=!0,Backbone.ajax=r.ajax,r.backboneSync||(r.backboneSync=Backbone.sync,Backbone.sync=r.sync)},$(function(){try{r.setupBackbone(),r.login.ui.init(),r.analytics.init(),r.ui.init(),r.interestbar.init(),r.visited.init(),r.apps.init(),r.wiki.init(),r.gold.init(),r.multi.init(),r.recommend.init(),r.saved.init(),r.resAdvisory.init(),r.filter.init()}catch(e){r.sendError("Error during base.js init",e)}}),r.preload={timestamp:new Date,maxAge:3e5,data:{},isExpired:function(){return new Date-this.timestamp>this.maxAge},set:function(e){_.extend(this.data,e)},read:function(e){var t=this.data[e];if(e[0]=="#")return t;if(this.isExpired())return;return t}},r.logging={},r.logging.pageAgeLimit=300,r.logging.sendThrottle=8,r.logging.exceptionMessageTemplate=_.template('Client Error: "<%= errorType %>" thrown at L<%= line %>:<%= character %> in <%= file %> Message: "<%= message %>"'),r.logging.defaultExceptionValues={message:"UNKNOWN MESSAGE",file:"UNKNOWN FILE",line:"?",character:"?",errorType:"UNKNOWN ERROR TYPE"},r.logging.sendException=function(e){if(!e)throw"No exception object was passed in.";_.defaults(e,r.logging.defaultExceptionValues);var t=r.logging.exceptionMessageTemplate(e);r.logging.sendError(t,{tag:"unknown"})},r.logging.init=function(){_.each(["debug","log","warn","error"],function(e){r[e]=(e!="debug"||r.config.debug)&&window.console&&console[e]?_.bind(console[e],console):function(){}}),r.sendError=r.logging.sendError},r.logging.serverLogger={logCount:0,_queuedLogs:[],queueLog:function(e){if(!r.config)return;r.warn||(r.warn=function(){});if(this.logCount>=3){r.warn("Not sending debug log; already sent",this.logCount);return}var t=new Date/1e3-r.config.server_time;if(Math.abs(t)>r.logging.pageAgeLimit){r.warn("Not sending debug log; page too old:",t);return}if(!r.config.send_logs){r.warn("Server-side debug logging disabled");return}e.url=window.location.toString(),this._queuedLogs.push(e),this.logCount++,_.defer(_.bind(function(){this._sendLogs()},this))},_sendLogs:_.throttle(function(){var e=this._queuedLogs.length;r.ajax({type:"POST",url:"/web/log/error.json",data:{logs:JSON.stringify(this._queuedLogs)},headers:{"X-Loggit":!0},success:function(){r.log("Sent",e,"debug logs to server")},error:function(e,t,n){r.warn("Error sending debug logs to server:",t,";",n)}}),this._queuedLogs=[]},r.logging.sendThrottle*1e3)},r.logging.sendError=function(){var e=_.toArray(arguments),t=_.last(e),n={};_.isObject(t)&&(n=t,e.pop());var i=_.defaults({msg:e.join(" ")},n);r.error&&r.error.apply(r,arguments),r.logging.serverLogger.queueLog(i)},!function(e,t,n,r){"use strict";var i=e.onerror;e.onerror=function(t,r,s,o,u){var a=/^(chrome:\/\/|file:\/\/)/i,f=/((^Script error\.$)|(atomicFindClose))/i;if(a.test(r)||f.test(t))return;var l={message:t,file:r,line:s,character:o,errorType:u};n.logging.sendException(l),i&&i.apply(e,arguments)}}(this,jQuery,r,_),!function(e,t){function n(e){t.sendError(e,{tag:"jquery-migrate-bad-html"})}var r=e.fn.init,i=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,s,o){var u;if(t&&typeof t=="string"&&!e.isPlainObject(s)&&(u=i.exec(e.trim(t)))&&u[0]){t.charAt(0)!=="<"&&n('$(html) HTML strings must start with "<" character'),u[3]&&n("$(html) HTML text after last tag is ignored"),u[0].charAt(0)==="#"&&n('HTML string cannot start with a "#" character'),s&&s.context&&(s=s.context);if(e.parseHTML)return r.call(this,e.parseHTML(t,s,!0),s,o)}return r.apply(this,arguments)},e.fn.init.prototype=e.fn}(jQuery,r),r.ui={},r.ui.Base=function(e){this.$el=$(e)},r.ui.collapsibleSideBox=function(e){var t=$("#"+e);return new r.ui.Collapse(t.find(".title"),t.find(".content"),e)},r.ui.Collapse=function(e,t,n){r.ui.Base.call(this,e),this.target=t,this.key="ui.collapse."+n,this.isCollapsed=store.safeGet(this.key)==1,this.$el.click($.proxy(this,"toggle",null,!1)),this.toggle(this.isCollapsed,!0)},r.ui.Collapse.prototype={animDuration:200,toggle:function(e,t){e==null&&(e=!this.isCollapsed);var n=t?0:this.animDuration;e?$(this.target).slideUp(n):$(this.target).slideDown(n),this.isCollapsed=e,store.safeSet(this.key,e),this.update()},update:function(){this.$el.find(".collapse-button").text(this.isCollapsed?"+":"-")}},r.ui.Summarize=function(e,t){r.ui.Base.call(this,e),this.maxCount=t,this._updateItems(),this.$hiddenItems.length>0&&(this.$toggleButton=$('<button class="expand-summary">').click($.proxy(this,"_toggle")),this.$el.after(this.$toggleButton),this._summarize())},r.ui.Summarize.prototype={_updateItems:function(){var e=this.$el.children(".important"),t=this.$el.children(":not(.important)"),n=this.maxCount?Math.max(0,this.maxCount-e.length):0,r=t.slice(0,n-1);this.$summaryItems=e.add(r),this.$hiddenItems=t.slice(n)},_summarize:function(){this.$el.addClass("summarized"),this.$hiddenItems.hide(),this.$toggleButton.html(r._("&hellip; and %(count)s more &rArr;").format({count:this.$hiddenItems.length}))},_expand:function(){this.$el.removeClass("summarized"),this.$hiddenItems.show(),this.$toggleButton.html(r._("&lArr; less"))},_toggle:function(e){this.$el.hasClass("summarized")?this._expand():this._summarize(),e.preventDefault()}},r.ui.setSavedFullname=function(e){var t=$(".id-"+e).find(".save-button a").first();t.text(r._("unsave")),t.thing().addClass("saved")},r.i18n={jed:new Jed({locale_data:{messages:{"":{domain:"messages",lang:"en"}}}}),setPluralForms:function(e){this.jed.options.locale_data.messages[""].plural_forms=e},addMessages:function(e){_.extend(this.jed.options.locale_data.messages,e)}},r._=_.bind(r.i18n.jed.gettext,r.i18n.jed),r.P_=_.bind(r.i18n.jed.ngettext,r.i18n.jed),r.N_=_.identity,r.NP_=function(e,t){return[e,t]},r.utils={clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},staticURL:function(e){return r.config.static_root+"/"+e},s3HTTPS:function(e){return location.protocol=="https:"?e.replace("http://","https://s3.amazonaws.com/"):e},joinURLs:function(){return _.map(arguments,function(e,t){return t>0&&e&&e[0]!="/"&&(e="/"+e),e}).join("")},tup:function(e){return _.isArray(e)||(e=[e]),e},structuredMap:function(e,t){if(_.isArray(e))return _.map(e,function(e){return r.utils.structuredMap(e,t)});if(_.isObject(e)){var n={};return _.each(e,function(e,i){n[t(i,"key")]=r.utils.structuredMap(e,t)}),n}return t(e,"value")},unescapeJson:function(e){return r.utils.structuredMap(e,function(e){return _.isString(e)?_.unescape(e):e})},querySelectorFromEl:function(e,t){return $(e).parents().addBack().filter(t||"*").map(function(e,t){var n=[],r=$(t),i=r.data("fullname"),s=r.attr("id"),o=r.attr("class");return n.push(t.nodeName.toLowerCase()),i?n.push('[data-fullname="'+i+'"]'):s?n.push("#"+s):o&&n.push("."+_.compact(o.split(/\s+/)).join(".")),n.join("")}).toArray().join(" ")},serializeForm:function(e){var t={};return $.each(e.serializeArray(),function(e,n){t[n.name]=n.value}),t},_pyStrFormatRe:/%\((\w+)\)s/g,pyStrFormat:function(e,t){return e.replace(this._pyStrFormatRe,function(e,n){if(n in t)return t[n];throw"missing format parameter"})},_mdLinkRe:/\[(.*?)\]\((.*?)\)/g,formatMarkdownLinks:function(e){return _.escape(e).replace(this._mdLinkRe,function(e,t,n){return'<a href="'+n+'">'+t+"</a>"})},prettyNumber:function(e){var t=parseInt(e);return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e},LRUCache:function(e){var t=e>0?e:16,n=[],r={},i=function(e){s(e),n.push(e),n.length>t&&delete r[n.shift()]},s=function(e){var t=_.indexOf(n,e);t>=0&&n.splice(t,1)};this.remove=function(e){s(e),delete r[e]},this.set=function(e,t){_.isUndefined(t)?this.remove(e):(r[e]=t,i(e))},this.get=function(e){var t=r[e];return _.isUndefined(t)||i(e),t},this.ajax=function(e,t){var n=this.get(e);return _.isUndefined(n)?$.ajax(t).done(_.bind(this.set,this,e)):(new $.Deferred).resolve(n)}}},String.prototype.format=function(e){return r.utils.pyStrFormat(this,e)},r.analytics={trackers:{},_pendingTrackers:{},init:function(){$(document).delegate(".organic-listing .promotedlink.promoted, .comments-page .promotedlink.promoted, .linklisting .promotedlink.promoted","onshow",_.bind(function(e){this.fetchTrackersOrFirePixel(e.target)},this)),$(".promotedlink.promoted:visible").trigger("onshow"),$("form.gold-checkout").one("submit",this.fireGoldCheckout),$(window).on("neverEndingLoad",this.fireNeverEndingLoadTrack),$(window).on("adBlockEnabled",this.fireAdBlockEnabled)},fetchTrackingHash:function(e){var t=$(e),n=t.data("fullname"),i=t.data("cid"),s=n;return s+="-"+(i||""),r.config.is_fake||(s+="-"+r.config.post_site),s in this.trackers||(this._pendingTrackers[s]=this.trackers[s]=new $.Deferred,this.fetchTrackingHashes()),this.trackers[s]},fetchTrackingHashes:_.debounce(function(){var e=this._pendingTrackers;$.ajax({url:r.config.fetch_trackers_url,type:"get",dataType:"jsonp",data:{ids:_.keys(e)},success:function(t){_.each(t,function(t,n){e[n].resolve(n,t)})}}),this._pendingTrackers={}},0),fetchTrackersOrFirePixel:function(e){this.fetchTrackingHash(e).done(_.bind(function(t,n){this.fireTrackingPixel(e,t,n)},this))},fireTrackingPixel:function(e,t,n){var i=$(e);if(i.data("trackerFired"))return;var s=i.parent().hasClass("organic-listing"),o=$("body").hasClass("comments-page");if(s||o){var u=new Image;u.src=r.config.adtracker_url+"?"+$.param({id:t,hash:n,r:Math.round(Math.random()*2147483647)});var a=new Image,f=i.data("adserverImpPixel"),l=i.data("adserverClickUrl");f&&(a.src=f)}var c=i.find("a.title"),h=c.html(),p=c.attr("href"),d={id:t,hash:n,url:p},v;v=r.config.clicktracker_url+"?"+$.param(d),save_href(c),c.attr("href",v),c.html()!=h&&c.html(h);var m=i.find("a.thumbnail");save_href(m),m.attr("href",v);if(i.hasClass("self")){var g=i.find("a.comments");save_href(g),g.attr("href",v)}i.data("trackerFired",!0)},fireUITrackingPixel:function(e,t,n){var i=new Image;i.src=r.config.uitracker_url+"?"+$.param(_.extend({act:e,sr:t,r:Math.round(Math.random()*2147483647)},r.analytics.breadcrumbs.toParams(),n))},fireGoldCheckout:function(e){var t=$(this),n=t.data("vendor");t.parent().addClass("working");if(!window._gaq)return;_gaq.push(["_trackPageview","/gold/external/"+n]),_gaq.push(function(){setTimeout(function(){t.submit()},500)}),_gat&&_gat._getTracker&&e.preventDefault()},fireNeverEndingLoadTrack:function(e){window._gaq&&_gaq.push(["_trackEvent","RES","neverEndingLoad","",0,!0])},fireAdBlockEnabled:function(e,t){t=t.toString(),window._gaq&&_gaq.push(["_trackEvent","AdBlock","enabled",t,0,!0])}},r.analytics.breadcrumbs={selector:".thing, .side, .sr-list, .srdrop, .tagline, .md, .organic-listing, .gadget, .sr-interest-bar, .trending-subreddits, a, button, input",maxLength:3,sendLength:2,init:function(){this.hasSessionStorage=this._checkSessionStorage(),this.data=this._load();var e=this.data[0]&&this.data[0]["url"]==window.location;e||this._storeBreadcrumb(),$(document).delegate("a, button","click",$.proxy(function(e){this.storeLastClick($(e.target))},this))},_checkSessionStorage:function(){try{return sessionStorage.setItem("__test__","test"),sessionStorage.removeItem("__test__"),!0}catch(e){return!1}},_load:function(){if(!this.hasSessionStorage)return[{stored:!1}];var e;try{e=JSON.parse(sessionStorage.breadcrumbs)}catch(t){e=[]}return _.isArray(e)||(e=[]),e},store:function(){this.hasSessionStorage&&(sessionStorage.breadcrumbs=JSON.stringify(this.data))},_storeBreadcrumb:function(){var e={url:location.toString()};if("referrer"in document){var t=!document.referrer.match("^"+r.config.currentOrigin),n=this.data[0]&&document.referrer!=this.data[0]["url"];if(t||n)e.ref=document.referrer}this.data.unshift(e),this.data=this.data.slice(0,this.maxLength),this.store()},storeLastClick:function(e){try{this.data[0].click=r.utils.querySelectorFromEl(e,this.selector),this.store()}catch(t){}},lastClickFullname:function(){var e=_.find(this.data,function(e){return e.click});if(e){var t=e.click.match(/.*data-fullname="(\w+)"/);return t&&t[1]}},toParams:function(){params=[];for(var e=0;e<this.sendLength;e++)_.each(this.data[e],function(t,n){params["c"+e+"_"+n]=t});return params}},function(e){function n(e){return t[e]?!1:(t[e]=!0,!0)}function r(e){delete t[e]}function i(t){return function(t){if(t.jquery){var n={};n[0]=jQuery,e.map(t.jquery,function(t){var r=t[0],i=t[1],s=t[2],o=t[3];if(typeof o=="string")o=e.unsafe(o);else for(var u=0;o.length&&u<o.length;u++)o[u]=e.unsafe(o[u]);s=="call"?n[i]=n[r].apply(n[r]._obj,o):s=="attr"?(n[i]=n[r][o],n[i]?n[i]._obj=n[r]:e.debug("unrecognized")):s=="refresh"?e.refresh():e.debug("unrecognized")})}}}e.log=function(e){window.console?window.console.debug?window.console.debug(e):window.console.log&&window.console.log(e):alert(e)},e.debug=function(t){if(e.with_default(reddit.debug,!1))return e.log(t)},e.fn.debug=function(){return e.debug(e(this)),e(this)},e.redirect=function(e){window.location=e},e.fn.redirect=function(t){e(this).filter("form").find(".status").show().html("redirecting...");var n=e(this).attr("target");if(n=="_top"){var r=window;while(r!=r.parent)r=r.parent;r.location=t}else e.redirect(t);return e(this)},e.refresh=function(){window.location.reload(!0)},e.defined=function(e){return typeof e!="undefined"},e.with_default=function(t,n){return e.defined(t)?t:n},e.websafe=function(e){return typeof e=="string"&&(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;")),e||""},e.unsafe=function(e){return typeof e=="string"&&(e=e.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")),e||""},e.uniq=function(e,t){var n=[],r={},i=t?t:e.length;for(var s=0;s<e.length&&n.length<i;s++)r[e[s]]||(r[e[s]]=!0,n.push(e[s]));return n},function(t,n){e.fn.show=function(n,r){return e(this).trigger("onshow"),t.call(this,n,r)},e.fn.hide=function(t,r){return e(this).trigger("onhide"),n.call(this,t,r)}}(e.fn.show,e.fn.hide);var t={};e.handleResponse=i;var s="/api/";e.request=function(t,o,u,a,f,l,c){var h=t,p=u;if(rate_limit(t)){c&&c("ratelimit");return}if(window!=window.top&&!reddit.external_frame)return;var d=!e.with_default(a,!1)||n(h);o=e.with_default(o,{}),u=e.with_default(u,i(h)),f=e.with_default(f,"json"),typeof u!="function"&&(u=i(h));var p=function(e){return r(h),u(e)};errorhandler_in=e.with_default(c,function(){}),c=function(e){return r(h),errorhandler_in(e)},l=e.with_default(l,!1),reddit.post_site&&(o.r=reddit.post_site),reddit.logged&&(o.uh=reddit.modhash),o.renderstyle=reddit.renderstyle,d&&(t=s+t,e.ajax({type:l?"GET":"POST",url:t,data:o,success:p,error:c,dataType:f}))};var o="up",u="upmod",a="down",f="downmod";rate_limit=function(){var e=333,t={vote:333,comment:333,ignore:0,ban:0,unban:0,assignad:0},n={},r=Date;return function(s){var o=new r,u=s in t?t[s]:e,a=n[s],f=a&&o-a<u;return n[s]=o,f}}(),e.fn.vote=function(t,n,r,i){if(reddit.logged&&e(this).hasClass("arrow")){var s=e(this).hasClass(o)?1:e(this).hasClass(a)?-1:0,l=e(this).all_things_by_id(),c=l.children().not(".child").find(".arrow"),h=s==1?o:u,p=s==1?u:o;c.filter("."+h).removeClass(h).addClass(p);var d=s==-1?a:f,v=s==-1?f:a;c.filter("."+d).removeClass(d).addClass(v);if(reddit.logged){l.each(function(){var t=e(this).find(".entry:first, .midcol:first");s>0?t.addClass("likes").removeClass("dislikes unvoted"):s<0?t.addClass("dislikes").removeClass("likes unvoted"):t.addClass("unvoted").removeClass("likes dislikes")});if(!e.defined(i)){var m=l.filter(":first").thing_id();t+=r?"":"-"+m,e.request("vote",{id:m,dir:s,vh:t})}}n&&n(l,s)}},e.fn.show_unvotable_message=function(){e(this).thing().find(".entry:first .unvotable-message").css("display","inline-block")},e.fn.thing=function(){return this.parents(".thing:first")},e.fn.all_things_by_id=function(){return this.thing().add(e.things(this.thing_id()))},e.fn.thing_id=function(t){t=e.with_default(t,"thing");var n=this.hasClass("thing")?this:this.thing();t!="thing"&&(n=n.find("."+t+":first"));if(n.length){var r=e.grep(n.get(0).className.match(/\S+/g),function(e){return e.match(/^id-/)});return r.length?r[0].slice(3,r[0].length):""}return""},e.things=function(){var t=e.map(arguments,function(e){return".thing.id-"+e}).join(", ");return e(t)},e.fn.same_author=function(){var t=e(this).thing_id("author"),n=[];return e(".author.id-"+t).each(function(){n.push(".thing.id-"+e(this).thing_id())}),e(n.join(", "))},e.fn.things=function(){var t=e.map(arguments,function(e){return".thing.id-"+e}).join(", ");return this.find(t)},e.listing=function(t){t=t||"";var n="siteTable";if(t.slice(0,1)=="#"||t.slice(0,1)==".")t=t.slice(1,t.length);var r=t;t.slice(0,n.length)!=n?r=n+(t?"_"+t:""):t=t.slice(n.length+1,t.length);var i=e("#"+r).filter(":first");return i.length==0&&(i=e.things(t).find(".child").append(document.createElement("div")).children(":last").addClass("sitetable").attr("id",r)),i};var l=function(){};e.fn.set_thing_init=function(t){l=t,e(this).find(".thing:not(.stub)").each(function(){t(this)})},e.fn.new_thing_child=function(t,n){var r=this.thing_id(),i=n?e.listing(r):this.thing().find(".child:first"),s;return typeof t=="string"?s=i.prepend(t).children(":first"):s=t.hide().prependTo(i).show().find('input[name="parent"]').val(r).end(),s.randomize_ids()},e.fn.randomize_ids=function(){var t=(Math.random()+"").split(".")[1];return e(this).find("*[id]").each(function(){e(this).attr("id",e(this).attr("id")+t)}).end().find("label").each(function(){e(this).attr("for",e(this).attr("for")+t)}),e(this)},e.fn.replace_things=function(t,n,r,i){var s=this,o=e.map(t,function(t){var o=t.data,u=e(s).things(o.id);i&&(u=u.filter(".stub"));if(u.length==0){var a=e.things(o.parent);a.length&&(u=e("<div></div>"),a.find(".child:first").append(u))}u.after(e.unsafe(o.content));var f=u.next();return n&&(f.show().children(".midcol, .entry").hide().end().children(".child:first").html(u.children(".child:first").remove().html()).end(),r&&(u.hide(),f.children(".midcol, .entry").show()),f.find(".rank:first").html(u.find(".rank:first").html())),r?(u.hide(),n?f.children(".midcol, .entry").show():f.show(),u.remove()):(f.hide(),u.remove()),l(f),e(document).trigger("new_thing",f),f});return e(document).trigger("new_things_inserted"),o},e.insert_things=function(t,n){var r=e.map(t,function(t){var r=t.data,i=e.listing(r.parent);return n?i=i.append(e.unsafe(r.content)).children(".thing:last"):i=i.prepend(e.unsafe(r.content)).children(".thing:first"),l(i.hide().show()),e(document).trigger("new_thing",i),i});return e(document).trigger("new_things_inserted"),r},e.fn.delete_table_row=function(t){var n=this.parents("tr:first").get(0),r=this.parents("table").get(0);n?e(n).fadeOut(function(){r.deleteRow(n.rowIndex),t&&t()}):t&&t()},e.fn.insert_table_rows=function(t,n){var r=this.is("table")?this.filter("table"):this.parents("table:first");return e.map(r.get(),function(r){e.map(t,function(t){var i=n;i<0&&(i=Math.max(r.rows.length+i+1,0)),i=Math.min(i,r.rows.length);var s=e(r.insertRow(i)),o=e(e.unsafe(t));o.hide(),s.replaceWith(o),o.trigger("insert-row"),o.css("display","table-row"),o.fadeIn()})}),this},e.fn.captcha=function(e){var t=this.find(".capimage");return e&&t.attr("src","/captcha/"+e+".png").parents("form").find('input[name="iden"]').val(e),t},e.fn.insertAtCursor=function(t){return e(this).filter("textarea").each(function(){var n=e(this).get(0),r=n.scrollTop;if(document.selection){n.focus();var i=document.selection.createRange();i.text=t}else if(n.selectionStart){var s=n.selectionStart;n.value=n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length),s+=t.length,n.setSelectionRange(s,s)}else n.value+=t;n.scrollHeight&&(n.scrollTop=r),e(this).focus()}).end()},e.fn.select_line=function(t){return e(this).filter("textarea").each(function(){var n="\n",r=1,i=0,s=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());s&&(n="\r",r=0,i=1);var o=e(this).val().split(n);for(var u=0;u<t-1;u++)i+=o[u].length+r;var a=i;t<=o.length&&(a+=o[t-1].length+r),e(this).focus();if(this.createTextRange){var f=this.createTextRange();f.move("character",i);var l=this.createTextRange();l.move("character",a),f.setEndPoint("StartToEnd",l),f.select()}else this.selectionStart&&this.setSelectionRange(i,a);if(this.scrollHeight){var c=this.scrollHeight/o.length;this.scrollTop=(t-2)*c}})},e.apply_stylesheet=function(t){var n=e("head").children("link[title], style[title]").filter(":first").attr("title")||"preferred stylesheet";if(document.styleSheets[0].cssText){var r=document.styleSheets;for(var i=0;i<r.length;i++)if(r[i].title==n){r[i].cssText=t;break}}else{e("head").children('*[title="'+n+'"]').remove(),document.body.offsetHeight;var s=e('<style type="text/css" media="screen"></style>').attr("title",n).text(t).appendTo("head")}},e.rehighlight_new_comments=function(){checked=e(".comment-visits-box input:checked");if(checked.length>0){var t=checked[0].value;highlight_new_comments(t)}};var c;e.default_cookie_domain=function(e){e&&(c=e)};var h="_";e.cookie_name_prefix=function(e){e&&(h=e+"_")},e.cookie_write=function(t){if(t.name){var n={};n.expires=t.expires,n.domain=t.domain||c,n.path=t.path||"/";var r=h+t.name,i=t.data;i===null||i==""?i=null:typeof i!="string"&&(i=JSON.stringify(i)),e.cookie(r,i,n)}},e.cookie_read=function(t,n){var r=(n||h)+t,i=e.cookie(r);try{i=JSON.parse(i)}catch(s){}return{name:t,data:i}}}(jQuery);function open_menu(e){$(e).siblings(".drop-choices").not(".inuse").css("top",e.offsetHeight+"px").each(function(){$(this).css("left",$(e).position().left+"px").css("top",$(e).height()+$(e).position().top+"px")}).addClass("active inuse")}function close_menus(e){$(".drop-choices.inuse").not(".active").removeClass("inuse"),$(".drop-choices.active").removeClass("active").trigger("close_menu"),$(".flairselector").empty(),$(e.target).closest("#search").length==0&&($("#moresearchinfo").slideUp(),$("#searchexpando").length==1?$("#searchexpando").slideUp(function(){$("#search_showmore").parent().show()}):$("#search_showmore").parent().show())}function hover_open_menu(e){}function select_tab_menu(e,t){var n="tabbedpane-"+t,r=$(e).parent().parent().parent();r.find(".tabmenu li").removeClass("selected"),$(e).parent().addClass("selected"),r.find(".tabbedpane").each(function(){this.style.display=this.id==n?"block":"none"})}function update_user(e){try{var t=$(e).find('input[name="user"]').val();e.action+="/"+t}catch(n){}return!0}function post_user(e,t){var n=$(e).find('input[name="user"]').val();return n==null?post_form(e,t):post_form(e,t+"/"+n)}function post_form(e,t,n,r,i){try{return n==null&&(n=function(e){return reddit.status_msg.submitting}),$(e).find(".error").not(".status").hide(),$(e).find(".status").html(n(e)).show(),simple_post_form(e,t,{},i)}catch(s){return!1}}function get_form_fields(e,t,n){return t=t||{},n||(n=function(e){return!0}),$(e).find("select, input, textarea").not(".gray, :disabled").each(function(){var e=$(this),r=e.attr("type");if(!n(this))return;if(e.data("send-checked"))t[e.attr("name")]=e.is(":checked");else if(r!="radio"&&r!="checkbox"||e.is(":checked"))t[e.attr("name")]=e.val()}),t.id==null&&(t.id=$(e).attr("id")?"#"+$(e).attr("id"):""),t}function form_error(e){return function(t){var n;t=="ratelimit"?n=r._("please wait a few seconds and try again."):n=r._("an error occurred (status: %(status)s)").format({status:t.status}),$(e).find(".status").text(n)}}function simple_post_form(e,t,n,r,i){return $.request(t,get_form_fields(e,n),i,r,"json",!1,form_error(e)),!1}function post_pseudo_form(e,t,n){var r=function(t){var n=$(t).parents("form:first");return n.length==0||n.get(0)==$(e).get(0)};return $(e).find(".error").not(".status").hide(),$(e).find(".status").html(reddit.status_msg.submitting).show(),$.request(t,get_form_fields(e,{},r),null,n,"json",!1,form_error(e)),!1}function post_multipart_form(e,t){return $(e).find(".error").not(".status").hide(),$(e).find(".status").html(reddit.status_msg.submitting).show(),!0}function emptyInput(e,t){!$(e).val()||$(e).val()==t?$(e).addClass("gray").val(t).attr("rows",3):$(e).focus(function(){})}function showlang(){return $(".lang-popup:first").show(),!1}function hidecover(e){return $(e).parents(".cover-overlay").hide(),!1}function deleteRow(e){$(e).delete_table_row()}function change_state(e,t,n,r,i){var s=$(e).parents("form").first(),o=s.find('input[name="id"]');return o.length?o=o.val():o=$(e).thing_id(),simple_post_form(s,t,{id:o},undefined,i),n&&n(s.length?s:e,t),$.defined(r)||s.html(s.find('[name="executed"]').val()),!1}function unread_thing(e){var t=$(e);t.hasClass("thing")||(t=t.thing()),$(t).addClass("new unread")}function read_thing(e){var t=$(e);t.hasClass("thing")||(t=t.thing()),$(t).hasClass("new")?$(t).removeClass("new"):$(t).removeClass("unread"),$.request("read_message",{id:$(t).thing_id()})}function save_thing(e){$(e).thing().addClass("saved")}function unsave_thing(e){$(e).thing().removeClass("saved")}function click_thing(e){var t=$(e);t.hasClass("thing")||(t=t.thing()),t.hasClass("message")&&t.hasClass("recipient")&&(t.hasClass("unread")?t.removeClass("unread"):t.hasClass("new")&&read_thing(e))}function hide_thing(e){$(e).thing().fadeOut(function(){$(this).toggleClass("hidden"),unexpando_child(e)})}function toggle_label(e,t,n){$(e).parent().find(".option").toggle(),$(e)[0].onclick=function(){return toggle_label(e,n,t)},t&&t(e)}function toggle(e,t,n){r.analytics.breadcrumbs.storeLastClick(e);var i=$(e).parent().addBack().filter(".option"),s=i.removeClass("active").siblings().addClass("active").get(0);return n&&!s.onclick&&(s.onclick=function(){return toggle(s,n,t)}),t&&t(e),!1}function cancelToggleForm(e,t,n,r){if(n&&$(e).filter("button").length){var i=$(e).thing().find(n).children(":visible").filter(":first");toggle(i)}return $(e).thing().find(t).each(function(){r&&r($(this)),$(this).hide().remove()}),!1}function linkstatus(e){return reddit.status_msg.submitting}function subscribe(e){return function(){reddit.logged&&(reddit.cur_site==e&&$("body").addClass("subscriber"),$.things(e).find(".entry").addClass("likes"),$.request("subscribe",{sr:e,action:"sub"}),r.analytics.fireUITrackingPixel("sub",e,{has_subd:r.config.has_subscribed}))}}function unsubscribe(e){return function(){reddit.logged&&(reddit.cur_site==e&&$("body").removeClass("subscriber"),$.things(e).find(".entry").removeClass("likes"),$.request("subscribe",{sr:e,action:"unsub"}),r.analytics.fireUITrackingPixel("unsub",e))}}function friend(e,t,n){return function(){reddit.logged&&(encoded=encodeURIComponent(document.referrer),$.request("friend?note="+encoded,{name:e,container:t,type:n}))}}function unfriend(e,t,n){return function(){$.request("unfriend",{name:e,container:t,type:n})}}function share(e){$.request("new_captcha"),$(e).new_thing_child($(".sharelink:first").clone(!0).attr("id","sharelink_"+$(e).thing_id()),!1),$.request("new_captcha")}function cancelShare(e){return cancelToggleForm(e,".sharelink",".share-button")}function reject_promo(e){$(e).thing().find(".rejection-form").show().find("textare").focus()}function cancel_reject_promo(e){$(e).thing().find(".rejection-form").hide()}function complete_reject_promo(e){$(e).thing().removeClass("accepted").addClass("rejected").find(".reject_promo").remove()}function helpon(e){$(e).parents(".usertext-edit:first").children(".markhelp:first").show()}function helpoff(e){$(e).parents(".usertext-edit:first").children(".markhelp:first").hide()}function show_all_messages(e){var t=$(e).parents(".message"),n=[];return t.find(".entry .collapsed").hide().end().find(".noncollapsed, .midcol:first").filter(":hidden").each(function(){var e=$(this).show().thing_id();n.indexOf(e)==-1&&n.push(e)}),n.length&&$.request("uncollapse_message",{id:n.join(",")}),!1}function hide_all_messages(e){var t=$(e).parents(".message"),n=[];return t.find(".entry .collapsed").show().end().find(".noncollapsed, .midcol:first").filter(":visible").each(function(){var e=$(this).hide().thing_id();n.indexOf(e)==-1&&n.push(e)}),n.length&&$.request("collapse_message",{id:n.join(",")}),!1}function hidecomment(e){var t=$(e).thing();return t.hide().find(".noncollapsed:first, .midcol:first").hide().end().show().find(".entry:first .collapsed").show(),t.hasClass("message")?$.request("collapse_message",{id:$(t).thing_id()}):t.find(".child:first").hide(),!1}function showcomment(e){var t=$(e).thing();return t.find(".entry:first .collapsed").hide().end().find(".noncollapsed:first, .midcol:first").show().end().show(),t.hasClass("message")?$.request("uncollapse_message",{id:$(t).thing_id()}):t.find(".child:first").show(),!1}function morechildren(e,t,n,r,i){$(e).html(reddit.status_msg.loading).css("color","red");var s=$(e).parents(".thing.morechildren:first").thing_id();return $.request("morechildren",{link_id:t,children:n,depth:r,id:s,pv_hex:i}),!1}function moremessages(e){return $(e).html(reddit.status_msg.loading).css("color","red"),$.request("moremessages",{parent_id:$(e).thing_id()}),!1}function add_thing_to_cookie(e,t){var n=$(e).thing_id();if(n&&n.length)return add_thing_id_to_cookie(n,t)}function add_thing_id_to_cookie(e,t){var n=$.cookie_read(t);n.data||(n.data="");if(n.data.substring(0,e.length)==e)return;n.data=e+","+n.data;var r=n.data.split(",");r.length>5&&(r=$.uniq(r,5),n.data=r.join(",")),$.cookie_write(n)}function clicked_items(){var e=$.cookie_read("recentclicks2");if(e&&e.data){var t=e.data.split(",");for(var n=t.length-1;n>=0;n--)(!t[n]||!t[n].length)&&t.splice(n,1);return t}return[]}function clear_clicked_items(){var e=$.cookie_read("recentclicks2");e.data="",$.cookie_write(e),$(".gadget").remove()}function updateEventHandlers(e){e=$(e);var t=e.parent();$(e).filter(".link").find("a.title, a.comments").mousedown(function(){add_thing_to_cookie(this,"recentclicks2")}),t.filter(".organic-listing").length&&(e.find(".hide-button a, .del-button a.yes, .report-button a.yes"
).each(function(){$(this).get(0).onclick=null}),e.find(".hide-button a").click(function(){var e=$(this).get(0);change_state(e,"hide",function(){r.spotlight.next()})}),e.find(".del-button a.yes").click(function(){var e=$(this).get(0);change_state(e,"del",function(){r.spotlight.next()})}),e.find(".report-button a.yes").click(function(){var e=$(this).get(0);change_state(e,"report",function(){r.spotlight.next()})}))}function last_click(){var e=r.analytics.breadcrumbs.lastClickFullname();e&&$("body").hasClass("listing-page")&&($(".last-clicked").removeClass("last-clicked"),$(".id-"+e).last().addClass("last-clicked"))}function login(e){return post_user(this,"login")}function register(e){return post_user(this,"register")}function fetch_title(){var e=$("#url-field"),t=e.find(".NO_URL"),n=e.find(".title-status"),r=$("#url").val();if(r){if($('form#newlink textarea[name="title"]').val()&&!confirm("This will replace your existing title, proceed?"))return;n.show().text(reddit.status_msg.loading),t.hide(),$.request("fetch_title",{url:r})}else n.hide(),t.show().text("a url is required")}function sr_cache(){return $.defined(reddit.sr_cache)||(reddit.sr_cache=new Array),reddit.sr_cache}function highlight_reddit(e){$("#sr-drop-down").children(".sr-selected").removeClass("sr-selected"),e&&$(e).addClass("sr-selected")}function update_dropdown(e){var t=$("#sr-drop-down");if(!e.length){t.hide();return}var n=t.children(":first");n.removeClass("sr-selected"),t.children().remove(),$.each(e,function(r){if(r>10)return;var i=e[r],s=n.clone();s.text(i),t.append(s)});var r=$("#sr-autocomplete").outerHeight();t.css("top",r),t.show()}function sr_search(e){e=e.toLowerCase();var t=sr_cache();t[e]?update_dropdown(t[e]):$.request("search_reddit_names.json",{query:e,include_over_18:r.config.over_18},function(n){t[e]=n.names,update_dropdown(n.names)})}function sr_name_up(e){var t=$("#sr-autocomplete").val(),n=window.old_sr_name||"";window.old_sr_name=t,t==""?hide_sr_name_list():e.keyCode!=38&&e.keyCode!=40&&e.keyCode!=9&&(e.keyCode==27&&reddit.orig_sr?($("#sr-autocomplete").val(reddit.orig_sr),hide_sr_name_list()):t!=n&&(reddit.orig_sr=t,sr_search($("#sr-autocomplete").val())))}function sr_name_down(e){var t=$("#sr-autocomplete");if(e.keyCode==38||e.keyCode==40){var n=e.keyCode==38&&"up"||"down",r=$("#sr-drop-down .sr-selected:first"),i=$("#sr-drop-down .sr-name-row:first"),s=$("#sr-drop-down .sr-name-row:last"),o=null;return n=="down"?r.length?r.get(0)==s.get(0)?o=null:o=r.next(":first"):o=i:r.length?r.get(0)==i.get(0)?o=null:o=r.prev(":first"):o=s,highlight_reddit(o),o?t.val($.trim(o.text())):t.val(reddit.orig_sr),!1}if(e.keyCode==13)return $("#sr-autocomplete").trigger("sr-changed"),hide_sr_name_list(),t.parents("form").submit(),!1}function hide_sr_name_list(e){$("#sr-drop-down").hide()}function sr_dropdown_mdown(e){return reddit.sr_mouse_row=e,!1}function sr_dropdown_mup(e){if(reddit.sr_mouse_row==e){var t=$(e).text();$("#sr-autocomplete").val(t),$("#sr-drop-down").hide(),$("#sr-autocomplete").trigger("sr-changed")}}function set_sr_name(e){var t=$(e).text();$("#sr-autocomplete").trigger("focus").val(t),$("#sr-autocomplete").trigger("sr-changed")}function select_form_tab(e,t,n){var r=$(e).parent();r.addClass("selected").siblings().removeClass("selected");var i=r.parent("ul").next(".formtabs-content");i.find(t).show().find(":input").removeAttr("disabled").end(),i.find(n).hide().find(":input").attr("disabled",!0)}function expando_cache(){return $.defined(reddit.thing_child_cache)||(reddit.thing_child_cache=new Array),reddit.thing_child_cache}function expando_child(e){var t=expando_cache(),n=$(e).thing(),r=n.find(".expando-button");r.addClass("expanded").removeClass("collapsed").get(0).onclick=function(){unexpando_child(e)};var i=n.find(".expando"),s=n.thing_id()+"_cache";return t[s]?(i.html($.unsafe(t[s])),$(document).trigger("expando_thing",n)):$.request("expando",{link_id:n.thing_id()},function(e){t[s]=e,i.html($.unsafe(e)),$(document).trigger("expando_thing",n)},!1,"html"),i.show(),!1}function unexpando_child(e){var t=$(e).thing(),n=t.find(".expando-button");n.addClass("collapsed").removeClass("expanded").get(0).onclick=function(){expando_child(e)},t.find(".expando").hide().empty()}function show_edit_usertext(e){var t=e.find(".usertext-edit"),n=e.find(".usertext-body"),r=t.find("div > textarea"),i=Math.max(n.children(".md").width(),500),s=Math.max(n.children(".md").height(),100);n.hide(),t.show(),r.css("width",""),r.css("height","");if(r.get(0).scrollHeight>r.height()){var o=Math.max(i-5,r.width());r.width(o),t.width(o);var u=Math.max(s,r.height());r.height(u)}e.find(".cancel, .save").show().end().find(".help-toggle").show().end(),r.focus()}function hide_edit_usertext(e){e.find(".usertext-edit").hide().end().find(".usertext-body").show().end().find(".cancel, .save").hide().end().find(".help-toggle").hide().end().find(".markhelp").hide().end()}function comment_reply_for_elem(e){e=$(e);var t=e.thing(),n=e.thing_id(),r=t.find(".child .usertext:first");if(!r.length||r.parent().thing_id()!=t.thing_id())r=$(".usertext.cloneable:first").clone(!0),e.new_thing_child(r),r.prop("thing_id").value=n,r.attr("id","commentreply_"+n),r.find(".error").hide();return r}function edit_usertext(e){var t=$(e).thing();t.find(".edit-usertext:first").parent("li").addBack().hide(),show_edit_usertext(t.find(".usertext:first"))}function cancel_usertext(e){var t=$(e);t.thing().find(".edit-usertext:first").parent("li").addBack().show(),hide_edit_usertext(t.closest(".usertext"))}function save_usertext(e){var t=$(e).thing();t.find(".edit-usertext:first").parent("li").addBack().show()}function reply(e){var t=comment_reply_for_elem(e),n=t.find("textarea");if(window.getSelection&&n.val().length==0){var r=window.getSelection(),i=$(r.focusNode).parents(".md").first(),s=$(r.anchorNode).parents(".md").first();if(i.length&&i.is(s)){var o=r.toString();o.length>0&&(o=o.replace(/^/gm,"> "),n.val(o+"\n\n"),n.scrollTop(n.scrollHeight))}}return show_edit_usertext(t),t.show(),t.find(".cancel").get(0).onclick=function(){t.hide()},$(e).thing().find(".showreplies:visible").click(),!1}function toggle_distinguish_span(e){var t=$(e).parents("form")[0];$(t).children().toggle()}function set_distinguish(e,t){change_state(e,"distinguish/"+t),$(e).children().toggle()}function populate_click_gadget(){if($(".click-gadget").length){var e=clicked_items();e&&e.length&&(e=$.uniq(e,5),e.sort(),$.request("gadget/click/"+e.join(","),undefined,undefined,undefined,"json",!0))}}var toolbar_p=function(e,t){this.toggle_linktitle=function(e){return $(".title, .submit, .url, .linkicon").toggle(),$(e).is(".pushed-button")?$(e).parents(".middle-side").removeClass("clickable"):($(e).parents(".middle-side").addClass("clickable"),$(".url").children("form").children("input").focus().select()),this.toggle_pushed(e)},this.toggle_pushed=function(e){return e=$(e),e.is(".pushed-button")?e.removeClass("pushed-button").addClass("popped-button"):e.removeClass("popped-button").addClass("pushed-button"),!1},this.push_button=function(e){$(e).removeClass("popped-button").addClass("pushed-button")},this.pop_button=function(e){$(e).removeClass("pushed-button").addClass("popped-button")},this.serendipity=function(){return this.push_button(".serendipity"),!0},this.show_panel=function(){$("body",parent.inner_toolbar.document).addClass("expanded")},this.hide_panel=function(){$("body",parent.inner_toolbar.document).removeClass("expanded")},this.resize_toolbar=function(){var e=$("body").height();parent.document.body.rows=e+"px, 100%"},this.login_msg=function(){return $(".toolbar-status-bar").show(),$(".login-arrow").show(),this.resize_toolbar(),!1},this.top_window=function(){var e=window;while(e!=e.parent)e=e.parent;return e.parent};var n=null;this.panel_loadurl=function(e){try{var t=window.parent.inner_toolbar.reddit_panel.location;return t==e?!1:(n!=null&&(this.pop_button(n),n=null),!0)}catch(r){return!0}};var r=0;this.comments_pushed=function(e){r=!r,r?(this.push_button(e),this.show_panel()):(this.pop_button(e),this.hide_panel())},this.gourl=function(e,t){var n=$(e).find('input[type="text"]').val(),r=t+escape(n);return this.top_window().location.href=r,!1},this.pref_commentspanel_hide=function(){$.request("tb_commentspanel_hide")},this.pref_commentspanel_show=function(){$.request("tb_commentspanel_show")}};function clear_all_langs(e){$(e).parents("td").find('input[type="checkbox"]').prop("checked",!1)}function check_some_langs(e){$(e).parents("td").find("#some-langs").prop("checked",!0)}function fetch_parent(e,t,n){$(e).css("color","red").html(reddit.status_msg.loading);var r=$(e).thing(),i=r.find(".uncollapsed .parent");if(i.length==0){var s="";$.getJSON(t,function(t){$.each(t,function(){this&&this.data.children&&$.each(this.data.children,function(){this.data.name==n&&(s=this.data.body_html)})}),s&&r.find(".noncollapsed .md").first().before('<div class="parent rounded">'+$.unsafe(s)+"</div>"),$(e).parent("li").addBack().remove()})}return!1}function big_mod_action(e,t){if(!e.hasClass("pressed")){e.addClass("pressed");var n=e.thing_id();d={id:n},e.siblings(".status-msg").hide(),t==-1?(d.spam=!1,$.request("remove",d,null,!0),e.siblings(".removed").show()):t==-2?($.request("remove",d,null,!0),e.siblings(".spammed").show()):t==1&&($.request("approve",d,null,!0),e.siblings(".approved").show())}return e.siblings(".pretty-button").removeClass("pressed"),!1}function big_mod_toggle(e,t,n){return e.toggleClass("pressed"),$.request(e.is(".pressed")?t:n,{id:e.thing_id()},null,!0),!1}$(function(){function e(){return toggle(this)}$("body").click(close_menus),$("body").set_thing_init(updateEventHandlers),"placeholder"in document.createElement("input")||$("textarea[placeholder], input[placeholder]").addClass("gray").each(function(){var e=$(this),t=e.attr("placeholder");e.val()==""&&e.val(t)}),$("textarea.gray, input.gray").focus(function(){$(this).attr("rows",7).filter(".gray").removeClass("gray").val("")}),reddit.logged&&$.cookie_name_prefix(reddit.logged),$.default_cookie_domain(reddit.cur_domain.split(":")[0]),last_click(),$(window).on("pageshow",function(){last_click()}),$('#search input[name="q"]').focus(function(){$("#searchexpando").slideDown()}),$("#search_showmore").click(function(e){$("#search_showmore").parent().hide(),$("#moresearchinfo").slideDown(),e.preventDefault()}),$("#moresearchinfo").prepend('<a href="#" id="search_hidemore">[-]</a>'),$("#search_hidemore").click(function(e){$("#search_showmore").parent().show(),$("#moresearchinfo").slideUp(),e.preventDefault()}),$("#shortlink-text").click(function(){$(this).select()}),$("body").delegate(".ajax-yn-button","submit",function(){var e=$(this).find('input[name="_op"]').val();return post_form(this,e),!1}).delegate(".ajax-yn-button .togglebutton","click",e).delegate(".ajax-yn-button .no","click",e).delegate(".ajax-yn-button .yes","click",function(){$(this).closest("form").submit()})});function show_friend(e){var t='<a class="friend" title="friend" href="/prefs/friends">F</a>',n=$("div.content .author.id-"+e).addClass("friend").next(".userattrs").each(function(){$(this).html()?$(this).find(".friend").length==0&&$(this).find("a:first").debug().before(t+","):$(this).html(" ["+t+"]")})}function show_unfriend(e){var t=$(".author.id-"+e).removeClass("friend").next(".userattrs");t.each(function(){$(this).find("a.friend").remove(),$(this).find("a").length==0&&$(this).html("")})}function search_feedback(e,t){f=$("form#search");var n=f.find('input[name="q"]').val(),r=f.find('input[name="sort"]').val(),i=f.find('input[name="t"]').val(),s={q:n,sort:r,t:i,approval:t};return $.request("searchfeedback",s,null,!0),e.siblings(".pretty-button").removeClass("pressed"),e.siblings(".thanks").show(),e.addClass("pressed"),!1}function highlight_new_comments(e){var t;for(t=0;t<=9;t++)items=$(".comment-period-"+t),e>=0&&t>=e?items.addClass("new-comment"):items.removeClass("new-comment")}function save_href(e){return e.attr("srcurl")||e.attr("srcurl",e.attr("href")),e}function pure_domain(e){var t=e.match(/:\/\/([^/]+)/);return t&&(t=t[1].replace(/^www\./,"")),t}function parse_domain(e){var t=pure_domain(e);if(!t){var n=e.match(/\/r\/([^/]+)/);n&&(t="self."+n[1].toLowerCase())}return t}r.spotlight={},r.spotlight.init=function(){var e=$(".organic-listing");if(!e.length)return;$(".organic-listing .arrow.prev").on("click",$.proxy(this,"prev")),$(".organic-listing .arrow.next").on("click",$.proxy(this,"next"));var t,n=r.analytics.breadcrumbs.lastClickFullname(),i=$(n?".id-"+n:null);i.length&&e.has(i).length?(r.debug("restoring spotlight selection to last click"),t={fullname:n}):t=this.chooseRandom(),this.lineup=_.chain(this.lineup).reject(function(e){return _.isEqual(t,e)}).shuffle().unshift(t).value(),this.lineup.pos=0,r.spotlight._advance(0)},r.spotlight.setup=function(e,t,n,r){this.organics=[],this.lineup=[],_.each(e,function(e){this.organics.push(e),this.lineup.push({fullname:e})},this),t&&this.lineup.push(".interestbar"),this.interest_prob=t,this.show_promo=n,this.srnames=r,this.init()},r.spotlight.requestPromo=function(){return $.ajax({type:"POST",url:"/api/request_promo",timeout:1e3,data:{srnames:this.srnames,r:r.config.post_site}}).pipe(function(e){return e?($item=$(e),$item.hide().appendTo($(".organic-listing")),$item):!1})},r.spotlight.chooseRandom=function(){var e=$(".organic-listing");if(this.show_promo)return this.requestPromo();if(Math.random()<this.interest_prob)return".interestbar";var t=this.organics[Math.floor(Math.random()*this.organics.length)];return{fullname:t}},r.spotlight._materialize=function(e){if(!e||e instanceof $||e.promise)return e;var t=$(".organic-listing"),n;_.isString(e)?n=e:e.campaign?n='[data-cid="'+e.campaign+'"]':n='[data-fullname="'+e.fullname+'"]';var i=t.find(n);if(i.length)return i;r.error("unable to locate spotlight item",n,e)},r.spotlight._advancePos=function(e){return(this.lineup.pos+e+this.lineup.length)%this.lineup.length},r.spotlight._materializePos=function(e){return this.lineup[e]=this._materialize(this.lineup[e])},r.spotlight._advance=function(e){var t=$(".organic-listing"),n=t.find(".nextprev"),r=t.find(".thing:visible"),i=this._advancePos(e),s=this._materializePos(i),o=setTimeout(function(){n.toggleClass("working",s.state&&s.state()=="pending")},200);this.lineup.pos=i;var u=$.when(s);u.always(_.bind(function(s){clearTimeout(o);if(this.lineup.pos!=i)return;if(u.state()=="rejected"||!s){if(this.lineup.length>1){this._advance(e||1);return}t.hide();return}n.removeClass("working"),t.removeClass("loading"),t.css("background-color",s.css("background-color")),r.hide(),s.show(),this.help(s),this.lineup.pos!=0&&(this._materializePos(this._advancePos(1)),this._materializePos(this._advancePos(-1)))},this))},r.spotlight.next=$.proxy(r.spotlight,"_advance",1),r.spotlight.prev=$.proxy(r.spotlight,"_advance",-1),r.spotlight.help=function(e){var t=$("#spotlight-help");if(!t.length)return;$(function(){t.data("HelpBubble").hide(function(){t.find(".help-section").hide(),e.hasClass("promoted")?t.find(".help-promoted").show():e.hasClass("interestbar")?t.find(".help-interestbar").show():t.find(".help-organic").show()})})},r.adzerk={origin:location.protocol=="https:"?"https://az.turbobytes.net":"http://static.adzerk.net",createSponsorshipAdFrame:function(){var e=$("<iframe>").attr({id:"ad_sponsorship",src:r.adzerk.origin+"/reddit/ads-load.html?bust2",frameBorder:0,scrolling:"no"});$(".side .sponsorshipbox").empty().append(e)}},$(window).on("message",function(e){e=e.originalEvent;if(e.origin!=r.adzerk.origin)return;msg=e.data.split(":"),msg[0]=="ados.createAdFrame"&&r.adzerk.createSponsorshipAdFrame()})}catch(err){r.sendError("Error running module","reddit-init.js",":",err)};r.i18n.setPluralForms('(n != 1)');