(function(){var require,requirejs,define,root={jQuery:window.jQuery},HULL_ENV="client";(function(){var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function n(e,n,r){var i,s,o,u,a,f,l,c,h,p,d,v=n&&n.split("/"),m=v,g=x.map,y=g&&g["*"];e&&e.charAt(0)==="."&&(n?(getOwn(x.pkgs,n)?m=v=[n]:m=v.slice(0,v.length-1),e=m.concat(e.split("/")),t(e),s=getOwn(x.pkgs,i=e[0]),e=e.join("/"),s&&e===i+"/"+s.main&&(e=i)):e.indexOf("./")===0&&(e=e.substring(2)));if(r&&g&&(v||y)){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(v)for(f=v.length;f>0;f-=1){o=getOwn(g,v.slice(0,f).join("/"));if(o){o=getOwn(o,l);if(o){c=o,h=a;break}}}if(c)break;!p&&y&&getOwn(y,l)&&(p=getOwn(y,l),d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=getOwn(x.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),w.require.undef(e),w.require([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a,f,l=null,c=t?t.name:null,h=e,p=!0,d="";return e||(p=!1,e="_@r"+(O+=1)),f=s(e),l=f[0],e=f[1],l&&(l=n(l,c,i),u=getOwn(L,l)),e&&(l?u&&u.normalize?d=u.normalize(e,function(e){return n(e,c,i)}):d=n(e,c,i):(d=n(e,c,i),f=s(d),l=f[0],d=f[1],r=!0,o=w.nameToUrl(d))),a=l&&!u&&!r?"_unnormalized"+(M+=1):"",{prefix:l,name:d,parentMap:t,unnormalized:!!a,url:o,originalName:h,isDefine:p,id:(l?l+"!"+d:d)+a}}function u(e){var t=e.id,n=getOwn(T,t);return n||(n=T[t]=new w.Module(e)),n}function a(e,t,n){var r=e.id,i=getOwn(T,r);hasProp(L,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(L[r]):(i=u(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function f(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(T,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(apsp.apply(k,[k.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function c(e){delete T[e],delete N[e]}function h(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(T,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,L[s]),e.check()):h(o,t,n))}),n[r]=!0)}function p(){var e,t,n,s,o=x.waitSeconds*1e3,u=o&&w.startTime+o<(new Date).getTime(),a=[],l=[],c=!1,d=!0;if(y)return;y=!0,eachProp(N,function(n){e=n.map,t=e.id;if(!n.enabled)return;e.isDefine||l.push(n);if(!n.error)if(!n.inited&&u)i(t)?(s=!0,c=!0):(a.push(t),r(t));else if(!n.inited&&n.fetched&&e.isDefine){c=!0;if(!e.prefix)return d=!1}});if(u&&a.length)return n=makeError("timeout","Load timeout for modules: "+a,null,a),n.contextName=w.contextName,f(n);d&&each(l,function(e){h(e,{},{})}),(!u||s)&&c&&(isBrowser||isWebWorker)&&!S&&(S=setTimeout(function(){S=0,p()},50)),y=!1}function d(e){hasProp(L,e[0])||u(o(e[0],null,!0)).init(e[1],e[2])}function v(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return v(t,w.onScriptLoad,"load","onreadystatechange"),v(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;l();while(k.length){e=k.shift();if(e[0]===null)return f(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));d(e)}}var y,b,w,E,S,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},T={},N={},C={},k=[],L={},A={},O=1,M=1;return E={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=L[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(x.pkgs,e.map.id);return t=n?getOwn(x.config,e.map.id+"/"+n.main):getOwn(x.config,e.map.id),t||{}},exports:L[e.map.id]}}},b=function(e){this.events=getOwn(C,e.id)||{},this.map=e,this.shim=getOwn(x.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;A[e]||(A[e]=!0,w.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,r=this.depExports,i=this.exports,s=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=w.execCb(n,s,r,i)}catch(o){e=o}else i=w.execCb(n,s,r,i);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?i=t.exports:i===undefined&&this.usingExports&&(i=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",f(this.error=e)}else i=s;this.exports=i,this.map.isDefine&&!this.ignore&&(L[n]=i,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),c(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,r=o(e.prefix);this.depMaps.push(r),a(r,"defined",bind(this,function(r){var i,s,l,h=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,d=w.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){r.normalize&&(h=r.normalize(h,function(e){return n(e,p,!0)})||""),s=o(e.prefix+"!"+h,this.map.parentMap),a(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),l=getOwn(T,s.id),l&&(this.depMaps.push(s),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(T,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&c(e.map.id)}),f(e)}),i.fromText=bind(this,function(n,r){var s=e.name,a=o(s),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),u(a),hasProp(x.config,t)&&(x.config[s]=x.config[t]);try{req.exec(n)}catch(c){return f(makeError("fromtexteval","fromText eval for "+t+" failed: "+c,c,[t]))}l&&(useInteractive=!0),this.depMaps.push(a),w.completeLoad(s),d([s],i)}),r.load(e.name,d,i,x)})),w.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){N[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if(typeof e=="string"){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(E,e.id);if(i){this.depExports[t]=i(this);return}this.depCount+=1,a(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&a(e,"error",bind(this,this.errback))}n=e.id,r=T[n],!hasProp(E,n)&&r&&!r.enabled&&w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(T,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},w={config:x,contextName:e,registry:T,defined:L,urlFetched:A,defQueue:k,Module:b,makeModuleMap:o,nextTick:req.nextTick,onError:f,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=x.pkgs,n=x.shim,r={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?t==="map"?(x.map||(x.map={}),mixin(x[t],e,!0,!0)):mixin(x[t],e,!0):x[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=w.makeShimExports(e)),n[t]=e}),x.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=t),eachProp(T,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function s(n,r,a){var l,c,h;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),typeof n=="string"?isFunction(r)?f(makeError("requireargs","Invalid require call"),a):t&&hasProp(E,n)?E[n](T[t.id]):req.get?req.get(w,n,t,s):(c=o(n,t,!1,!0),l=c.id,hasProp(L,l)?L[l]:f(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),w.nextTick(function(){g(),h=u(o(null,t)),h.skipMap=i.skipMap,h.init(n,r,a,{enabled:!0}),p()}),s)}return i=i||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),w.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(L,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(L,e)||hasProp(T,e)}}),t||(s.undef=function(e){l();var n=o(e,t,!0),i=getOwn(T,e);r(e),delete L[e],delete A[n.url],delete C[e],i&&(i.events.defined&&(C[e]=i.events),c(e))}),s},enable:function(e){var t=getOwn(T,e.id);t&&u(e).enable()},completeLoad:function(e){var t,n,r,s=getOwn(x.shim,e)||{},o=s.exports;l();while(k.length){n=k.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);d(n)}r=getOwn(T,e);if(!t&&!hasProp(L,e)&&r&&!r.inited){if(x.enforceDefine&&(!o||!getGlobal(o))){if(i(e))return;return f(makeError("nodefine","No define call for "+e,null,[e]))}d([e,s.deps||[],s.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,s,o,u,a,f,l,c;if(req.jsExtRegExp.test(e))l=e+(t||"");else{r=x.paths,i=x.pkgs,u=e.split("/");for(a=u.length;a>0;a-=1){f=u.slice(0,a).join("/"),s=getOwn(i,f),c=getOwn(r,f);if(c){isArray(c)&&(c=c[0]),u.splice(0,a,c);break}if(s){e===s.name?o=s.location+"/"+s.main:o=s.location,u.splice(0,a,o);break}}l=u.join("/"),l+=t||(/^data\:|\?/.test(l)||n?"":".js"),l=(l.charAt(0)==="/"||l.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+l}return x.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+x.urlArgs):l},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!i(t.id))return f(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={},s=n==null?x.identity:k(n);return T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),!function(e,t){var n=t.prototype.trim,r=t.prototype.trimRight,i=t.prototype.trimLeft,s=function(e){return e*1||0},o=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},u=[].slice,a=function(e){return e==null?"\\s":e.source?e.source:"["+p.escapeRegExp(e)+"]"},f={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},l={};for(var c in f)l[f[c]]=c;l["'"]="#39";var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=o,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var s=1,o=r.length,u="",a,f=[],l,c,p,d,v,m;for(l=0;l<o;l++){u=e(r[l]);if(u==="string")f.push(r[l]);else if(u==="array"){p=r[l];if(p[2]){a=i[s];for(c=0;c<p[2].length;c++){if(!a.hasOwnProperty(p[2][c]))throw new Error(h('[_.sprintf] property "%s" does not exist',p[2][c]));a=a[p[2][c]]}}else p[1]?a=i[p[1]]:a=i[s++];if(/[^s]/.test(p[8])&&e(a)!="number")throw new Error(h("[_.sprintf] expecting number but found %s",e(a)));switch(p[8]){case"b":a=a.toString(2);break;case"c":a=t.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=p[7]?a.toExponential(p[7]):a.toExponential();break;case"f":a=p[7]?parseFloat(a).toFixed(p[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=t(a))&&p[7]?a.substring(0,p[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(p[8])&&p[3]&&a>=0?"+"+a:a,v=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ",m=p[6]-t(a).length,d=p[6]?n(v,m):"",f.push(p[5]?a+d:d+a)}}return f.join("")},r.cache={},r.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.1",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return e==null?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=e==null?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return e==null?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return p.strip(e).replace(/\s+/g," ")},count:function(e,n){if(e==null||n==null)return 0;e=t(e),n=t(n);var r=0,i=0,s=n.length;for(;;){i=e.indexOf(n,i);if(i===-1)break;r++,i+=s}return r},chars:function(e){return e==null?[]:t(e).split("")},swapCase:function(e){return e==null?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return e==null?"":t(e).replace(/[&<>"']/g,function(e){return"&"+l[e]+";"})},unescapeHTML:function(e){return e==null?"":t(e).replace(/\&([^;]+);/g,function(e,n){var r;return n in f?f[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return e==null?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=p.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return p.splice(e,t,0,n)},include:function(e,n){return n===""?!0:e==null?!1:t(e).indexOf(n)!==-1},join:function(){var e=u.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null?[]:t(e).split("\n")},reverse:function(e){return p.chars(e).reverse().join("")},startsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return e==null?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return e==null?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return p.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return p.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return p.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return p.titleize(t(e).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(e){return p.capitalize(p.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return e==null?"":!r&&n?n.call(e):(r=a(r),t(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,n){return e==null?"":!n&&i?i.call(e):(n=a(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return e==null?"":!n&&r?r.call(e):(n=a(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,r){return e==null?"":(e=t(e),r=r||"...",n=~~n,e.length>n?e.slice(0,n)+r:e)},prune:function(e,n,r){if(e==null)return"";e=t(e),n=~~n,r=r!=null?t(r):"...";if(e.length<=n)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=p.rtrim(s.slice(0,s.length-1)),(s+r).length>e.length?e:e.slice(0,s.length)+r},words:function(e,t){return p.isBlank(e)?[]:p.trim(e,t).split(t||/\s+/)},pad:function(e,n,r,i){e=e==null?"":t(e),n=~~n;var s=0;r?r.length>1&&(r=r.charAt(0)):r=" ";switch(i){case"right":return s=n-e.length,e+o(r,s);case"both":return s=n-e.length,o(r,Math.ceil(s/2))+e+o(r,Math.floor(s/2));default:return s=n-e.length,o(r,s)+e}},lpad:function(e,t,n){return p.pad(e,t,n)},rpad:function(e,t,n){return p.pad(e,t,n,"right")},lrpad:function(e,t,n){return p.pad(e,t,n,"both")},sprintf:h,vsprintf:function(e,t){return t.unshift(e),h.apply(null,t)},toNumber:function(e,t){return e?(e=p.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?s(s(e).toFixed(~~t)):NaN):0},numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t),r=typeof r=="string"?r:",";var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strRightBack:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.lastIndexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strLeft:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(e==null)return"";e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),s=i.pop();return e.length>2&&r&&(n=p.rtrim(t)+n),i.length?i.join(t)+n+s:s},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,p.toSentence.apply(p,e)},slugify:function(e){if(e==null)return"";var n="Ä…Ã Ã¡Ã¤Ã¢Ã£Ã¥Ã¦Ä‡Ä™Ã¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®Å‚Å„Ã²Ã³Ã¶Ã´ÃµÃ¸Ã¹ÃºÃ¼Ã»Ã±Ã§Å¼Åº",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(a(n),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=n.indexOf(e);return r.charAt(t)||"-"}),p.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return p.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,n,r){if(e==null)return"";n=~~n;if(r==null)return o(t(e),n);for(var i=[];n>0;i[--n]=e);return i.join(r)},levenshtein:function(e,n){if(e==null&&n==null)return 0;if(e==null)return t(n).length;if(n==null)return t(e).length;e=t(e),n=t(n);var r=[],i,s;for(var o=0;o<=n.length;o++)for(var u=0;u<=e.length;u++)o&&u?e.charAt(u-1)===n.charAt(o-1)?s=i:s=Math.min(r[u],r[u-1],i)+1:s=o+u,i=r[u],r[u]=s;return r.pop()}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(module.exports=p),exports._s=p),typeof define=="function"&&define.amd&&define("underscore.string",[],function(){return p}),e._=e._||{},e._.string=e._.str=p}(this,String),define("string",function(){}),function(e){var t=function(e,n,r){return arguments.length===1?t.get(e):t.set(e,n,r)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(n,r,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(r===e?-1:i.expires),t._document.cookie=t._generateCookieString(n,r,i),t},t.expire=function(n,r){return t.set(n,e,r)},t._getExtendedOptions=function(n){return{path:n&&n.path||t.defaults.path,domain:n&&n.domain||t.defaults.domain,expires:n&&n.expires||t.defaults.expires,secure:n&&n.secure!==e?n.secure:t.defaults.secure}},t._isValidDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){n=n||new Date;switch(typeof e){case"number":e=new Date(n.getTime()+e*1e3);break;case"string":e=new Date(e)}if(e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=encodeURIComponent(e),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var r=e+"="+t;return r+=n.path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toGMTString():"",r+=n.secure?";secure":"",r},t._getCookieObjectFromString=function(n){var r={},i=n?n.split("; "):[];for(var s=0;s<i.length;s++){var o=t._getKeyValuePairFromCookieString(i[s]);r[o.key]===e&&(r[o.key]=o.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=t<0?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){return t._navigator.cookieEnabled||t.set("cookies.js",1).get("cookies.js")==="1"},t.enabled=t._areEnabled(),typeof define=="function"&&define.amd?define("cookie",[],function(){return t}):typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.Cookies=t):window.Cookies=t}(),function(e){typeof define=="function"&&define.amd?define("purl",e):window.purl=e()}(function(){function e(e,t){var n=decodeURI(e),r=v[t||!1?"strict":"loose"].exec(n),i={attr:{},param:{},seg:{}},o=14;while(o--)i.attr[p[o]]=r[o]||"";return i.param.query=s(i.attr.query),i.param.fragment=s(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}function t(e){var t=e.tagName;return typeof t!="undefined"?h[t.toLowerCase()]:t}function n(e,t){if(e[t].length===0)return e[t]={};var n={};for(var r in e[t])n[r]=e[t][r];return e[t]=n,n}function r(e,t,i,s){var o=e.shift();if(!o)f(t[i])?t[i].push(s):"object"==typeof t[i]?t[i]=s:"undefined"==typeof t[i]?t[i]=s:t[i]=[t[i],s];else{var u=t[i]=t[i]||[];"]"==o?f(u)?""!==s&&u.push(s):"object"==typeof u?u[l(u).length]=s:u=t[i]=[t[i],s]:~o.indexOf("]")?(o=o.substr(0,o.length-1),!m.test(o)&&f(u)&&(u=n(t,i)),r(e,u,o,s)):(!m.test(o)&&f(u)&&(u=n(t,i)),r(e,u,o,s))}}function i(e,t,n){if(~t.indexOf("]")){var i=t.split("[");r(i,e,"base",n)}else{if(!m.test(t)&&f(e.base)){var s={};for(var u in e.base)s[u]=e.base[u];e.base=s}t!==""&&o(e.base,t,n)}return e}function s(e){return a(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(n){}var r=t.indexOf("="),s=u(t),o=t.substr(0,s||r),a=t.substr(s||r,t.length);return a=a.substr(a.indexOf("=")+1,a.length),o===""&&(o=t,a=""),i(e,o,a)},{base:{}}).base}function o(e,t,n){var r=e[t];typeof r=="undefined"?e[t]=n:f(r)?r.push(n):e[t]=[r,n]}function u(e){var t=e.length,n,r;for(var i=0;i<t;++i){r=e[i],"]"==r&&(n=!1),"["==r&&(n=!0);if("="==r&&!n)return i}}function a(e,t){var n=0,r=e.length>>0,i=arguments[2];while(n<r)n in e&&(i=t.call(undefined,i,e[n],n,e)),++n;return i}function f(e){return Object.prototype.toString.call(e)==="[object Array]"}function l(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function c(t,n){return arguments.length===1&&t===!0&&(n=!0,t=undefined),n=n||!1,t=t||window.location.toString(),{data:e(t,n),attr:function(e){return e=d[e]||e,typeof e!="undefined"?this.data.attr[e]:this.data.attr},param:function(e){return typeof e!="undefined"?this.data.param.query[e]:this.data.param.query},fparam:function(e){return typeof e!="undefined"?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return typeof e=="undefined"?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return typeof e=="undefined"?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var h={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},p=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],d={anchor:"fragment"},v={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/^[0-9]+$/;return c.jQuery=function(e){e!=null&&(e.fn.url=function(n){var r="";return this.length&&(r=e(this).attr(t(this[0]))||""),c(r,n)},e.url=c)},c.jQuery(window.jQuery),c}),function(){var e=typeof window!="undefined"?window:exports,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(e){return e}}();e.btoa||(e.btoa=function(e){for(var r,i,s=0,o=t,u="";e.charAt(s|0)||(o="=",s%1);u+=o.charAt(63&r>>8-s%1*8)){i=e.charCodeAt(s+=.75);if(i>255)throw n;r=r<<8|i}return u}),e.atob||(e.atob=function(e){e=e.replace(/=+$/,"");if(e.length%4==1)throw n;for(var r=0,i,s,o=0,u="";s=e.charAt(o++);~s&&(i=r%4?i*64+s:s,r++%4)?u+=String.fromCharCode(255&i>>(-2*r&6)):0)s=t.indexOf(s);return u})}(),define("base64",function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="0.9.9";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t,n){var r,i=-1,s=t.length;switch(n.length){case 0:while(++i<s)(r=t[i]).callback.call(r.ctx);return;case 1:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0]);return;case 2:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0],n[1]);return;case 3:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0],n[1],n[2]);return;default:while(++i<s)(r=t[i]).callback.apply(r.ctx,n)}},c=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,l=o.length;a<l;a++){e=o[a];if(r=this._events[e]){s=[];if(t||n)for(c=0,h=r.length;c<h;c++)i=r[c],(t&&t!==(i.callback._callback||i.callback)||n&&n!==i.context)&&s.push(i);this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(this,n,t),r&&l(this,r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,n||this,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,n,this),!t&&!n&&delete r[e._listenerId];else{for(var i in r)r[i].off(null,null,this);this._listeners={}}return this}};c.bind=c.on,c.unbind=c.off,u.extend(o,c);var h=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.changed={},this.attributes={},this._changes=[],t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r)),(n=u.result(this,"defaults"))&&u.defaults(r,n),this.set(r,{silent:!0}),this._currentAttributes=u.clone(this.attributes),this._previousAttributes=u.clone(this.attributes),this.initialize.apply(this,arguments)};u.extend(h.prototype,c,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i;if(e==null)return this;u.isObject(e)?(i=e,n=t):(i={})[e]=t;var s=n&&n.silent,o=n&&n.unset;if(!this._validate(i,n))return!1;this.idAttribute in i&&(this.id=i[this.idAttribute]);var a=this.attributes;for(r in i)t=i[r],o?delete a[r]:a[r]=t,this._changes.push(r,t);return this._hasComputed=!1,s||this.change(n),this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r),e))return!1;n&&n(t,r,e)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s;e==null||u.isObject(e)?(r=e,n=t):e!=null&&((r={})[e]=t),n=n?u.clone(n):{};if(n.wait){if(r&&!this._validate(r,n))return!1;i=u.clone(this.attributes)}var o=u.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?o:n))return!1;if(!r&&!this._validate(null,n))return!1;var a=this,f=n.success;n.success=function(e,t,i){s=!0;var o=a.parse(e);n.wait&&(o=u.extend(r||{},o));if(!a.set(o,n))return!1;f&&f(a,e,n)};var l=this.isNew()?"create":n.patch?"patch":"update";l=="patch"&&(n.attrs=r);var c=this.sync(l,this,n);return!s&&n.wait&&(this.clear(o),this.set(i,o)),c},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e)};if(this.isNew())return e.success(),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||M();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){var t=this._changing;this._changing=!0;var n=this._computeChanges(!0);this._pending=!!n.length;for(var r=n.length-2;r>=0;r-=2)this.trigger("change:"+n[r],this,n[r+1],e);if(t)return this;while(this._pending)this._pending=!1,this.trigger("change",this,e),this._previousAttributes=u.clone(this.attributes);return this._changing=!1,this},hasChanged:function(e){return this._hasComputed||this._computeChanges(),e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},_computeChanges:function(e){this.changed={};var t={},n=[],r=this._currentAttributes,i=this._changes;for(var s=i.length-2;s>=0;s-=2){var o=i[s],u=i[s+1];if(t[o])continue;t[o]=!0;if(r[o]!==u){this.changed[o]=u;if(!e)continue;n.push(o,u),r[o]=u}}return e&&(this._changes=[]),this._hasComputed=!0,n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},_validate:function(e,t){if(!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var p=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(p.prototype,c,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){var n,i,o,a,f,l,c=t&&t.at,h=(t&&t.sort)==null?!0:t.sort;e=u.isArray(e)?e.slice():[e];for(n=e.length-1;n>=0;n--){if(!(a=this._prepareModel(e[n],t))){this.trigger("error",this,e[n],t),e.splice(n,1);continue}e[n]=a,f=a.id!=null&&this._byId[a.id];if(f||this._byCid[a.cid]){t&&t.merge&&f&&(f.set(a.attributes,t),l=h),e.splice(n,1);continue}a.on("all",this._onModelEvent,this),this._byCid[a.cid]=a,a.id!=null&&(this._byId[a.id]=a)}e.length&&(l=h),this.length+=e.length,i=[c!=null?c:this.models.length,0],r.apply(i,e),s.apply(this.models,i),l&&this.comparator&&c==null&&this.sort({silent:!0});if(t&&t.silent)return this;while(a=e.shift())a.trigger("add",a,this,t);return this},remove:function(e,t){var n,r,i,s;t||(t={}),e=u.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byCid[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]||this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),(!e||!e.silent)&&this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){var n,r,i,s,o=[],a=[],f={},l=this.model.prototype.idAttribute;t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e)),u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;r<i;r++)n=e[r],s=this.get(n.id||n.cid||n[l]),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove)for(r=0,i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n);return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){var o=e.update?"update":"reset";t[o](r,e),n&&n(t,r,e)},this.sync("read",this,e)},create:function(e,t){var n=this;t=t?u.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return u(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var v=["groupBy","countBy","sortBy"];u.each(v,function(e){p.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var m=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,y=/:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(m.prototype,c,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),o.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(g,"(?:$1)?").replace(y,"([^/]+)").replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var E=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,N=/\/$/;E.started=!1,u.extend(E.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(N,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!E.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new E;var C=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];u.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o.$(r).attr(t),n!=null&&o.$(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(k),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.bind(i,n):this.$el.delegate(s,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,L)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className")),this.setElement(this.make(u.result(this,"tagName"),e),!1)}else this.setElement(u.result(this,"el"),!1)}});var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=A[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||M()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e,r,i){a&&a(e,r,i),t.trigger("sync",t,e,n)};var f=n.error;n.error=function(e,r,i){f&&f(t,e,n),t.trigger("error",t,e,n)};var l=o.ajax(u.extend(i,n));return t.trigger("request",t,l,n),l},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var O=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};h.extend=p.extend=m.extend=C.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define("domready",t):this[e]=t()}("domready",function(e){function t(e){p=1;while(e=n.shift())e()}var n=[],r,i=!1,s=document,o=s.documentElement,u=o.doScroll,a="DOMContentLoaded",f="addEventListener",l="onreadystatechange",c="readyState",h=u?/^loaded|^c/:/^loaded|c/,p=h.test(s[c]);return s[f]&&s[f](a,r=function(){s.removeEventListener(a,r,i),t()},i),u&&s.attachEvent(l,r=function(){/^c/.test(s[c])&&(s.detachEvent(l,r),t())}),e=u?function(t){self!=top?p?t():n.push(t):function(){try{o.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){p?e():n.push(e)}}),define("aura/ext/debug",[],function(){return{name:"debug",initialize:function(e){typeof window.attachDebugger=="function"&&(e.logger.log("Attaching debugger ..."),window.attachDebugger(e))}}}),!function(e,t){function n(){this._events={},this._conf&&r.call(this,this._conf)}function r(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function i(e){this._events={},this.newListener=!1,r.call(this,e)}function s(e,t,n,r){if(!n)return[];var i=[],o,u,a,f,l,c,h,p=t.length,d=t[r],v=t[r+1];if(r===p&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),[n];for(o=0,u=n._listeners.length;o<u;o++)e&&e.push(n._listeners[o]);return[n]}if(d==="*"||d==="**"||n[d]){if(d==="*"){for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(i=i.concat(s(e,t,n[a],r+1)));return i}if(d==="**"){h=r+1===p||r+2===p&&v==="*",h&&n._listeners&&(i=i.concat(s(e,t,n,p)));for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(a==="*"||a==="**"?(n[a]._listeners&&!h&&(i=i.concat(s(e,t,n[a],p))),i=i.concat(s(e,t,n[a],r))):a===v?i=i.concat(s(e,t,n[a],r+2)):i=i.concat(s(e,t,n[a],r)));return i}i=i.concat(s(e,t,n[d],r+1))}f=n["*"],f&&s(e,t,f,r+1),l=n["**"];if(l)if(r<p){l._listeners&&s(e,t,l,p);for(a in l)a!=="_listeners"&&l.hasOwnProperty(a)&&(a===v?s(e,t,l[a],r+2):a===d?s(e,t,l[a],r+1):(c={},c[a]=l[a],s(e,t,{"**":c},r+1)))}else l._listeners?s(e,t,l,p):l["*"]&&l["*"]._listeners&&s(e,t,l["*"],p);return i}function o(e,t){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if(e[n]==="**"&&e[n+1]==="**")return;var i=this.listenerTree,s=e.shift();while(s){i[s]||(i[s]={}),i=i[s];if(e.length===0){if(!i._listeners)i._listeners=t;else if(typeof i._listeners=="function")i._listeners=[i._listeners,t];else if(u(i._listeners)){i._listeners.push(t);if(!i._listeners.warned){var o=a;typeof this._events.maxListeners!="undefined"&&(o=this._events.maxListeners),o>0&&i._listeners.length>o&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}return!0}s=e.shift()}return!0}var u=Array.isArray?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},a=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(e){this._events||n.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},i.prototype.event="",i.prototype.once=function(e,t){return this.many(e,1,t),this},i.prototype.many=function(e,t,n){function r(){--t===0&&i.off(e,r),n.apply(this,arguments)}var i=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return r._origin=n,this.on(e,r),i},i.prototype.emit=function(){this._events||n.call(this);var e=arguments[0];if(e==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,r=new Array(t-1);for(var i=1;i<t;i++)r[i-1]=arguments[i];for(i=0,t=this._all.length;i<t;i++)this.event=e,this._all[i].apply(this,r)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var u=typeof e=="string"?e.split(this.delimiter):e.slice();s.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if(typeof o=="function"){this.event=e;if(arguments.length===1)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,r=new Array(t-1);for(var i=1;i<t;i++)r[i-1]=arguments[i];o.apply(this,r)}return!0}if(o){var t=arguments.length,r=new Array(t-1);for(var i=1;i<t;i++)r[i-1]=arguments[i];var a=o.slice();for(var i=0,t=a.length;i<t;i++)this.event=e,a[i].apply(this,r);return a.length>0||this._all}return this._all},i.prototype.on=function(e,t){if(typeof e=="function")return this.onAny(e),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||n.call(this),this.emit("newListener",e,t);if(this.wildcard)return o.call(this,e,t),this;if(!this._events[e])this._events[e]=t;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],t];else if(u(this._events[e])){this._events[e].push(t);if(!this._events[e].warned){var r=a;typeof this._events.maxListeners!="undefined"&&(r=this._events.maxListeners),r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},i.prototype.onAny=function(e){this._all||(this._all=[]);if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all.push(e),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i=typeof e=="string"?e.split(this.delimiter):e.slice();r=s.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var a=r[o];n=a._listeners;if(u(n)){var f=-1;for(var l=0,c=n.length;l<c;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){f=l;break}if(f<0)continue;return this.wildcard?a._listeners.splice(f,1):this._events[e].splice(f,1),n.length===0&&(this.wildcard?delete a._listeners:delete this._events[e]),this}if(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)this.wildcard?delete a._listeners:delete this._events[e]}return this},i.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||n.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),r=s.call(this,null,t,this.listenerTree,0);for(var i=0;i<r.length;i++){var o=r[i];o._listeners=null}}else{if(!this._events[e])return this;this._events[e]=null}return this},i.prototype.listeners=function(e){if(this.wildcard){var t=[],r=typeof e=="string"?e.split(this.delimiter):e.slice();return s.call(this,t,r,this.listenerTree,0),t}return this._events||n.call(this),this._events[e]||(this._events[e]=[]),u(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},i.prototype.listenersAny=function(){return this._all?this._all:[]},typeof define=="function"&&define.amd?define("eventemitter",[],function(){return i}):e.EventEmitter2=i}(typeof process!="undefined"&&typeof process.title!="undefined"&&typeof exports!="undefined"?exports:window),define("aura/ext/mediator",["eventemitter","underscore"],function(e,t){return{name:"mediator",initialize:function(n){n.config.mediator=t.defaults(n.config.mediator||{},{wildcard:!0,delimiter:".",newListener:!0,maxListeners:20});var r=n.config.mediatorInstance||new e(n.config.mediator);n.core.mediator=r;var i=function(e){return function(i,s,o){if(!t.isFunction(s)||!t.isString(i))throw new Error("Invalid arguments passed to sandbox."+e);o=o||this;var u=function(){var e=Array.prototype.slice.call(arguments);try{s.apply(o,e)}catch(t){n.logger.error("Error caught in listener '"+i+"', called with arguments: ",e,"\nError:",t.message,t,e)}};this._events=this._events||[],this._events.push({name:i,listener:s,callback:u}),r[e](i,u)}};n.sandbox.on=i("on"),n.sandbox.once=i("once"),n.sandbox.off=function(e,n){if(!this._events)return;this._events=t.reject(this._events,function(t){var i=t.name===e&&t.listener===n;return i&&r.off(e,t.callback),i})},n.sandbox.emit=function(){var e=n.config.debug;if(e.enable&&(e.components.length===0||e.components.indexOf("aura:mediator")!==-1)){var t=Array.prototype.slice.call(arguments);t.unshift("Event emitted"),n.logger.log.apply(n.logger,t)}r.emit.apply(r,arguments)},n.sandbox.stopListening=function(){if(!this._events)return;t.each(this._events,function(e){r.off(e.name,e.callback)})};var s=["aura","sandbox","stop"].join(n.config.mediator.delimiter);n.core.mediator.on(s,function(e){e.stopListening()})}}}),define("aura/ext/components",[],function(){return function(e){function t(e,t,n,r){var i=d[e+":"+t]||[],s=[];l(i,function(e,t){typeof e=="function"&&s.push(e.apply(n,r))});var o=h(c.apply(undefined,s));return o}function n(n,r){var i,s;if(typeof n=="string")s=n,n=r[s]||function(){};else{if(typeof n.name!="string")throw new Error("Error invoking Component with callbacks: ",r.options.name,". first argument should be either the name of a function or of the form : { name: 'fnName', fn: function() { ... } } ");s=n.name,n=n.fn||function(){}}var o=u.data.deferred(),a,f,l=[].slice.call(arguments,2);return a=t("before",s,r,l),a.then(function(){var e=u.data.deferred();try{return i=n.apply(r,l),e.resolve(i)}catch(t){return e.reject(t)}}).then(function(e){t("after",s,r,l).then(function(){o.resolve(e)},o.reject)}).fail(function(t){e.logger.error("Error in Component "+r.options.name+" "+s+" callback",t),o.reject(t)}),h(o)}function r(e){var t=a.clone(e);return this.options=a.defaults(t||{},this.options||{}),this._ref=t._ref,this.$el=f(t.el),this.invokeWithCallbacks("initialize",this.options),this}function i(e,t,n){var r=function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})},i=a.clone(n||{});i.el=e,i.require={};var o,f=u.dom.data(e);return l(f,function(e,n){n=n.replace(new RegExp("^"+t+"(-)?"),""),n=r(n),n=n.charAt(0).toLowerCase()+n.slice(1),n!=="component"&&n!=="widget"?i[n]=e:o=e}),s(o,i)}function s(t,n){var r=t.split("@"),i=u.util.decamelize(r[0]),s=r[1]||"default",o=require.s.contexts._,a=e.config.sources[s]||"./aura_components";return n.name=i,n.ref="__component__$"+i+"@"+s,n.baseUrl=a+"/"+i,n.require=n.require||{},n.require.packages=n.require.packages||[],n.require.packages.push({name:n.ref,location:a+"/"+i}),n}var o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u=e.core,a=u.util._,f=u.dom.find,l=u.util.each,c=u.data.when,h=u.data.promise;u.Components=u.Components||{};var p={},d={};r.prototype.initialize=function(){},r.prototype.html=function(e){var t=this.$el;t.html(e);var n=this;return a.defer(function(){n.sandbox.start(t,{reset:!0})}),this},r.prototype.$find=function(e){return f(e,this.$el)},r.prototype.invokeWithCallbacks=function(e){return n.apply(undefined,[e,this].concat([].slice.call(arguments,1)))};var v=function(e,t){var n=this,r;e&&o(e,"constructor")?r=e.constructor:r=function(){n.apply(this,arguments)},u.util.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.util.extend(r.prototype,e),r.__super__=n.prototype,r};return r.extend=v,r.load=function(t,n){var i=u.data.deferred(),s=n.ref,o,f,l=n.el;n._ref=u.util._.uniqueId(s+"+");var d=a.clone(n);return e.logger.log("Start loading component:",t),i.fail(function(n){e.logger.error("Error loading component:",t,n)}),require.config(d.require),require([s],function(o){if(!o)return i.reject("component "+s+" Definition is empty !");try{if(p[s])f=p[s];else{o.type?f=u.Components[o.type]:f=r;if(!f)throw new Error("Can't find component of type '"+o.type+"', did you forget to include the extension that provides it ?");u.util._.isObject(o)&&(f=p[s]=f.extend(o))}var a=e.sandboxes.create(n._ref,{el:l});a.logger.setName("Component '"+t+"'("+a.logger.name+")");var h={sandbox:a};typeof o=="function"&&(h.initialize=o),f=f.extend(h);var v=new f(d);u.dom.data(v.$el,"__sandbox_ref__",a.ref);var m=c(v);return m.then(function(e){i.resolve(e)}),m.fail(function(e){i.reject(e)}),m}catch(g){e.logger.error(g.message),i.reject(g)}},function(e){i.reject(e)}),h(i)},r.parseList=function(t){var n=[];if(a.isArray(t)&&!a.some(t,a.isElement))a.map(t,function(e){var t=s(e.name,e.options);n.push({name:e.name,options:t})});else if(t&&f(t)){var r=e.config.namespace,o=["[data-aura-component]","[data-aura-widget]"];r&&(o.push("[data-"+r+"-component]"),o.push("[data-"+r+"-widget]")),o=o.join(","),l(f(o,t||"body"),function(e){var t="aura";r&&(u.dom.data(e,r+"-component")||u.dom.data(e,r+"-widget"))&&(t=r);var s=i(e,t);n.push({name:s.name,options:s})})}return n},r.startAll=function(e){var t=r.parseList(e),n=[];u.util.each(t,function(e,t){var i=r.load(e.name,e.options);n.push(i)});var i=c.apply(undefined,n);return h(i)},{name:"components",require:{paths:{text:"bower_components/requirejs-text/text"}},initialize:function(e){function t(e,t){d[e]=d[e]||[],d[e].push(t)}u.Components.Base=r,e.components.before=function(e,n){var r="before:"+e;t(r,n)},e.components.after=function(e,n){var r="after:"+e;t(r,n)},e.components.addType=function(e,t){if(u.Components[e])throw new Error("Component type "+e+" already defined");u.Components[e]=r.extend(t)},e.sandbox.start=function(t,n){var i=["aura","sandbox","start"].join(e.config.mediator.delimiter);u.mediator.emit(i,this);var s=this._children||[];n&&n.reset&&(a.invoke(this._children||[],"stop"),s=[]);var o=this;return r.startAll(t).done(function(){var e=a.compact(Array.prototype.slice.call(arguments)||[]);u.util.each(e,function(e){e.sandbox._component=e,e.sandbox._parent=o,s.push(e.sandbox)}),o._children=s}),this}},afterAppStart:function(e){if(e.config.components!==!1&&e.startOptions.components!==!1){var t;a.isArray(e.startOptions.components)?t=f("body"):t=f(e.startOptions.components),u.appSandbox=e.sandboxes.create(e.ref,{el:t}),u.appSandbox.start(e.startOptions.components)}}}}}),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("promises",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function e(e){return function(){return J.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return nt(e)==="[object StopIteration]"||e instanceof rt}function r(e,t){if(U&&t.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(st)===-1){var n=[];for(var r=t;!!r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var s=n.join("\n"+st+"\n");e.stack=i(s)}}function i(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!u(i)&&!s(i)&&i&&n.push(i)}return n.join("\n")}function s(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function u(e){var t=o(e);if(!t)return!1;var n=t[0],r=t[1];return n===X&&r>=W&&r<=lt}function a(){if(!U)return;try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=o(n);if(!r)return;return X=r[0],r[1]}}function f(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function l(e){return g(e)?e:y(e)?A(e):L(e)}function c(){function e(e){r=e,s.source=e,Q(t,function(t,n){$(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=Z(c.prototype),s=Z(d.prototype);s.promiseDispatch=function(e,i,s){var o=K(arguments);t?(t.push(o),i==="when"&&s[1]&&n.push(s[1])):$(function(){r.promiseDispatch.apply(r,o)})},s.valueOf=f(function(){if(t)return s;var e=m(r);return g(e)&&(r=e),e},"valueOf","inspect"),s.inspect=function(){return r?r.inspect():{state:"pending"}};if(l.longStackSupport&&U)try{throw new Error}catch(o){s.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return i.promise=s,i.resolve=function(t){if(r)return;e(l(t))},i.fulfill=function(t){if(r)return;e(L(t))},i.reject=function(t){if(r)return;e(k(t))},i.notify=function(e){if(r)return;Q(n,function(t,n){$(function(){n(e)})},void 0)},i}function h(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=c();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function p(e){return h(function(t,n){for(var r=0,i=e.length;r<i;r++)l(e[r]).then(t,n)})}function d(e,t,n){t===void 0&&(t=function(e){return k(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=Z(d.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=k(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=f(function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value})}return r}function v(e,t,n,r){return l(e).then(t,n,r)}function m(e){if(g(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function g(e){return t(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function y(e){return t(e)&&typeof e.then=="function"}function b(e){return g(e)&&e.inspect().state==="pending"}function w(e){return!g(e)||e.inspect().state==="fulfilled"}function E(e){return g(e)&&e.inspect().state==="rejected"}function S(){!at&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",ot),at=!0}function x(){for(var e=0;e<ot.length;e++){var t=ot[e];console.warn("Unhandled rejection reason:",t)}}function T(){ot.length=0,ut.length=0,at=!1,ft||(ft=!0,typeof process!="undefined"&&process.on&&process.on("exit",x))}function N(e,t){if(!ft)return;ut.push(e),t&&typeof t.stack!="undefined"?ot.push(t.stack):ot.push("(no stack) "+t),S()}function C(e){if(!ft)return;var t=G(ut,e);t!==-1&&(ut.splice(t,1),ot.splice(t,1))}function k(e){var t=d({when:function(t){return t&&C(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return N(t,e),t}function L(e){return d({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return tt(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function A(e){var t=c();return $(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function O(e){return d({isDef:function(){}},function(t,n){return B(e,t,n)},function(){return l(e).inspect()})}function M(e,t,n){return l(e).spread(t,n)}function _(e){return function(){function t(e,t){var o;if(it){try{o=r[e](t)}catch(u){return k(u)}return o.done?o.value:v(o.value,i,s)}try{o=r[e](t)}catch(u){return n(u)?u.value:k(u)}return v(o,i,s)}var r=e.apply(this,arguments),i=t.bind(t,"next"),s=t.bind(t,"throw");return i()}}function D(e){l.done(l.async(e)())}function P(e){throw new rt(e)}function H(e){return function(){return M([this,j(arguments)],function(t,n){return e.apply(t,n)})}}function B(e,t,n){return l(e).dispatch(t,n)}function j(e){return v(e,function(e){var t=0,n=c();return Q(e,function(r,i,s){var o;g(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,v(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function F(e){return v(e,function(e){return e=Y(e,l),v(j(Y(e,function(e){return v(e,V,V)})),function(){return e})})}function I(e){return l(e).allSettled()}function q(e,t){return l(e).then(void 0,void 0,t)}function R(e,t){return l(e).nodeify(t)}var U=!1;try{throw new Error}catch(z){U=!!z.stack}var W=a(),X,V=function(){},$=function(){function e(){while(t.next){t=t.next;var n=t.task;t.task=void 0;var i=t.domain;i&&(t.domain=void 0,i.enter());try{n()}catch(o){if(s)throw i&&i.exit(),setTimeout(e,0),i&&i.enter(),o;setTimeout(function(){throw o},0)}i&&i.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,i=void 0,s=!1;$=function(e){n=n.next={task:e,domain:s&&process.domain,next:null},r||(r=!0,i())};if(typeof process!="undefined"&&process.nextTick)s=!0,i=function(){process.nextTick(e)};else if(typeof setImmediate=="function")typeof window!="undefined"?i=setImmediate.bind(window,e):i=function(){setImmediate(e)};else if(typeof MessageChannel!="undefined"){var o=new MessageChannel;o.port1.onmessage=function(){i=u,o.port1.onmessage=e,e()};var u=function(){o.port2.postMessage(0)};i=function(){setTimeout(e,0),u()}}else i=function(){setTimeout(e,0)};return $}(),J=Function.call,K=e(Array.prototype.slice),Q=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),G=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Y=e(Array.prototype.map||function(e,t){var n=this,r=[];return Q(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},et=e(Object.prototype.hasOwnProperty),tt=Object.keys||function(e){var t=[];for(var n in e)et(e,n)&&t.push(n);return t},nt=e(Object.prototype.toString),rt;typeof ReturnValue!="undefined"?rt=ReturnValue:rt=function(e){this.value=e};var it;try{new Function("(function* (){ yield 1; })"),it=!0}catch(z){it=!1}var st="From previous event:";l.resolve=l,l.nextTick=$,l.longStackSupport=!1,l.defer=c,c.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(K(arguments,1)):e.resolve(n)}},l.promise=h,l.passByCopy=function(e){return e},d.prototype.passByCopy=function(){return this},l.join=function(e,t){return l(e).join(t)},d.prototype.join=function(e){return l([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},l.race=p,d.prototype.race=function(){return this.then(l.race)},l.makePromise=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(e,t,n){function i(t){try{return typeof e=="function"?e(t):t}catch(n){return k(n)}}function s(e){if(typeof t=="function"){r(e,u);try{return t(e)}catch(n){return k(n)}}return k(e)}function o(e){return typeof n=="function"?n(e):e}var u=this,a=c(),f=!1;return $(function(){u.promiseDispatch(function(e){if(f)return;f=!0,a.resolve(i(e))},"when",[function(e){if(f)return;f=!0,a.resolve(s(e))}])}),u.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=o(e)}catch(r){n=!0;if(!l.onerror)throw r;l.onerror(r)}n||a.notify(t)}]),a.promise},l.when=v,d.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,t){return l(e).thenResolve(t)},d.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,t){return l(e).thenReject(t)},l.nearer=m,l.isPromise=g,l.isPromiseAlike=y,l.isPending=b,d.prototype.isPending=function(){return this.inspect().state==="pending"},l.isFulfilled=w,d.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},l.isRejected=E,d.prototype.isRejected=function(){return this.inspect().state==="rejected"};var ot=[],ut=[],at=!1,ft=!0;l.resetUnhandledRejections=T,l.getUnhandledReasons=function(){return ot.slice()},l.stopUnhandledRejectionTracking=function(){T(),typeof process!="undefined"&&process.on&&process.removeListener("exit",x),ft=!1},T(),l.reject=k,l.fulfill=L,l.master=O,l.spread=M,d.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},l.async=_,l.spawn=D,l["return"]=P,l.promised=H,l.dispatch=B,d.prototype.dispatch=function(e,t){var n=this,r=c();return $(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},l.get=function(e,t){return l(e).dispatch("get",[t])},d.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,t,n){return l(e).dispatch("set",[t,n])},d.prototype.set=function(e,t){return this.dispatch("set",[e,t])},l.del=l["delete"]=function(e,t){return l(e).dispatch("delete",[t])},d.prototype.del=d.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,t,n){return l(e).dispatch("post",[t,n])},d.prototype.mapply=d.prototype.post=function(e,t){return this.dispatch("post",[e,t])},l.send=l.mcall=l.invoke=function(e,t){return l(e).dispatch("post",[t,K(arguments,2)])},d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(e){return this.dispatch("post",[e,K(arguments,1)])},l.fapply=function(e,t){return l(e).dispatch("apply",[void 0,t])},d.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,K(arguments,1)])},d.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},l.fbind=function(e){var t=l(e),n=K(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(K(arguments))])}},d.prototype.fbind=function(){var e=this,t=K(arguments);return function(){return e.dispatch("apply",[this,t.concat(K(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},d.prototype.keys=function(){return this.dispatch("keys",[])},l.all=j,d.prototype.all=function(){return j(this)},l.allResolved=f(F,"allResolved","allSettled"),d.prototype.allResolved=function(){return F(this)},l.allSettled=I,d.prototype.allSettled=function(){return this.then(function(e){return j(Y(e,function(e){function t(){return e.inspect()}return e=l(e),e.then(t,t)}))})},l.fail=l["catch"]=function(e,t){return l(e).then(void 0,t)},d.prototype.fail=d.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=q,d.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,t){return l(e)["finally"](t)},d.prototype.fin=d.prototype["finally"]=function(e){return e=l(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},l.done=function(e,t,n,r){return l(e).done(t,n,r)},d.prototype.done=function(e,t,n){var i=function(e){$(function(){r(e,s);if(!l.onerror)throw e;l.onerror(e)})},s=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(i=process.domain.bind(i)),s.then(void 0,i)},l.timeout=function(e,t,n){return l(e).timeout(t,n)},d.prototype.timeout=function(e,t){var n=c(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},l.delay=function(e,t){return t===void 0&&(t=e,e=void 0),l(e).delay(t)},d.prototype.delay=function(e){return this.then(function(t){var n=c();return setTimeout(function(){n.resolve(t)},e),n.promise})},l.nfapply=function(e,t){return l(e).nfapply(t)},d.prototype.nfapply=function(e){var t=c(),n=K(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},l.nfcall=function(e){var t=K(arguments,1);return l(e).nfapply(t)},d.prototype.nfcall=function(){var e=K(arguments),t=c();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},l.nfbind=l.denodeify=function(e){var t=K(arguments,1);return function(){var n=t.concat(K(arguments)),r=c();return n.push(r.makeNodeResolver()),l(e).fapply(n).fail(r.reject),r.promise}},d.prototype.nfbind=d.prototype.denodeify=function(){var e=K(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,t){var n=K(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(K(arguments)),s=c();return i.push(s.makeNodeResolver()),l(r).fapply(i).fail(s.reject),s.promise}},d.prototype.nbind=function(){var e=K(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,t,n){return l(e).npost(t,n)},d.prototype.nmapply=d.prototype.npost=function(e,t){var n=K(t||[]),r=c();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(e,t){var n=K(arguments,2),r=c();return n.push(r.makeNodeResolver()),l(e).dispatch("post",[t,n]).fail(r.reject),r.promise},d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(e){var t=K(arguments,1),n=c();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},l.nodeify=R,d.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){$(function(){e(null,t)})},function(t){$(function(){e(t)})})};var lt=a();return l}),function(){define("lib/utils/promises",["promises"],function(e){return{deferred:e.defer,when:e.when,all:e.all}})}.call(this),define("aura/platform",[],function(){typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,Array.prototype.concat.apply(n,arguments))}}),Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t})}),function(){window.jQuery?define("jquery",[],function(){return window.jQuery}):require.config({paths:{jquery:"bower_components/jquery/jquery"},shim:{jquery:{exports:"$"}}}),window._?define("underscore",[],function(){return window._}):require.config({paths:{underscore:"bower_components/underscore/underscore"},shim:{underscore:{exports:"_"}}}),define("aura/base",["module","underscore","jquery","./platform"],function(e,t,n,r){require.s.contexts._.config.paths.aura||require.config({paths:{aura:e.id.replace(/base$/,"")}});var i={};return i.dom={find:function(e,t){return t?n(t).find(e):n(e)},data:function(e,t,r){return r===undefined?n(e).data(t):n(e).data(t,r)}},i.data={ajax:n.ajax,deferred:n.Deferred,when:function(){return t.isArray(arguments[0])?n.when.call(undefined,arguments[0]):n.when.apply(undefined,[].slice.call(arguments))},promise:function(e){return t.isFunction(e.promise)?e.promise():e.promise}},i.util={each:t.each,extend:t.extend,uniq:t.uniq,_:t,decamelize:function(e,t){return t=t===undefined?"_":t,e.replace(/([A-Z])/g,t+"$1").toLowerCase()}},i.events={listen:function(e,t,r,i){return n(e).on(t,r,i)},bindAll:function(){return t.bindAll.apply(this,arguments)}},i.template={parse:t.template},i})}(),define("aura/logger",[],function(){function e(e){return this.name=e,this._log=t,this._warn=t,this._error=t,this._enabled=!1,this}var t=function(){},n=window.console||{};return e.prototype.isEnabled=function(){return this._enabled},e.prototype.setName=function(e){this.name=e},e.prototype.enable=function(){this._log=n.log||t,this._warn=n.warn||this._log,this._error=n.error||this._log,this._enabled=!0;try{if(Function.prototype.bind&&typeof n=="object"){var e=["log","warn","error"];for(var r=0;r<e.length;r++)n[e[r]]=Function.prototype.call.bind(n[e[r]],n)}}catch(i){}return this},e.prototype.write=function(e,t){var r=Array.prototype.slice.call(t);r.unshift(this.name+":"),e.apply(n,r)},e.prototype.log=function(){this.write(this._log,arguments)},e.prototype.warn=function(){this.write(this._warn,arguments)},e.prototype.error=function(){this.write(this._error,arguments)},e}),define("aura/aura.extensions",["./base","./logger"],function(e,t){function n(){return this._extensions=[],this.initStatus=f(),this}function r(){var e=a.call(arguments),t;for(var n=0,r=e.length;n<r;n++){t=e[n];if(typeof t=="function")return t}return function(){}}function i(e){return typeof e=="function"?e.apply(undefined,a.call(arguments,1)):e}function s(e){var t=f(),n=e.ref,i=e.context,s=o(n,i);return s.fail(t.reject),s.done(function(e){if(!e)return t.resolve();var n=l(r(e,e.initialize)(i));n.done(function(){t.resolve(e)}),n.fail(t.reject)}),t.promise()}function o(e,t){var n=f(),r=function(e){e=i(e,t);if(e&&e.require&&e.require.paths){var r=u.keys(e.require.paths)||[];require.config(e.require),require(r,function(){n.resolve(e)},s)}else n.resolve(e)},s=function(t){c.error("Error loading ext:",e,t),n.reject(t)};return typeof e=="string"?require([e],r,s):r(e),n}var u=e.util._,a=Array.prototype.slice,f=e.data.deferred,l=e.data.when,c=(new t("Extensions")).enable();return n.prototype.add=function(e){if(u.include(this._extensions,e)){var t=e.ref.toString()+" is already registered.";throw t+="Extensions can only be added once.",new Error(t)}if(this.initStarted)throw new Error("Init extensions already called");return this._extensions.push(e),this},n.prototype.onReady=function(e){return this.initStatus.then(e),this},n.prototype.onFailure=function(e){return this.initStatus.fail(e),this},n.prototype.init=function(){if(this.initStarted)throw new Error("Init extensions already called");this.initStarted=!0;var e=u.compact(this._extensions.slice(0)),t=[],n=this.initStatus;return function r(i){if(i){var o=s(i);t.push(o),o.done(function(){r(e.shift())}),o.fail(function(e){e||(e="Unknown error while loading an extension"),e instanceof Error||(e=new Error(e)),n.reject(e)})}else e.length===0&&l.apply(undefined,t).done(function(){n.resolve(Array.prototype.slice.call(arguments))})}(e.shift()),n.promise()},n}),define("aura/aura",["./base","./aura.extensions","./logger"],function(e,t,n){function r(s){function o(e){typeof e=="string"&&(e=l.sandboxes.get(e));if(e){var t=["aura","sandbox","stop"].join(l.config.mediator.delimiter);return i.invoke(e._children,"stop"),l.core.mediator.emit(t,e),e._component&&e._component.invokeWithCallbacks("remove"),e.stopped=!0,e.el&&u(e.el).remove(),c[e.ref]=null,delete c[e.ref],e}}if(this instanceof r){var f=new t,l=this;l.ref=i.uniqueId("aura_"),l.config=s=s||{},l.config.sources=l.config.sources||{"default":"./aura_components"};var c={},h=Object.create(e);l.sandboxes={},l.sandboxes.create=function(e,t){e=e||i.uniqueId("sandbox-");if(c[e])throw new Error("Sandbox with ref "+e+" already exists.");var r=Object.create(h);r.ref=e||i.uniqueId("sandbox-"),r.logger=new n(r.ref),c[r.ref]=r;var o=s.debug;return(o===!0||o.enable&&(o.components.length===0||o.components.indexOf(e)!==-1))&&r.logger.enable(),i.extend(r,t||{}),r},l.sandboxes.get=function(e){return c[e]},l.use=function(e){return f.add({ref:e,context:l}),l},l.components={},l.components.addSource=function(e,t){if(s.sources[e])throw new Error("Components source '"+e+"' is already registered");return s.sources[e]=t,l},l.core=Object.create(e),l.start=function(t){if(l.started)return l.logger.error("Aura already started!"),f.initStatus;l.logger.log("Starting Aura");var n=t||{};return typeof t=="string"?n={components:u(t)}:i.isArray(t)?n={components:t}:t&&t.widgets&&!t.components?n.components=t.widgets:n.components===undefined&&(n.components=u(l.config.components||"body")),f.onReady(function(t){e.util.each(t,function(e,t){e&&typeof e.afterAppStart=="function"&&e.afterAppStart(l)})}),f.onFailure(function(){l.logger.error("Error initializing app:",l.config.name,arguments),l.stop()}),l.startOptions=n,l.started=!0,f.init()},l.stop=function(){l.started=!1},l.sandbox=h,l.logger=new n(l.ref),l.sandbox.stop=function(e){e?i.each(u(e,this.el),function(e,t){var n=a(u(e),"__sandbox_ref__");o(n)}):o(this)},s.debug=s.debug||{};var p=s.debug;return p===!0&&(s.debug=p={enable:!0}),p.enable&&(p.components?p.components=p.components.split(" "):p.components=[],l.logger.enable(),l.use("aura/ext/debug")),l.use("aura/ext/mediator"),s.components!==!1&&l.use("aura/ext/components"),l}return new r(s)}var i=e.util._,s=function(){},o=Object.freeze||s,u=e.dom.find,a=e.dom.data;return r}),define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e["default"]=t}),define("handlebars/utils",["./safe-string","exports"],function(e,t){function n(e){return u[e]||"&"}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e){return e instanceof o?e.toString():!e&&e!==0?"":(e=""+e,f.test(e)?e.replace(a,n):e)}function s(e){return!e&&e!==0?!0:h(e)&&e.length===0?!0:!1}var o=e["default"],u={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/;t.extend=r;var l=Object.prototype.toString;t.toString=l;var c=function(e){return typeof e=="function"};c(/x/)&&(c=function(e){return typeof e=="function"&&l.call(e)==="[object Function]"});var c;t.isFunction=c;var h=Array.isArray||function(e){return e&&typeof e=="object"?l.call(e)==="[object Array]":!1};t.isArray=h,t.escapeExpression=i,t.isEmpty=s}),define("handlebars/exception",["exports"],function(e){function t(){var e=Error.prototype.constructor.apply(this,arguments);for(var t=0;t<n.length;t++)this[n[t]]=e[n[t]]}var n=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=new Error,e["default"]=t}),define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function r(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;return h(t)&&(t=t.call(this)),t===!0?i(this):t===!1||t==null?r(this):c(t)?t.length>0?e.helpers.each(t,n):r(this):i(t)}),e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i=0,s="",o;h(e)&&(e=e.call(this)),t.data&&(o=m(t.data));if(e&&typeof e=="object")if(c(e))for(var u=e.length;i<u;i++)o&&(o.index=i,o.first=i===0,o.last=i===e.length-1),s+=n(e[i],{data:o});else for(var a in e)e.hasOwnProperty(a)&&(o&&(o.key=a),s+=n(e[a],{data:o}),i++);return i===0&&(s=r(this)),s}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){h(e)&&(e=e.call(this));if(!o.isEmpty(e))return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}function s(e,t){v.log(e,t)}var o=e,u=t["default"],a="1.1.2";n.VERSION=a;var f=4;n.COMPILER_REVISION=f;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=l;var c=o.isArray,h=o.isFunction,p=o.toString,d="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:v,log:s,registerHelper:function(e,t,n){if(p.call(e)===d){if(n||t)throw new u("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===d?o.extend(this.partials,e):this.partials[e]=t}};var v={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(v.level<=e){var n=v.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=v,n.log=s;var m=function(e){var t={};return o.extend(t,e),t};n.createFrame=m}),define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,r){function i(e){var t=e&&e[0]||1,n=h;if(t!==n){if(t<n){var r=p[n],i=p[t];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function s(e,t){if(!t)throw new Error("No environment passed to template");var n;t.compile?n=function(e,n,r,i,s,o){var u=a.apply(this,arguments);if(u)return u;var f={helpers:i,partials:s,data:o};return s[n]=t.compile(e,{data:o!==undefined},t),s[n](r,f)}:n=function(e,t){var n=a.apply(this,arguments);if(n)return n;throw new c("The partial "+t+" could not be compiled when running in runtime-only mode")};var r={escapeExpression:l.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=u(e,t,n):r||(r=this.programs[e]=u(e,t)),r},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},l.extend(n,t),l.extend(n,e)),n},programWithDepth:o,noop:f,compilerInfo:null};return function(n,s){s=s||{};var o=s.partial?s:t,u,a;s.partial||(u=s.helpers,a=s.partials);var f=e.call(r,o,n,u,a,s.data);return s.partial||i(r.compilerInfo),f}}function o(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i}function u(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function a(e,t,n,r,i,s){var o={partial:!0,helpers:r,partials:i,data:s};if(e===undefined)throw new c("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o)}function f(){return""}var l=e,c=t["default"],h=n.COMPILER_REVISION,p=n.REVISION_CHANGES;r.template=s,r.programWithDepth=o,r.program=u,r.invokePartial=a,r.noop=f}),define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,r,i,s){var o=e,u=t["default"],a=n["default"],f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();h.create=c,s["default"]=h}),define("handlebars/compiler/ast",["../exception","exports"],function(e,t){function n(e,t,r){this.type="program",this.statements=e,this.strip={},r?(this.inverse=new n(r,t),this.strip.right=t.left):t&&(this.strip.left=t.right)}function r(e,t,n,r){this.type="mustache",this.hash=t,this.strip=r;var i=n[3]||n[2];this.escaped=i!=="{"&&i!=="&";var s=this.id=e[0],o=this.params=e.slice(1),u=this.eligibleHelper=s.isSimple;this.isHelper=u&&(o.length||t)}function i(e,t,n){this.type="partial",this.partialName=e,this.context=t,this.strip=n}function s(e,t,n,r){if(e.id.original!==r.path.original)throw new v(e.id.original+" doesn't match "+r.path.original);this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip={left:e.strip.left,right:r.strip.right},(t||n).strip.left=e.strip.right,(n||t).strip.right=r.strip.left,n&&!t&&(this.isInverse=!0)}function o(e){this.type="content",this.string=e}function u(e){this.type="hash",this.pairs=e}function a(e){this.type="ID";var t="",n=[],r=0;for(var i=0,s=e.length;i<s;i++){var o=e[i].part;t+=(e[i].separator||"")+o;if(o===".."||o==="."||o==="this"){if(n.length>0)throw new v("Invalid path: "+t);o===".."?r++:this.isScoped=!0}else n.push(o)}this.original=t,this.parts=n,this.string=n.join("."),this.depth=r,this.isSimple=e.length===1&&!this.isScoped&&r===0,this.stringModeValue=this.string}function f(e){this.type="PARTIAL_NAME",this.name=e.original}function l(e){this.type="DATA",this.id=e}function c(e){this.type="STRING",this.original=this.string=this.stringModeValue=e}function h(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)}function p(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"}function d(e){this.type="comment",this.comment=e}var v=e["default"];t.ProgramNode=n,t.MustacheNode=r,t.PartialNode=i,t.BlockNode=s,t.ContentNode=o,t.HashNode=u,t.IdNode=a,t.PartialNameNode=f,t.DataNode=l,t.StringNode=c,t.IntegerNode=h,t.BooleanNode=p,t.CommentNode=d}),define("handlebars/compiler/parser",["exports"],function(e){var t=function(){function e(e,t){return{left:e[2]==="~",right:t[0]==="~"||t[1]==="~"}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return new i.ProgramNode(o[a-1]);case 2:return new i.ProgramNode([]);case 3:this.$=new i.ProgramNode([],o[a-1],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-2],o[a-1],o[a]);break;case 5:this.$=new i.ProgramNode(o[a-1],o[a],[]);break;case 6:this.$=new i.ProgramNode(o[a]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=new i.ProgramNode([]);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 12:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new i.ContentNode(o[a]);break;case 16:this.$=new i.CommentNode(o[a]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2],e(o[a-2],o[a]));break;case 18:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2],e(o[a-2],o[a]));break;case 19:this.$={path:o[a-1],strip:e(o[a-2],o[a])};break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2],e(o[a-2],o[a]));break;case 21:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2],e(o[a-2],o[a]));break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1],e(o[a-3],o[a]));break;case 23:this.$=e(o[a-1],o[a]);break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a]],null];break;case 26:this.$=o[a];break;case 27:this.$=new i.StringNode(o[a]);break;case 28:this.$=new i.IntegerNode(o[a]);break;case 29:this.$=new i.BooleanNode(o[a]);break;case 30:this.$=o[a];break;case 31:this.$=new i.HashNode(o[a]);break;case 32:this.$=[o[a-2],o[a]];break;case 33:this.$=new i.PartialNameNode(o[a]);break;case 34:this.$=new i.PartialNameNode(new i.StringNode(o[a]));break;case 35:this.$=new i.PartialNameNode(new i.IntegerNode(o[a]));break;case 36:this.$=new i.DataNode(o[a]);break;case 37:this.$=new i.IdNode(o[a]);break;case 38:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 39:this.$=[{part:o[a]}];break;case 42:this.$=[];break;case 43:o[a-1].push(o[a]);break;case 46:this.$=[o[a]];break;case 47:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(e){i.length=i.length-2*e,s.length=s.length-e,o.length=o.length-e}function n(){var e;return e=r.lexer.lex()||1,typeof e!="number"&&(e=r.symbols_[e]||e),e}var r=this,i=[0],s=[null],o=[],u=this.table,a="",f=0,l=0,c=0,h=2,p=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var d=this.lexer.yylloc;o.push(d);var v=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=i[i.length-1];if(this.defaultActions[y])b=this.defaultActions[y];else{if(m===null||typeof m=="undefined")m=n();b=u[y]&&u[y][m]}if(typeof b=="undefined"||!b.length||!b[0]){var k="";if(!c){C=[];for(x in u[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");this.lexer.showPosition?k="Parse error on line "+(f+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":k="Parse error on line "+(f+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:d,expected:C})}}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:i.push(m),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(l=this.lexer.yyleng,a=this.lexer.yytext,f=this.lexer.yylineno,d=this.lexer.yylloc,c>0&&c--);break;case 2:T=this.productions_[b[1]][1],S.$=s[s.length-T],S._$={first_line:o[o.length-(T||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(T||1)].first_column,last_column:o[o.length-1].last_column},v&&(S._$.range=[o[o.length-(T||1)].range[0],o[o.length-1].range[1]]),E=this.performAction.call(S,a,l,f,this.yy,b[1],s,o);if(typeof E!="undefined")return E;T&&(i=i.slice(0,-1*T*2),s=s.slice(0,-1*T),o=o.slice(0,-1*T)),i.push(this.productions_[b[1]][0]),s.push(S.$),o.push(S._$),N=u[i[i.length-2]][i[i.length-1]],i.push(N);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return typeof e!="undefined"?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}var s=r;switch(n){case 0:t.yytext.slice(-2)==="\\\\"?(i(0,1),this.begin("mu")):t.yytext.slice(-1)==="\\"?(i(0,1),this.begin("emu")):this.begin("mu");if(t.yytext)return 14;break;case 1:return 14;case 2:return t.yytext.slice(-1)!=="\\"&&this.popState(),t.yytext.slice(-1)==="\\"&&i(0,1),14;case 3:return i(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return i(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return t.yytext=i(1,2).replace(/\\"/g,'"'),32;case 22:return t.yytext=i(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return t.yytext=i(1,2),38;case 29:return"INVALID";case 30:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},e}();return n.lexer=r,t.prototype=n,n.Parser=t,new t}();e["default"]=t}),define("handlebars/compiler/base",["./parser","./ast","exports"],function(e,t,n){function r(e){return e.constructor===s.ProgramNode?e:(i.yy=s,i.parse(e))}var i=e["default"],s=t;n.parser=i,n.parse=r}),define("handlebars/compiler/javascript-compiler",["../base","exports"],function(e,t){function n(e){this.value=e}function r(){}var i=e.COMPILER_REVISION,s=e.REVISION_CHANGES,o=e.log;r.prototype={nameLookup:function(e,t){var n,i;return e.indexOf("depth")===0&&(n=!0),/^[0-9]+$/.test(t)?i=e+"["+t+"]":r.isValidJavaScriptVariableName(t)?i=e+"."+t:i=e+"['"+t+"']",n?"("+e+" && "+i+")":i},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(var u=i.length;this.i<u;this.i++)s=i[this.i],s.opcode==="DECLARE"?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(r)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var u=0,a=this.environment.depths.list.length;u<a;u++)r.push("depth"+this.environment.depths.list[u]);var f=this.mergeSource();if(!this.isChild){var l=i,c=s[l];f="this.compilerInfo = ["+l+",'"+c+"'];\n"+f}if(e)return r.push(f),Function.apply(this,r);var h="function "+(this.name||"")+"("+r.join(",")+") {\n  "+f+"}";return o("debug",h+"\n\n"),h},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.pushSource("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.pushSource("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".call("+n.callParams+") : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:r,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",r=this.isInline(),i;if(r){var s=this.popStack(!0);if(s instanceof n)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.pushSource(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];i instanceof n?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();return!e&&r instanceof n?r.value:(t||this.stackSlot--,r)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,r=t[t.length-1];return!e&&r instanceof n?r.value:r},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),a=r.RESERVED_WORDS={};for(var f=0,l=u.length;f<l;f++)a[u[f]]=!0;r.isValidJavaScriptVariableName=function(e){return!r.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},t["default"]=r}),define("handlebars/compiler/compiler",["../exception","./base","./javascript-compiler","./ast","exports"],function(e,t,n,r,i){function s(){}function o(e,t){if(e==null||typeof e!="string"&&e.constructor!==c.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=f(e),r=(new s).compile(n,t);return(new l).compile(r,t)}function u(e,t,n){function r(){var r=f(e),i=(new s).compile(r,t),o=(new l).compile(i,t,undefined,!0);return n.template(o)}if(e==null||typeof e!="string"&&e.constructor!==c.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=r()),i.call(this,e,t)}}var a=e["default"],f=t.parse,l=n["default"],c=r;i.Compiler=s,s.prototype={compiler:s,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){var t=e.strip||{},n;return t.left&&this.opcode("strip"),n=this[e.type](e),t.right&&this.opcode("strip"),n},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++)this.accept(t[n]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0;if(e.id.isScoped||e.id.depth)throw new a("Scoped data references are not supported: "+e.original);this.opcode("lookupData");var t=e.id.parts;for(var n=0,r=t.length;n<r;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}},i.precompile=o,i.compile=u}),define("handlebars",["./handlebars.runtime","./handlebars/compiler/ast","./handlebars/compiler/base","./handlebars/compiler/compiler","./handlebars/compiler/javascript-compiler","exports"],function(e,t,n,r,i,s){var o=e["default"],u=t,a=n.parser,f=n.parse,l=r.Compiler,c=r.compile,h=r.precompile,p=i["default"],d=o.create,v=function(){var e=d();return e.compile=function(t,n){return c(t,n,e)},e.precompile=h,e.AST=u,e.Compiler=l,e.JavaScriptCompiler=p,e.Parser=a,e.parse=f,e};o=v(),o.create=v,s["default"]=o}),function(){define("lib/utils/handlebars",["handlebars"],function(e){var t;return t=e["default"].create(),t})}.call(this),function(){var e;e=["on","onAny","offAny","once","many","off","removeAllListeners","listeners","listenersAny","emit","setMaxListeners"],define("lib/utils/emitter",["underscore","eventemitter"],function(t,n){return function(){var r,i,s,o,u;s=new n({wildcard:!0,delimiter:".",newListener:!1,maxListeners:100}),r={};for(o=0,u=e.length;o<u;o++)i=e[o],r[i]=t.bind(s[i],s);return r}})}.call(this),function(){define("lib/utils/cookies",["cookie"],function(e){return{set:e.set,get:e.get,remove:e.expire}})}.call(this),define("lib/utils/version",[],function(){return"0.8.31"}),function(){define("lib/api/params",["underscore"],function(e){var t,n,r;return t="hull",r=function(e){return[e,t,{}]},n=function(e){var n,r,i;return r=e.path,i=e.provider||t,n=e.params||{},[r,i,n]},{parse:function(t){var i,s,o,u,a,f,l,c,h,p,d,v;s=t.shift(),e.isString(s)&&(d=r(s),l=d[0],c=d[1],f=d[2]),e.isObject(s)&&(v=n(s),l=v[0],c=v[1],f=v[2]);if(!l)throw"No URI provided for the API call";l[0]==="/"&&(l=l.substring(1)),h=[],f!=null&&h.push(f),h=h.concat(t),i=o=null,f={};while(a=h.shift()){p=typeof a;if(p==="string"&&!u)u=a.toLowerCase();else if(p==="function"&&(!i||!o))i?o||(o=a):i=a;else{if(p!=="object")throw new TypeError("Invalid argument passed to Hull.api(): "+a);f=e.extend(f,a)}}return u==null&&(u="get"),i==null&&(i=function(){}),o==null&&(o=function(e){return console.error("The request has failed: ",e)}),[{provider:c,path:l,method:u,params:f},i,o]}}})}.call(this),function(){var e;try{e=JSON.parse(atob(document.location.hash.replace("#",""))),window.opener&&window.opener.Hull&&window.opener.__hull_login_status__&&e!=null&&(window.opener.__hull_login_status__(e),window.close())}catch(t){}define("lib/api/auth",["underscore","../utils/promises","../utils/version"],function(t,n,r){return function(i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b;return u==null&&(u=[]),f=null,b=null,h=function(e){var t;return o.emit("hull.auth.login",e),(e!=null?(t=e.stats)!=null?t.sign_in_count:void 0:void 0)==null&&o.emit("hull.auth.create",e),e},p=function(e){throw o.emit("hull.auth.fail",e),e},y=function(e){return i("users","post",e).then(h,p)},c=function(e,n,r){var s,o;if(!t.isString(e))throw new TypeError("'loginOrProvider' must be a String");return t.isString(n)?o=i("users/login","post",{login:e,password:n}):o=d(e,n).then(function(){return i("me")}),s=o.then(h,p),t.isFunction(r)&&s.then(r),o},d=function(e,r){var i;return m.isAuthenticating()?m.isAuthenticating():(e=e.toLowerCase(),f=n.deferred(),~t.indexOf(u,e)?(f.providerName=e,i=m.authUrl(s,e,r),m.authHelper(i),f.promise):(f.reject({message:"No authentication service "+e+" configured for the app",reason:"no_such_service"}),f.promise))},v=function(e){var n;return n=i("logout"),n.done(function(){if(t.isFunction(e))return e()}),n.then(function(){return o.emit("hull.auth.logout")})},g=function(e){var t,n,r,i,s;i=f;if(!f)return;if(e.success)f.resolve({});else{t=new Error("Login failed"),s=e.error;for(n in s)r=s[n],t[n]=r;f.reject(t)}return f=null,clearInterval(b),b=null,i},l=function(e,n,i){var s,o;return m.createCallback(),s=i||{},s.app_id=e.appId,s.callback_url=e.callback_url||e.callbackUrl||m.location.toString(),s.auth_referer=m.location.toString(),s.version=r,o=t.map(s,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"),""+e.orgUrl+"/auth/"+n+"?"+o},m={isAuthenticating:function(){return f!=null},location:document.location,authUrl:l,createCallback:function(){return window.__hull_login_status__=function(e){return window.__hull_login_status__=null,g(e)}},authHelper:function(t){var n,r;return n=window.open(t,"_auth","location=0,status=0,width=1030,height=600"),((r=window.device)!=null?r.cordova:void 0)&&n!=null&&n.addEventListener("loadstart",function(t){e=function(){try{return JSON.parse(atob(t.url.split("#")[1]))}catch(e){}}();if(e)return window.__hull_login_status__(e),n.close()}),b=n!=null&&setInterval(function(){if(n!=null?n.closed:void 0)return g({success:!1,error:{reason:"window_closed"}})},200)},onCompleteAuth:g},a={signup:y,login:c,logout:v,isAuthenticating:m.isAuthenticating},a}})}.call(this),function(e){function t(e){return Object.prototype.toString.call(e)==="[object Array]"}function n(e){return typeof e=="undefined"}function r(e){if(!e)throw new Error("url is undefined or empty");if(/^file/.test(e))throw new Error("The file:// protocol is not supported");var t=e.toLowerCase().match(b);if(t){var n=t[2],r=t[3],i=t[4]||"";if(n==="http:"&&i===":80"||n==="https:"&&i===":443")i="";return n+"//"+r+i}return e}function i(e){if(!e)throw new Error("url is undefined or empty");e=e.replace(E,"$1/");if(!e.match(/^(http||https):\/\//)){var t=e.substring(0,1)==="/"?"":location.pathname;t.substring(t.length-1)!=="/"&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+t+e}while(w.test(e))e=e.replace(w,"");return e}function s(e,t,n){var r;for(var i in t)t.hasOwnProperty(i)&&(i in e?(r=t[i],typeof r=="object"?s(e[i],r,n):n||(e[i]=t[i])):e[i]=t[i]);return e}function o(e,t){typeof e=="string"&&(e=[e]);var n,r=e.length;while(r--){n=e[r],n=new RegExp(n.substr(0,1)==="^"?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(n.test(t))return!0}return!1}function u(e,t){if(!t)throw new Error("parameters is undefined or null");var n=e.indexOf("#"),r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(t[i]));return e+(n===-1?"#":"&")+r.join("&")}function a(e){var t=m.cloneNode(!1);s(e.props,{frameBorder:0,allowTransparency:!0,scrolling:"no",width:"100%",src:u(e.remote,{xdm_e:r(location.href),xdm_c:e.channel,xdm_p:1}),name:v+e.channel+"_provider",style:{margin:0,padding:0,border:0}}),t.id=e.props.name,delete e.props.name;if(!e.container)throw new Error('xdm.Rpc() configuration object missing a DOM "container" property');return s(t,e.props),e.container.appendChild(t),e.onLoad&&S(t,"load",e.onLoad),e.html&&(t.contentWindow.document.open(),t.contentWindow.document.write(e.html),t.contentWindow.document.close()),e.iframe=t,t}function f(e){var t;e.isHost=e.isHost||n(T.xdm_p),e.props=e.props||{};if(!e.isHost){e.channel=T.xdm_c.replace(/["'<>\\]/g,""),e.remote=T.xdm_e.replace(/["'<>\\]/g,"");if(e.acl&&!o(e.acl,e.remote))throw new Error("Access denied for "+e.remote)}else e.remote=i(e.remote),e.channel=e.channel||"default"+g++;return t=[new p.stack.PostMessageTransport(e)],t.push(new p.stack.QueueBehavior(!0)),t}function l(e){var t,n,r=e.length,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(n=0;n<r;n++)t=e[n],s(t,i,!0),n!==0&&(t.down=e[n-1]),n!==r-1&&(t.up=e[n+1]);return t}function c(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if(!e.postMessage)return;var h="",p={},d=e.xdm,v="xdm_",m=document.createElement("IFRAME"),g=Math.floor(Math.random()*1e4),y=Function.prototype,b=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,w=/[\-\w]+\/\.\.\//,E=/([^:])\/\//g,S=function(){return e.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)}}(),x=function(){return e.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)}}(),T=function(e){e=e.substring(1,e.length).split("&");var t={},n,r=e.length;while(r--)n=e[r].split("="),t[n[0]]=decodeURIComponent(n[1]);return t}(location.hash);p.version="1.0.1",p.stack={},p.query=T,p.checkAcl=o,p.noConflict=function(t){return e.xdm=d,h=t,h&&(v="xdm_"+h.replace(".","_")+"_"),p},p.Rpc=function(e,t){var n;if(t.local)for(var i in t.local)t.local.hasOwnProperty(i)&&(n=t.local[i],typeof n=="function"&&(t.local[i]={method:n}));var s=l(f(e).concat([new p.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=r(e.remote),this.destroy=function(){s.destroy()},s.init(),this.iframe=e.iframe},p.stack.PostMessageTransport=function(t){function n(e){var n=r(e.origin),s=typeof e.data=="string";n===u&&s&&e.data.substring(0,t.channel.length+1)===t.channel+" "&&i.up.incoming(e.data.substring(t.channel.length+1),n)}var i,s,o,u;return i={outgoing:function(e,n,r){o.postMessage(t.channel+" "+e,n||u),r&&r()},destroy:function(){x(e,"message",n),s&&(o=null,s.parentNode.removeChild(s),s=null)},init:function(){u=r(t.remote);if(t.isHost){var f=function(r){r.data===t.channel+"-ready"&&("postMessage"in s.contentWindow?o=s.contentWindow:o=s.contentWindow.document,x(e,"message",f),S(e,"message",n),setTimeout(function(){i.up.callback(!0)},0))};S(e,"message",f),s=a(t)}else S(e,"message",n),"postMessage"in e.parent?o=e.parent:o=e.parent.document,o.postMessage(t.channel+"-ready",u),setTimeout(function(){i.up.callback(!0)},0)}},i},p.stack.QueueBehavior=function(e){function t(){var s;if(e===!0&&r.length===0){c(n);return}if(i||r.length===0||o)return;i=!0,s=r.shift(),n.down.outgoing(s.data,s.origin,function(e){i=!1,s.callback&&setTimeout(function(){s.callback(e)},0),t()})}var n,r=[],i=!0,s="",o;return n={init:function(){n.down.init()},callback:function(e){i=!1;var r=n.up;t(),r.callback(e)},incoming:function(e,t){n.up.incoming(e,t)},outgoing:function(e,n,i){r.push({data:e,origin:n,callback:i}),t()},destroy:function(){o=!0,n.down.destroy()}},n},p.stack.RpcBehavior=function(e,r){function i(e){e.jsonrpc="2.0",u.down.outgoing(JSON.stringify(e))}function s(e,t){var n=Array.prototype.slice;return function(){var r=arguments.length,s,o={method:t};r>0&&typeof arguments[r-1]=="function"?(r>1&&typeof arguments[r-2]=="function"?(s={success:arguments[r-2],error:arguments[r-1]},o.params=n.call(arguments,0,r-2)):(s={success:arguments[r-1]},o.params=n.call(arguments,0,r-1)),f[""+ ++a]=s,o.id=a):o.params=n.call(arguments,0),e.namedParams&&o.params.length===1&&(o.params=o.params[0]),i(o)}}function o(e,r,s,o){if(!s){r&&i({id:r,error:{code:-32601,message:"Procedure not found."}});return}var u,a;r?(u=function(e){u=y,i({id:r,result:e})},a=function(e,t){a=y;var n={id:r,error:{code:-32099,message:e}};t&&(n.error.data=t),i(n)}):u=a=y,t(o)||(o=[o]);try{var f=s.method.apply(s.scope,o.concat([u,a]));n(f)||u(f)}catch(l){a(l.message)}}var u,a=0,f={};return u={incoming:function(e,t){var n=JSON.parse(e),s;n.method?r.handle?r.handle(n,i):o(n.method,n.id,r.local[n.method],n.params):(s=f[n.id],n.error&&s.error?s.error(n.error):s.success&&s.success(n.result),delete f[n.id])},init:function(){if(r.remote)for(var t in r.remote)r.remote.hasOwnProperty(t)&&(e[t]=s(r.remote[t],t));u.down.init()},destroy:function(){for(var t in r.remote)r.remote.hasOwnProperty(t)&&e.hasOwnProperty(t)&&delete e[t];u.down.destroy()}},u},typeof exports=="object"?module.exports=p:typeof define=="function"&&define.amd?define("xdm",[],function(){return p}):e.xdm=p}(window),function(){define("lib/api/xdm",["domready","lib/utils/promises","xdm","lib/utils/version"],function(e,t,n,r){var i;return i=function(e){var t,n;return n=""+e.orgUrl+"/api/v1/"+e.appId+"/remote.html?v="+r,e.jsUrl&&(n+="&js="+e.jsUrl),e.uid&&(n+="&uid="+e.uid),t=e.accessToken||e.appSecret,t!=null&&(n+="&access_token="+t),e.userHash!==void 0&&(n+="&user_hash="+e.userHash),n+="&r="+encodeURIComponent(document.referrer),n},function(r,s){var o,u,a,f,l,c,h;return c=null,f=null,o=t.deferred(),u=function(e){return console.log("remoteMessage",e),e.error?o.reject(e.error):console.warn("RPC Message",arguments)},l=function(e){return s.emit("hull.settings.update",e)},h=function(e){return s.emit("hull.auth.update",e)},a=function(e){return window.clearTimeout(c),o.resolve({rpc:f,config:e})},e(function(){return c=setTimeout(function(){return o.reject('Remote loading has failed. Please check "orgUrl" and "appId" in your configuration. This may also be about connectivity.')},3e4),f=new n.Rpc({remote:i(r),container:document.body,props:{tabIndex:-1,height:"0",width:"1px",style:{position:"fixed",width:"0",top:"-20px",left:"-20px"}}},{remote:{message:{},ready:{}},local:{message:u,ready:a,userUpdate:h,settingsUpdate:l}})}),o.promise}})}.call(this),function(){define("lib/api/api",["underscore","../utils/cookies","../utils/version","../api/params","../api/auth","../utils/promises","lib/api/xdm"],function(e,t,n,r,i,s,o){var u;return u=Array.prototype.slice,{init:function(n,a){var f,l,c,h,p,d;return n==null&&(n={}),l=s.deferred(),!n.orgUrl||!n.appId?(n.orgUrl||l.reject(new ReferenceError("no organizationURL provided. Can't proceed")),n.appId||l.reject(new ReferenceError("no applicationID provided. Can't proceed")),l.promise):(c=null,f=function(){return c.apply(void 0,r.parse(u.call(arguments)))},e.each(["get","post","put","delete"],function(e){return f[e]=function(){var t,n;return t=r.parse(u.call(arguments)),n=t[0],n.method=e,c.apply(f,t)}}),f.parseRoute=r.parse,d=function(e){var r,i;e==null&&(e={});if(!n.appId)return;return r="hull_"+n.appId,e&&e["Hull-User-Id"]&&e["Hull-User-Sig"]?(i=btoa(JSON.stringify(e)),t.set(r,i,{path:"/"})):t.remove(r,{path:"/"})},p=null,h=function(t){var r,s,o,u;p=t.rpc,o=t.config,s=o.data,d(s.headers);if((u=s.headers)!=null?u["Hull-Auth-Scope"]:void 0)r=s.headers["Hull-Auth-Scope"].split(":")[0];return{auth:i(f,n,a,e.keys(o.settings.auth||{})),remoteConfig:o,authScope:r||"",api:f,init:function(){return l.promise}}},o(n,a).then(h).then(l.resolve,l.reject),c=function(e,t,n){var r,i,o;return p||console.error("Api not initialized yet"),r=s.deferred(),o=function(e){var n,i,s,o,u;e==null&&(e={}),e.provider==="hull"&&d(e.headers),i=e!=null?e.headers:void 0;if(i!=null&&e.provider==="hull"){s=i["Hull-Track"];if(s)try{u=JSON.parse(atob(s)),n=u[0],o=u[1],a.emit(n,o)}catch(f){!1}}return t(e.response,e.headers),r.resolve(e.response)},i=function(e){return e==null&&(e={}),n(e.message),r.reject(e.message)},p.message(e,o,i),r.promise},l.promise)}}})}.call(this),function(){define("lib/api/reporting",["underscore"],function(e){return{init:function(t){return{track:function(n,r){var i;return i=e.extend({url:window.location.href,referrer:document.referrer},r),t.api({provider:"track",path:n},"post",i)},flag:function(e){return t.api({provider:"hull",path:[e,"flag"].join("/")},"post")}}}}})}.call(this),function(){define("lib/utils/base64",[],function(){var e;return e=window,{utils:e,decode:function(t){return e.decodeURIComponent(e.escape(e.atob(t)))},encode:function(t){return e.btoa(e.unescape(e.encodeURIComponent(t)))},utilsContainer:window}})}.call(this),function(){define("lib/utils/entity",["underscore","lib/utils/base64"],function(e,t){return{decode:function(e){return/^~[a-z0-9_\-\+\/\=]+$/i.test(e)&&(e.length-1)%4===0?t.decode(e.substr(1),!0):e},encode:function(e){return"~"+t.encode(e,!0)}}})}.call(this),function(){define("lib/utils/config",["underscore"],function(e){var t,n;return n=function(e){if(e!==void 0)return JSON.parse(JSON.stringify(e))},t=function(t,r){return r&&r.on("hull.settings.update",function(e){return t.services=e}),function(r){var i;return i=t,r?(e.each(r.split("."),function(t){return i===void 0?i:e.contains(e.keys(i),t)?i=i[t]:i=void 0}),n(i)):n(t)}},function(e,n){return t(e,n)}})}.call(this),function(){define("lib/api/current-user",[],function(){return function(e){var t;return t=!1,e.on("hull.init",function(e,n,r,i){return t=n}),e.on("hull.auth.login",function(e){return t=e}),e.on("hull.auth.update",function(n){if(t!=null?!!t.id:!!void 0)return t.id===n.id?t=n:(n!=null?!n.id:!void 0)?e.emit("hull.auth.logout"):e.emit("hull.auth.login",n);if(n.id)return e.emit("hull.auth.login",n)}),e.on("hull.auth.logout",function(){return t=!1}),function(){return t}}})}.call(this),function(){define("lib/traits/base",["underscore"],function(e){var t,n;return t=function(){function t(t,n,r){this.api=t,this.name=n,this.value=r,this.api||(this.api=function(){}),e.isUndefined(this.value)||this.set(this.value)}return t.prototype.inc=function(e){return e==null&&(e=1),this.api("me/traits","put",{name:this.name,operation:"inc",value:e})},t.prototype.dec=function(e){return e==null&&(e=1),this.api("me/traits","put",{name:this.name,operation:"dec",value:e})},t.prototype.set=function(e){return this.api("me/traits","put",{name:this.name,operation:"set",value:e})},t}(),n={api:null},{setup:function(e){return n.api=e,{build:function(e,r){return new t(n.api,e,r)}}}}})}.call(this),function(){var e=[].slice;define("lib/hull.api",["underscore","lib/utils/promises","lib/utils/emitter","lib/api/api","lib/api/reporting","lib/utils/entity","lib/utils/config","lib/api/current-user","lib/traits/base"],function(t,n,r,i,s,o,u,a,f){var l,c;return l=function(c){var h;return h=r(),i.init(c,h).then(function(r){var i,p,d;return d=s.init(r),h.on("hull.auth.create",function(e){var n;return n=t.pluck(e.identities,"provider"),d.track("hull.auth.create",{providers:n,main_identity:e.main_identity})}),h.on("hull.auth.login",function(e){var n;return n=t.pluck(e.identities,"provider"),d.track("hull.auth.login",{providers:n,main_identity:e.main_identity})}),h.on("hull.auth.logout",function(){return d.track("hull.auth.logout")}),p=n.deferred(),p.promise.fail(function(){}),p.reject({reason:"no_current_user",message:"User must be logged in to perform this action"}),c.services=r.remoteConfig.settings,i={config:u(c,h),on:h.on,off:h.off,emit:h.emit,track:d.track,flag:d.flag,api:r.api,currentUser:a(h),signup:function(){var t,n,i;return t=1<=arguments.length?e.call(arguments,0):[],n=(i=r.auth).signup.apply(i,t),n},login:function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],r.auth.isAuthenticating()?console.info("Authentication is in progress. Use `Hull.on('hull.auth.login', fn)` to call `fn` when done."):(n=r.auth).login.apply(n,t)},logout:r.auth.logout,linkIdentity:function(e,t,n){return t==null&&(t={}),i.currentUser()?(t.mode="connect",i.login(e,t,n)):p.promise},unlinkIdentity:function(e,t){var n;return i.currentUser()?(n=r.api("me/identities/"+e,"delete").then(r.api.bind(r,"me")),n.then(function(e){return h.emit("hull.auth.login",e),t(e)}),n):p.promise},util:{entity:o,eventEmitter:h},trait:f.setup(r.api).build},i.api.create=l,{raw:r,api:i,eventEmitter:h}})},c=function(e){throw console.error("Unable to start Hull.api",e.message),e},{init:function(e){return l(e)},success:function(e){return{exports:e.api,context:{me:e.raw.remoteConfig.data.me,app:e.raw.remoteConfig.data.app,org:e.raw.remoteConfig.data.org}}},failure:c}})}.call(this),function(){define("lib/client/component/registrar",[],function(){var e;return e=function(e){var t,n;return n=e.split("@"),e=n[0],t=n[1],t==null&&(t="default"),"__component__$"+e+"@"+t},function(t){return function(n,r){var i;r||(r=n,n=null);if(n&&!Object.prototype.toString.apply(n)==="[object String]")throw"The component identifier must be a String";Object.prototype.toString.apply(r)==="[object Function]"&&(r=r());if(Object.prototype.toString.apply(r)!=="[object Object]")throw"A component must have a definition";return(i=r.type)==null&&(r.type="Hull"),n?t(e(n),r):t(["module"],function(e){return t(e.id,r),r}),r}}})}.call(this),function(){define("lib/helpers/login",[],function(){return{update:function(e,t,n){n==null&&(n={});if(!e)return;return n._id="me",e("me").set(n)},login:function(e,t,n){n==null&&(n={});if(!e)return;return n._id="me",e("me").clear({silent:!0}),e("me").set(n)},logout:function(e,t){if(!e)return;return e("me").clear(),e("me").set({_id:"me"},{silent:!0})}}})}.call(this),function(){if(!window.jQuery)throw"jQuery must be available for components to work";define("flavour",["underscore","lib/utils/promises","aura/aura","lib/utils/handlebars","lib/hull.api","lib/utils/emitter","lib/client/component/registrar","lib/helpers/login"],function(e,t,n,r,i,s,o,u){var a,f;return a=function(t){return{name:"Hull",initialize:function(e){return e.core.mediator.setMaxListeners(100),e.core.data.hullApi=t},afterAppStart:function(t){var n;return e=t.core.util._,n=t.sandboxes.create()}}},f=function(e,t){return e.use(a(t)).use("aura-extensions/aura-base64").use("aura-extensions/aura-cookies").use("aura-extensions/aura-backbone").use("aura-extensions/aura-moment").use("aura-extensions/aura-twitter-text").use("aura-extensions/hull-reporting").use("aura-extensions/hull-entities").use("aura-extensions/hull-helpers").use("aura-extensions/hull-utils").use("aura-extensions/aura-form-serialize").use("aura-extensions/aura-component-validate-options").use("aura-extensions/aura-component-require").use("aura-extensions/hull-component-normalize-id").use("aura-extensions/hull-component-reporting").use("lib/client/component/api").use("lib/client/component/actions").use("lib/client/component/component").use("lib/client/component/templates").use("lib/client/component/datasource")},{init:function(t){var r;return r=i.init(t),t.apiOnly===!0?r:r.then(function(r){var i,s;return i=new n(e.extend(t,{mediatorInstance:r.eventEmitter})),s={api:r.raw.api,authScope:r.raw.authScope,remoteConfig:r.raw.remoteConfig,login:r.api.login,logout:r.api.logout},{app:f(i,s),api:r,components:!0}})},success:function(t){var n,s;return n=i.success(t.api),s=n.exports,t.components?(s.component=o(define),s.util.Handlebars=r,s.define=define,s.parse=function(e,n){return n==null&&(n={}),t.app.core.appSandbox.start(e,n)},t.app.start({components:"body"}).then(function(){return s.on("hull.auth.login",e.bind(u.login,void 0,t.app.sandbox.data.api.model,t.app.core.mediator)),s.on("hull.auth.update",e.bind(u.update,void 0,t.app.sandbox.data.api.model,t.app.core.mediator)),s.on("hull.auth.logout",e.bind(u.logout,void 0,t.app.sandbox.data.api.model,t.app.core.mediator))},function(e){return console.error("Unable to start Aura app:",e),t.app.stop()}),{exports:s,context:n.context}):s},failure:function(e){return console.error(e.message||e),e}}})}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=[].slice;(!window.console||!console.log)&&function(){var e,t,n,r,i;r=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],t=n.length,e=window.console={},i=[];while(t--)i.push(e[n[t]]=r);return i}(),e=typeof HULL_ENV!="undefined"&&HULL_ENV!==null?HULL_ENV:"",h=null,r=null,t=function(){var e,t;return t=!1,e=[],{run:function(n){return t?n():e.push(n)},unlock:function(){var n,r,i,s;t=!0,s=[];for(r=0,i=e.length;r<i;r++)n=e[r],s.push(n());return s}}},v=v||{},n=function(e){var t;return(t=v[e])==null&&(v[e]=[]),function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],v[e].push(t)}},i=function(e){return delete v[e]},l=function(e,t){var n,r,s,o;o=v[e];for(r=0,s=o.length;r<s;r++)n=o[r],t[e].apply(t,n);return i(e)},a=t(),d=!1,f=function(e,t,n,i){if(e&&d)throw new Error("Hull.init can be called only once");return e&&(d=!0),a.run(function(){var o,u,a;return o=h({},t),o.namespace="hull",o.debug=t.debug&&{enable:!0},a=function(){var r;return r=1<=arguments.length?m.call(arguments,0):[],c.apply(null,[t,e,n||function(){}].concat(r))},u=function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],s.apply(null,[e,i||function(){}].concat(t))},r.init(o).then(a,u).done(),console.info('Hull.js version "'+p.version+'" started')})},o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?m.call(arguments,1):[],t.apiOnly=!0,f.apply(null,[!1,t].concat(e))},u=function(){var e,t;return t=arguments[0],e=2<=arguments.length?m.call(arguments,1):[],f.apply(null,[!0,t].concat(e))},p=window.Hull={on:n("on"),track:n("track"),ready:n("ready"),init:u},p.init.api=o,e==="client"&&(p.component=n("component")),c=function(){var t,n,i,s,o,u,a,f;return n=arguments[0],o=arguments[1],u=arguments[2],t=4<=arguments.length?m.call(arguments,3):[],s=r.success.apply(r,t),i=s.context,a=h({},n),f=h({},p,s.exports,{ready:function(e){return e(f,i.me,i.app,i.org)}}),o?(window.Hull=f,l("on",f),l("track",f),e==="client"&&l("component",f)):delete f.component,l("ready",f),f.emit("hull.init",f,s.context.me,s.context.app,s.context.org),u(f,s.context.me,s.context.app,s.context.org),f},s=function(){var e,t,n,i;return n=arguments[0],i=arguments[1],t=arguments[2],e=4<=arguments.length?m.call(arguments,3):[],r.failure(t),i.apply(null,[t].concat(e))},require(["flavour","underscore","lib/utils/version"],function(e,t,n){return p.version=n,h=t.extend,r=e,a.unlock()})}.call(this),define("lib/bootstrap",function(){}),function(e){function t(e,t,n,r){var i=n.lang();return i[e].call?i[e](n,r):i[e][t]}function n(e,t){return function(n){return u(e.call(this,n),t)}}function r(e){return function(t){var n=e.call(this,t);return n+this.lang().ordinal(n)}}function i(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,this._lang=n||!1}function s(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,u=e.hours||e.h||0,a=e.minutes||e.m||0,f=e.seconds||e.s||0,l=e.milliseconds||e.ms||0;this._milliseconds=l+f*1e3+a*6e4+u*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=l%1e3,f+=o(l/1e3),t.seconds=f%60,a+=o(f/60),t.minutes=a%60,u+=o(a/60),t.hours=u%24,s+=o(u/24),s+=i*7,t.days=s%30,r+=o(s/30),t.months=r%12,n+=o(r/12),t.years=n,this._lang=!1}function o(e){return e<0?Math.ceil(e):Math.floor(e)}function u(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function a(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function f(e){return Object.prototype.toString.call(e)==="[object Array]"}function l(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function c(e,t,n,r){var i,s,o=[];for(i=0;i<7;i++)o[i]=e[i]=e[i]==null?i===2?1:0:e[i];return e[7]=o[7]=t,e[8]!=null&&(o[8]=e[8]),e[3]+=n||0,e[4]+=r||0,s=new Date(0),t?(s.setUTCFullYear(e[0],e[1],e[2]),s.setUTCHours(e[3],e[4],e[5],e[6])):(s.setFullYear(e[0],e[1],e[2]),s.setHours(e[3],e[4],e[5],e[6])),s._a=o,s}function h(e,t){var n,r,i=[];!t&&D&&(t=require("./lang/"+e));for(n=0;n<P.length;n++)t[P[n]]=t[P[n]]||M.en[P[n]];for(n=0;n<12;n++)r=k([2e3,n]),i[n]=new RegExp("^"+(t.months[n]||t.months(r,""))+"|^"+(t.monthsShort[n]||t.monthsShort(r,"")).replace(".",""),"i");return t.monthsParse=t.monthsParse||i,M[e]=t,t}function p(e){var t=typeof e=="string"&&e||e&&e._lang||null;return t?M[t]||h(t):k}function d(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function v(e){var t=e.match(B),n,r;for(n=0,r=t.length;n<r;n++)tt[t[n]]?t[n]=tt[t[n]]:t[n]=d(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function m(e,t){function n(t){return e.lang().longDateFormat[t]||t}var r=5;while(r--&&j.test(t))t=t.replace(j,n);return Y[t]||(Y[t]=v(t)),Y[t](e)}function g(e){switch(e){case"DDDD":return R;case"YYYY":return U;case"S":case"SS":case"SSS":case"DDD":return q;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return z;case"Z":case"ZZ":return W;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return I;default:return new RegExp(e.replace("\\",""))}}function y(e,t,n,r){var i,s;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(p().monthsParse[i].test(t)){n[1]=i,s=!0;break}s||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(K),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}t==null&&(n[8]=!1)}function b(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(B),s,o;for(s=0;s<i.length;s++)o=(g(i[s]).exec(e)||[])[0],o&&(e=e.slice(e.indexOf(o)+o.length)),tt[i[s]]&&y(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),c(n,r.isUTC,r.tzh,r.tzm)}function w(e,t){var n,r=e.match(F)||[],s,o=99,u,a,f;for(u=0;u<t.length;u++)a=b(e,t[u]),s=m(new i(a),t[u]).match(F)||[],f=l(r,s),f<o&&(o=f,n=a);return n}function E(e){var t="YYYY-MM-DDT",n;if(V.exec(e)){for(n=0;n<4;n++)if(J[n][1].exec(e)){t+=J[n][0];break}return W.exec(e)?b(e,t+" Z"):b(e,t)}return new Date(e)}function S(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function x(e,t,n){var r=A(Math.abs(e)/1e3),i=A(r/60),s=A(i/60),o=A(s/24),u=A(o/365),a=r<45&&["s",r]||i===1&&["m"]||i<45&&["mm",i]||s===1&&["h"]||s<22&&["hh",s]||o===1&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",A(o/30)]||u===1&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,S.apply({},a)}function T(e,t){k.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function N(e){k.duration.fn[e]=function(){return this._data[e]}}function C(e,t){k.duration.fn["as"+e]=function(){return+this/t}}var k,L="1.7.2",A=Math.round,O,M={},_="en",D=typeof module!="undefined"&&module.exports,P="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),H=/^\/?Date\((\-?\d+)/i,B=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,F=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,I=/\d\d?/,q=/\d{1,3}/,R=/\d{3}/,U=/\d{1,4}/,z=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,V=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,$="YYYY-MM-DDTHH:mm:ssZ",J=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],K=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),G={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Y={},Z="DDD w M D d".split(" "),et="M D H h m s w".split(" "),tt={M:function(){return this.month()+1},MMM:function(e){return t("monthsShort",this.month(),this,e)},MMMM:function(e){return t("months",this.month(),this,e)},D:function(){return this.date()},DDD:function(){var e=new Date(this.year(),this.month(),this.date()),t=new Date(this.year(),0,1);return~~((e-t)/864e5+1.5)},d:function(){return this.day()},dd:function(e){return t("weekdaysMin",this.day(),this,e)},ddd:function(e){return t("weekdaysShort",this.day(),this,e)},dddd:function(e){return t("weekdays",this.day(),this,e)},w:function(){var e=new Date(this.year(),this.month(),this.date()-this.day()+5),t=new Date(e.getFullYear(),0,4);return~~((e-t)/864e5/7+1.5)},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return u(~~(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+u(~~(e/60),2)+":"+u(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+u(~~(10*e/6),4)}};while(Z.length)O=Z.pop(),tt[O+"o"]=r(tt[O]);while(et.length)O=et.pop(),tt[O+O]=n(tt[O],2);tt.DDDD=n(tt.DDD,3),k=function(t,n){if(t===null||t==="")return null;var r,s;return k.isMoment(t)?new i(new Date(+t._d),t._isUTC,t._lang):(n?f(n)?r=w(t,n):r=b(t,n):(s=H.exec(t),r=t===e?new Date:s?new Date(+s[1]):t instanceof Date?t:f(t)?c(t):typeof t=="string"?E(t):new Date(t)),new i(r))},k.utc=function(e,t){return f(e)?new i(c(e,!0),!0):(typeof e=="string"&&!W.exec(e)&&(e+=" +0000",t&&(t+=" Z")),k(e,t).utc())},k.unix=function(e){return k(e*1e3)},k.duration=function(e,t){var n=k.isDuration(e),r=typeof e=="number",i=n?e._data:r?{}:e,o;return r&&(t?i[t]=e:i.milliseconds=e),o=new s(i),n&&(o._lang=e._lang),o},k.humanizeDuration=function(e,t,n){return k.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},k.version=L,k.defaultFormat=$,k.lang=function(e,t){var n;if(!e)return _;(t||!M[e])&&h(e,t);if(M[e]){for(n=0;n<P.length;n++)k[P[n]]=M[e][P[n]];k.monthsParse=M[e].monthsParse,_=e}},k.langData=p,k.isMoment=function(e){return e instanceof i},k.isDuration=function(e){return e instanceof s},k.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),k.fn=i.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!l(this._a,(this._a[7]?k.utc(this._a):k(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return m(this,e?e:k.defaultFormat)},add:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return a(this,n,1),this},subtract:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return a(this,n,-1),this},diff:function(e,t,n){var r=this._isUTC?k(e).utc():k(e).local(),i=(this.zone()-r.zone())*6e4,s=this._d-r._d-i,o=this.year()-r.year(),u=this.month()-r.month(),a=this.date()-r.date(),f;return t==="months"?f=o*12+u+a/30:t==="years"?f=o+(u+a/30)/12:f=t==="seconds"?s/1e3:t==="minutes"?s/6e4:t==="hours"?s/36e5:t==="days"?s/864e5:t==="weeks"?s/6048e5:s,n?f:A(f)},from:function(e,t){return k.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(k(),e)},calendar:function(){var e=this.diff(k().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,r=e<-6?n:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:n;return this.format(typeof r=="function"?r.apply(this):r)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return k.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===e?p(this):(this._lang=t,this)}};for(O=0;O<Q.length;O++)T(Q[O].toLowerCase(),Q[O]);T("year","FullYear"),k.duration.fn=s.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=x(t,!e,this.lang()),i=t<=0?n.past:n.future;return e&&(typeof i=="function"?r=i(r):r=i.replace(/%s/i,r)),r},lang:k.fn.lang};for(O in G)G.hasOwnProperty(O)&&(C(O,G[O]),N(O.toLowerCase()));C("Weeks",6048e5),D&&(module.exports=k),typeof ender=="undefined"&&(this.moment=k),typeof define=="function"&&define.amd&&define("moment",[],function(){return k})}.call(this),function(){window.Backbone?define("backbone",[],function(){return window.Backbone}):require.config({paths:{backbone:"components/backbone/backbone"},shim:{backbone:{exports:"Backbone",deps:["underscore","jquery"]}}}),define("aura-extensions/aura-backbone",["backbone"],{name:"The Back of the Bone",initialize:function(e){var t=e.core,n=e.sandbox,r=require("backbone");t.mvc=r.noConflict(),n.mvc={},n.mvc.View=function(e){return t.mvc.View.extend(e)},n.mvc.Model=function(e){return t.mvc.Model.extend(e)},n.mvc.Collection=function(e){return t.mvc.Collection.extend(e)},n.mvc.Router=function(e){return t.mvc.Router.extend(e)}}})}(),define("aura-extensions/aura-base64",["lib/utils/base64"],function(e){var t={name:"base64",initialize:function(t){t.core.util.base64=e}};return t}),function(){define("lib/utils/q2jquery",["jquery"],function(e){return function(t){var n;return n=e.Deferred(),t.then(n.resolve,n.reject),n.promise()}})}.call(this),define("aura-extensions/aura-component-require",["underscore","lib/utils/promises","lib/utils/q2jquery"],function(e,t,n){function r(e,t){return t.ref+"/"+e}function i(){var i=t.deferred();if(!this.require)return;var s=e.map([].concat(this.require),function(e){return r(e,this)},this),o=require.s.contexts._.config,u=require.s.contexts._.defined,a=require.config({context:"__context__"+this.ref,baseUrl:o.pkgs[this.ref].location,shim:o.shim,paths:o.paths}),f=this,l=this.require;return a(["require"],function(t){e.each(e.keys(u),function(e){define(e,[],function(){return u[e]})}),t(l,function(e){f.require=function(e){return a(e)},i.resolve(e)},function(e){i.reject(e)})}),n(i.promise)}return{initialize:function(e){e.components.before("initialize",i)},componentRequire:i}}),define("aura-extensions/aura-component-validate-options",[],function(){return function(e){var t=e.core.util._,n={name:"ValidateOptions",initialize:function(e){e.components.before("initialize",n.checkOptions)},checkOptions:function(e){var n=t.keys(e);return t.each(this.requiredOptions||[],function(r){if(!t.contains(n,r)||e[r]===undefined)throw new Error("Missing option to component "+this.componentName+": "+r)},this),!0}};return n}}),define("aura-extensions/aura-cookies",["lib/utils/cookies"],function(e){var t={initialize:function(t){t.core.cookies=e}};return t}),function(e,t){typeof define=="function"&&define.amd?define("bower_components/form2js/src/form2js",t):e.form2js=t()}(this,function(){function e(e,r,i,s,o){if(typeof i=="undefined"||i==null)i=!0;if(typeof r=="undefined"||r==null)r=".";arguments.length<5&&(o=!1),e=typeof e=="string"?document.getElementById(e):e;var u=[],a,f=0;if(e.constructor==Array||typeof NodeList!="undefined"&&e.constructor==NodeList)while(a=e[f++])u=u.concat(n(a,s,o));else u=n(e,s,o);return t(u,i,r)}function t(e,t,n){var r={},i={},s,o,u,a,f,l,c,h,p,d,v,m,g;for(s=0;s<e.length;s++){f=e[s].value;if(!(!t||f!==""&&f!==null))continue;m=e[s].name,g=m.split(n),l=[],c=r,h="";for(o=0;o<g.length;o++){v=g[o].split("][");if(v.length>1)for(u=0;u<v.length;u++){u==0?v[u]=v[u]+"]":u==v.length-1?v[u]="["+v[u]:v[u]="["+v[u]+"]",d=v[u].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(d)for(a=1;a<d.length;a++)d[a]&&l.push(d[a]);else l.push(v[u])}else l=l.concat(v)}for(o=0;o<l.length;o++)v=l[o],v.indexOf("[]")>-1&&o==l.length-1?(p=v.substr(0,v.indexOf("[")),h+=p,c[p]||(c[p]=[]),c[p].push(f)):v.indexOf("[")>-1?(p=v.substr(0,v.indexOf("[")),d=v.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),h+="_"+p+"_"+d,i[h]||(i[h]={}),p!=""&&!c[p]&&(c[p]=[]),o==l.length-1?p==""?(c.push(f),i[h][d]=c[c.length-1]):(c[p].push(f),i[h][d]=c[p][c[p].length-1]):i[h][d]||(/^[0-9a-z_]+\[?/i.test(l[o+1])?c[p].push({}):c[p].push([]),i[h][d]=c[p][c[p].length-1]),c=i[h][d]):(h+=v,o<l.length-1?(c[v]||(c[v]={}),c=c[v]):c[v]=f)}return r}function n(e,t,n){var s=i(e,t,n);return s.length>0?s:r(e,t,n)}function r(e,t,n){var r=[],s=e.firstChild;while(s)r=r.concat(i(s,t,n)),s=s.nextSibling;return r}function i(e,t,n){if(e.disabled)return[];var i,u,a,f=s(e,n);return i=t&&t(e),i&&i.name?a=[i]:f!=""&&e.nodeName.match(/INPUT|TEXTAREA/i)?(u=o(e),a=[{name:f,value:u}]):f!=""&&e.nodeName.match(/SELECT/i)?(u=o(e),a=[{name:f.replace(/\[\]$/,""),value:u}]):a=r(e,t,n),a}function s(e,t){return e.name&&e.name!=""?e.name:t&&e.id&&e.id!=""?e.id:""}function o(e){if(e.disabled)return null;switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":if(e.checked&&e.value==="false")return!1;case"checkbox":if(e.checked&&e.value==="true")return!0;if(!e.checked&&e.value==="true")return!1;if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return u(e);default:}return null}function u(e){var t=e.multiple,n=[],r,i,s;if(!t)return e.value;for(r=e.getElementsByTagName("option"),i=0,s=r.length;i<s;i++)r[i].selected&&n.push(r[i].value);return n}return e}),define("aura-extensions/aura-form-serialize",["bower_components/form2js/src/form2js","underscore"],function(e,t){return{initialize:function(n){n.core.dom.getFormData=function(n){return n.toArray&&(n=n.toArray()),t.extend.apply(t,t.map([].concat(n),e))}}}}),define("aura-extensions/aura-moment",["moment"],function(e){return{initialize:function(t){t.sandbox.util.moment=e}}}),define("aura-extensions/aura-purl",["purl"],function(){return{require:{paths:{purl:"bower_components/purl/purl"}},initialize:function(e){var t=require("purl");e.core.util.purl=t}}}),function(){function e(e,t){return t=t||"",typeof e!="string"&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var n=s.txt.regexen[t]||"";return typeof n!="string"&&(n=n.source),n}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function n(e,t,n){var r=String.fromCharCode(t);return n!==t&&(r+="-"+String.fromCharCode(n)),e.push(r),e}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:typeof e=="string"&&e.match(t)&&RegExp["$&"]===e}if(typeof s=="undefined"||s===null)var s={};s.txt={},s.txt.regexen={};var o={"&":"&",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};s.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return o[e]})},s.txt.regexSupplant=e,s.txt.stringSupplant=t,s.txt.addCharsToCharClass=n;var u=String.fromCharCode,a=[u(32),u(133),u(160),u(5760),u(6158),u(8232),u(8233),u(8239),u(8287),u(12288)];n(a,9,13),n(a,8192,8202);var f=[u(65534),u(65279),u(65535)];n(f,8234,8238),s.txt.regexen.spaces_group=e(a.join("")),s.txt.regexen.spaces=e("["+a.join("")+"]"),s.txt.regexen.invalid_chars_group=e(f.join("")),s.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,s.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg,s.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;var l=[];n(l,1024,1279),n(l,1280,1319),n(l,11744,11775),n(l,42560,42655),n(l,1425,1471),n(l,1473,1474),n(l,1476,1477),n(l,1479,1479),n(l,1488,1514),n(l,1520,1524),n(l,64274,64296),n(l,64298,64310),n(l,64312,64316),n(l,64318,64318),n(l,64320,64321),n(l,64323,64324),n(l,64326,64335),n(l,1552,1562),n(l,1568,1631),n(l,1646,1747),n(l,1749,1756),n(l,1758,1768),n(l,1770,1775),n(l,1786,1788),n(l,1791,1791),n(l,1872,1919),n(l,2208,2208),n(l,2210,2220),n(l,2276,2302),n(l,64336,64433),n(l,64467,64829),n(l,64848,64911),n(l,64914,64967),n(l,65008,65019),n(l,65136,65140),n(l,65142,65276),n(l,8204,8204),n(l,3585,3642),n(l,3648,3662),n(l,4352,4607),n(l,12592,12677),n(l,43360,43391),n(l,44032,55215),n(l,55216,55295),n(l,65441,65500),n(l,12449,12538),n(l,12540,12542),n(l,65382,65439),n(l,65392,65392),n(l,65296,65305),n(l,65313,65338),n(l,65345,65370),n(l,12353,12438),n(l,12441,12446),n(l,13312,19903),n(l,19968,40959),n(l,173824,177983),n(l,177984,178207),n(l,194560,195103),n(l,12291,12291),n(l,12293,12293),n(l,12347,12347),s.txt.regexen.nonLatinHashtagChars=e(l.join(""));var c=[];n(c,192,214),n(c,216,246),n(c,248,255),n(c,256,591),n(c,595,596),n(c,598,599),n(c,601,601),n(c,603,603),n(c,611,611),n(c,616,616),n(c,623,623),n(c,626,626),n(c,649,649),n(c,651,651),n(c,699,699),n(c,768,879),n(c,7680,7935),s.txt.regexen.latinAccentChars=e(c.join("")),s.txt.regexen.hashSigns=/[#ï¼ƒ]/,s.txt.regexen.hashtagAlpha=e(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),s.txt.regexen.hashtagAlphaNumeric=e(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),s.txt.regexen.endHashtagMatch=e(/^(?:#{hashSigns}|:\/\/)/),s.txt.regexen.hashtagBoundary=e(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),s.txt.regexen.validHashtag=e(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),s.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@ï¼ ]|RT:?)/,s.txt.regexen.atSigns=/[@ï¼ ]/,s.txt.regexen.validMentionOrList=e("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),s.txt.regexen.validReply=e(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),s.txt.regexen.endMentionMatch=e(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),s.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@ï¼ $#ï¼ƒ#{invalid_chars_group}]|^)/),s.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,s.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",s.txt.regexen),s.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),s.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),s.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),s.txt.regexen.validGTLD=e(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),s.txt.regexen.validCCTLD=e(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|sx)(?=[^0-9a-zA-Z]|$))/),s.txt.regexen.validPunycode=e(/(?:xn--[0-9a-z]+)/),s.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),s.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),s.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/),s.txt.regexen.validPortNumber=e(/[0-9]+/),s.txt.regexen.validGeneralUrlPathChars=e(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),s.txt.regexen.validUrlBalancedParens=e(/\(#{validGeneralUrlPathChars}+\)/i),s.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),s.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),s.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,s.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,s.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),s.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,s.txt.regexen.urlHasProtocol=/^https?:\/\//i,s.txt.regexen.urlHasHttps=/^https:\/\//i,s.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,s.txt.regexen.validCashtag=e("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),s.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,s.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,s.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,s.txt.regexen.validateUrlPchar=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),s.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,s.txt.regexen.validateUrlUserinfo=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),s.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,s.txt.regexen.validateUrlIpv4=e(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),s.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,s.txt.regexen.validateUrlIp=e("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),s.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomain=e(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),s.txt.regexen.validateUrlHost=e("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),s.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomain=e(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),s.txt.regexen.validateUrlUnicodeHost=e("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),s.txt.regexen.validateUrlPort=/[0-9]{1,5}/,s.txt.regexen.validateUrlUnicodeAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),s.txt.regexen.validateUrlAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),s.txt.regexen.validateUrlPath=e(/(\/#{validateUrlPchar}*)*/i),s.txt.regexen.validateUrlQuery=e(/(#{validateUrlPchar}|\/|\?)*/i),s.txt.regexen.validateUrlFragment=e(/(#{validateUrlPchar}|\/|\?)*/i),s.txt.regexen.validateUrlUnencoded=e("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var h="tweet-url list-slug",p="tweet-url username",d="tweet-url hashtag",v="tweet-url cashtag",m={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},g={disabled:!0,readonly:!0,multiple:!0,checked:!0};s.txt.tagAttrs=function(e){var t="";for(var n in e){var r=e[n];g[n]&&(r=r?n:null);if(r==null)continue;t+=" "+s.txt.htmlEscape(n)+'="'+s.txt.htmlEscape(r.toString())+'"'}return t},s.txt.linkToText=function(e,n,r,i){i.suppressNoFollow||(r.rel="nofollow"),i.linkAttributeBlock&&i.linkAttributeBlock(e,r),i.linkTextBlock&&(n=i.linkTextBlock(e,n));var o={text:n,attr:s.txt.tagAttrs(r)};return t("<a#{attr}>#{text}</a>",o)},s.txt.linkToTextWithSymbol=function(e,t,n,r,i){var o=i.symbolTag?"<"+i.symbolTag+">"+t+"</"+i.symbolTag+">":t;n=s.txt.htmlEscape(n);var u=i.textWithSymbolTag?"<"+i.textWithSymbolTag+">"+n+"</"+i.textWithSymbolTag+">":n;return i.usernameIncludeSymbol||!t.match(s.txt.regexen.atSigns)?s.txt.linkToText(e,o+u,r,i):o+s.txt.linkToText(e,u,r,i)},s.txt.linkToHashtag=function(e,t,n){var i=t.substring(e.indices[0],e.indices[0]+1),o=s.txt.htmlEscape(e.hashtag),u=r(n.htmlAttrs||{});return u.href=n.hashtagUrlBase+o,u.title="#"+o,u["class"]=n.hashtagClass,o[0].match(s.txt.regexen.rtl_chars)&&(u["class"]+=" rtl"),n.targetBlank&&(u.target="_blank"),s.txt.linkToTextWithSymbol(e,i,o,u,n)},s.txt.linkToCashtag=function(e,t,n){var i=s.txt.htmlEscape(e.cashtag),o=r(n.htmlAttrs||{});return o.href=n.cashtagUrlBase+i,o.title="$"+i,o["class"]=n.cashtagClass,n.targetBlank&&(o.target="_blank"),s.txt.linkToTextWithSymbol(e,"$",i,o,n)},s.txt.linkToMentionAndList=function(e,t,n){var i=t.substring(e.indices[0],e.indices[0]+1),o=s.txt.htmlEscape(e.screenName),u=s.txt.htmlEscape(e.listSlug),a=e.listSlug&&!n.suppressLists,f=r(n.htmlAttrs||{});return f["class"]=a?n.listClass:n.usernameClass,f.href=a?n.listUrlBase+o+u:n.usernameUrlBase+o,!a&&!n.suppressDataScreenName&&(f["data-screen-name"]=o),n.targetBlank&&(f.target="_blank"),s.txt.linkToTextWithSymbol(e,i,a?o+u:o,f,n)},s.txt.linkToUrl=function(e,t,n){var i=e.url,o=i,u=s.txt.htmlEscape(o),a=n.urlEntities&&n.urlEntities[i]||e;a.display_url&&(u=s.txt.linkTextWithEntity(a,n));var f=r(n.htmlAttrs||{});return i.match(s.txt.regexen.urlHasProtocol)||(i="http://"+i),f.href=i,n.targetBlank&&(f.target="_blank"),n.urlClass&&(f["class"]=n.urlClass),n.urlTarget&&(f.target=n.urlTarget),!n.title&&a.display_url&&(f.title=a.expanded_url),s.txt.linkToText(e,u,f,n)},s.txt.linkTextWithEntity=function(e,n){var r=e.display_url,i=e.expanded_url,o=r.replace(/â€¦/g,"");if(i.indexOf(o)!=-1){var u=i.indexOf(o),a={displayUrlSansEllipses:o,beforeDisplayUrl:i.substr(0,u),afterDisplayUrl:i.substr(u+o.length),precedingEllipsis:r.match(/^â€¦/)?"â€¦":"",followingEllipsis:r.match(/â€¦$/)?"â€¦":""};for(var f in a)a.hasOwnProperty(f)&&(a[f]=s.txt.htmlEscape(a[f]));return a.invisible=n.invisibleTagAttrs,t("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",a)}return r},s.txt.autoLinkEntities=function(e,t,n){n=r(n||{}),n.hashtagClass=n.hashtagClass||d,n.hashtagUrlBase=n.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",n.cashtagClass=n.cashtagClass||v,n.cashtagUrlBase=n.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",n.listClass=n.listClass||h,n.usernameClass=n.usernameClass||p,n.usernameUrlBase=n.usernameUrlBase||"https://twitter.com/",n.listUrlBase=n.listUrlBase||"https://twitter.com/",n.htmlAttrs=s.txt.extractHtmlAttrsFromOptions(n),n.invisibleTagAttrs=n.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,o,u;if(n.urlEntities){i={};for(o=0,u=n.urlEntities.length;o<u;o++)i[n.urlEntities[o].url]=n.urlEntities[o];n.urlEntities=i}var a="",f=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var l=n.htmlEscapeNonEntities?s.txt.htmlEscape:function(e){return e};for(var o=0;o<t.length;o++){var c=t[o];a+=l(e.substring(f,c.indices[0])),c.url?a+=s.txt.linkToUrl(c,e,n):c.hashtag?a+=s.txt.linkToHashtag(c,e,n):c.screenName?a+=s.txt.linkToMentionAndList(c,e,n):c.cashtag&&(a+=s.txt.linkToCashtag(c,e,n)),f=c.indices[1]}return a+=l(e.substring(f,e.length)),a},s.txt.autoLinkWithJSON=function(e,t,n){var r=[];for(var i in t)r=r.concat(t[i]);for(var o=0;o<r.length;o++)entity=r[o],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return s.txt.modifyIndicesFromUnicodeToUTF16(e,r),s.txt.autoLinkEntities(e,r,n)},s.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var r=e[n];if(m[n])continue;g[n]&&(r=r?n:null);if(r==null)continue;t[n]=r}return t},s.txt.autoLink=function(e,t){var n=s.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkUsernamesOrLists=function(e,t){var n=s.txt.extractMentionsOrListsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkHashtags=function(e,t){var n=s.txt.extractHashtagsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkCashtags=function(e,t){var n=s.txt.extractCashtagsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkUrlsCustom=function(e,t){var n=s.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return s.txt.autoLinkEntities(e,n,t)},s.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});var t=e[0];for(var n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},s.txt.extractEntitiesWithIndices=function(e,t){var n=s.txt.extractUrlsWithIndices(e,t).concat(s.txt.extractMentionsOrListsWithIndices(e)).concat(s.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(s.txt.extractCashtagsWithIndices(e));return n.length==0?[]:(s.txt.removeOverlappingEntities(n),n)},s.txt.extractMentions=function(e){var t=[],n=s.txt.extractMentionsWithIndices(e);for(var r=0;r<n.length;r++){var i=n[r].screenName;t.push(i)}return t},s.txt.extractMentionsWithIndices=function(e){var t=[],n,r=s.txt.extractMentionsOrListsWithIndices(e);for(var i=0;i<r.length;i++)n=r[i],n.listSlug==""&&t.push({screenName:n.screenName,indices:n.indices});return t},s.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(s.txt.regexen.atSigns))return[];var t=[],n;return e.replace(s.txt.regexen.validMentionOrList,function(e,n,r,i,o,u,a){var f=a.slice(u+e.length);if(!f.match(s.txt.regexen.endMentionMatch)){o=o||"";var l=u+n.length,c=l+i.length+o.length+1;t.push({screenName:i,listSlug:o,indices:[l,c]})}}),t},s.txt.extractReplies=function(e){if(!e)return null;var t=e.match(s.txt.regexen.validReply);return!t||RegExp.rightContext.match(s.txt.regexen.endMentionMatch)?null:t[1]},s.txt.extractUrls=function(e,t){var n=[],r=s.txt.extractUrlsWithIndices(e,t);for(var i=0;i<r.length;i++)n.push(r[i].url);return n},s.txt.extractUrlsWithIndices=function(e,t){t||(t={extractUrlsWithoutProtocol:!0});if(!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];var n=[];while(s.txt.regexen.extractUrl.exec(e)){var r=RegExp.$2,i=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=s.txt.regexen.extractUrl.lastIndex,l=f-i.length;if(!o){if(!t.extractUrlsWithoutProtocol||r.match(s.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=!1,p=0;u.replace(s.txt.regexen.validAsciiDomain,function(e){var t=u.indexOf(e,p);p=t+e.length,c={url:e,indices:[l+t,l+p]},h=e.match(s.txt.regexen.invalidShortDomain),h||n.push(c)});if(c==null)continue;a&&(h&&n.push(c),c.url=i.replace(u,c.url),c.indices[1]=f)}else i.match(s.txt.regexen.validTcoUrl)&&(i=RegExp.lastMatch,f=l+i.length),n.push({url:i,indices:[l,f]})}return n},s.txt.extractHashtags=function(e){var t=[],n=s.txt.extractHashtagsWithIndices(e);for(var r=0;r<n.length;r++)t.push(n[r].hashtag);return t},s.txt.extractHashtagsWithIndices=function(e,t){t||(t={checkUrlOverlap:!0});if(!e||!e.match(s.txt.regexen.hashSigns))return[];var n=[];e.replace(s.txt.regexen.validHashtag,function(e,t,r,i,o,u){var a=u.slice(o+e.length);if(a.match(s.txt.regexen.endHashtagMatch))return;var f=o+t.length,l=f+i.length+1;n.push({hashtag:i,indices:[f,l]})});if(t.checkUrlOverlap){var r=s.txt.extractUrlsWithIndices(e);if(r.length>0){var i=n.concat(r);s.txt.removeOverlappingEntities(i),n=[];for(var o=0;o<i.length;o++)i[o].hashtag&&n.push(i[o])}}return n},s.txt.extractCashtags=function(e){var t=[],n=s.txt.extractCashtagsWithIndices(e);for(var r=0;r<n.length;r++)t.push(n[r].cashtag);return t},s.txt.extractCashtagsWithIndices=function(e){if(!e||e.indexOf("$")==-1)return[];var t=[];return e.replace(s.txt.regexen.validCashtag,function(e,n,r,i,s,o){var u=s+n.length,a=u+i.length+1;t.push({cashtag:i,indices:[u,a]})}),t},s.txt.modifyIndicesFromUnicodeToUTF16=function(e,t){s.txt.convertUnicodeIndices(e,t,!1)},s.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){s.txt.convertUnicodeIndices(e,t,!0)},s.txt.getUnicodeTextLength=function(e){return e.replace(s.txt.regexen.non_bmp_code_pairs," ").length},s.txt.convertUnicodeIndices=function(e,t,n){if(t.length==0)return;var r=0,i=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var s=0,o=t[0];while(r<e.length){if(o.indices[0]==(n?r:i)){var u=o.indices[1]-o.indices[0];o.indices[0]=n?i:r,o.indices[1]=o.indices[0]+u,s++;if(s==t.length)break;o=t[s]}var a=e.charCodeAt(r);55296<=a&&a<=56319&&r<e.length-1&&(a=e.charCodeAt(r+1),56320<=a&&a<=57343&&r++),i++,r++}},s.txt.splitTags=function(e){var t=e.split("<"),n,r=[],i;for(var s=0;s<t.length;s+=1){i=t[s];if(!i)r.push("");else{n=i.split(">");for(var o=0;o<n.length;o+=1)r.push(n[o])}}return r},s.txt.hitHighlight=function(e,t,n){var r="em";t=t||[],n=n||{};if(t.length===0)return e;var i=n.tag||r,o=["<"+i+">","</"+i+">"],u=s.txt.splitTags(e),a,f,l="",c=0,h=u[0],p=0,d=0,v=!1,m=h,g=[],y,b,w,E,S;for(a=0;a<t.length;a+=1)for(f=0;f<t[a].length;f+=1)g.push(t[a][f]);for(y=0;y<g.length;y+=1){b=g[y],w=o[y%2],E=!1;while(h!=null&&b>=p+h.length)l+=m.slice(d),v&&b===p+m.length&&(l+=w,E=!0),u[c+1]&&(l+="<"+u[c+1]+">"),p+=m.length,d=0,c+=2,h=u[c],m=h,v=!1;!E&&h!=null?(S=b-p,l+=m.slice(d,S)+w,d=S,y%2===0?v=!0:v=!1):E||(E=!0,l+=w)}if(h!=null){d<m.length&&(l+=m.slice(d));for(y=c+1;y<u.length;y+=1)l+=y%2===0?u[y]:"<"+u[y]+">"}return l};var y=140,b=[u(65534),u(65279),u(65535),u(8234),u(8235),u(8236),u(8237),u(8238)];s.txt.getTweetLength=function(e,t){t||(t={short_url_length:22,short_url_length_https:23});var n=s.txt.getUnicodeTextLength(e),r=s.txt.extractUrlsWithIndices(e);s.txt.modifyIndicesFromUTF16ToUnicode(e,r);for(var i=0;i<r.length;i++)n+=r[i].indices[0]-r[i].indices[1],r[i].url.toLowerCase().match(s.txt.regexen.urlHasHttps)?n+=t.short_url_length_https:n+=t.short_url_length;return n},s.txt.isInvalidTweet=function(e){if(!e)return"empty";if(s.txt.getTweetLength(e)>y)return"too_long";for(var t=0;t<b.length;t++)if(e.indexOf(b[t])>=0)return"invalid_characters";return!1},s.txt.isValidTweetText=function(e){return!s.txt.isInvalidTweet(e)},s.txt.isValidUsername=function(e){if(!e)return!1;var t=s.txt.extractMentions(e);return t.length===1&&t[0]===e.slice(1)};var w=e(/^#{validMentionOrList}$/);s.txt.isValidList=function(e){var t=e.match(w);return!!t&&t[1]==""&&!!t[4]},s.txt.isValidHashtag=function(e){if(!e)return!1;var t=s.txt.extractHashtags(e);return t.length===1&&t[0]===e.slice(1)},s.txt.isValidUrl=function(e,t,n){t==null&&(t=!0),n==null&&(n=!0);if(!e)return!1;var r=e.match(s.txt.regexen.validateUrlUnencoded);if(!r||r[0]!==e)return!1;var o=r[1],u=r[2],a=r[3],f=r[4],l=r[5];return(!n||i(o,s.txt.regexen.validateUrlScheme)&&o.match(/^https?$/i))&&i(a,s.txt.regexen.validateUrlPath)&&i(f,s.txt.regexen.validateUrlQuery,!0)&&i(l,s.txt.regexen.validateUrlFragment,!0)?t&&i(u,s.txt.regexen.validateUrlUnicodeAuthority)||!t&&i(u,s.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=s.txt);if(typeof window!="undefined")if(window.twttr)for(var E in s)window.twttr[E]=s[E];else window.twttr=s}(),define("bower_components/twitter-text/twitter-text",function(){}),define("aura-extensions/aura-twitter-text",["bower_components/twitter-text/twitter-text"],function(){return{initialize:function(e){e.sandbox.util.twttr=window.twttr.txt}}}),define("aura-extensions/aura-uuid",[],function(){return function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e.core.util.uuid=function(e,n){var r=t,i=[],s;n=n||r.length;if(e)for(s=0;s<e;s++)i[s]=r[0|Math.random()*n];else{var o;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(s=0;s<36;s++)i[s]||(o=0|Math.random()*16,i[s]=r[s==19?o&3|8:o])}return i.join("")},e.core.util.uuidFast=function(){var e=t,n=new Array(36),r=0,i;for(var s=0;s<36;s++)s==8||s==13||s==18||s==23?n[s]="-":s==14?n[s]="4":(r<=2&&(r=33554432+Math.random()*16777216|0),i=r&15,r>>=4,n[s]=e[s==19?i&3|8:i]);return n.join("")},e.core.util.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}}}),define("aura-extensions/hull-component-normalize-id",[],function(){var e={initialize:function(t){var n=t.core.util._;t.components.before("initialize",function(t){var r=e.normalizeId.call(this,t);this.options=n.extend(this.options,r)})},normalizeId:function(e){var t=this.sandbox,n="entity:";return e.id?(e.id.match("^"+n)!==null&&(e.id=t.util.entity.encode(e.id.slice(n.length))),e):e.uid?(e.id=t.util.entity.encode(e.uid),e):(e.id=t.config.entity_id,e)}};return e}),define("aura-extensions/hull-component-reporting",["underscore","lib/api/reporting"],function(e,t){var n={setup:function(){this.track=function(t,n){var r;return n==null&&(n={}),r=e.result(this,"trackingData"),r=e.isObject(r)?r:{},n=e.extend({id:this.id,component:this.options.name},r,n),this.sandbox.track(t,n)}},initialize:function(e){var r=t.init(e.core.data.hullApi),i=e.sandbox;return i.track=function(e,t){return r.track(e,t)},i.flag=function(e){return r.flag(e)},e.components.before("initialize",n.setup)}};return n}),define("aura-extensions/hull-entities",["lib/utils/entity"],function(e){parseQueryString=function(e){var t;return e||(e=window.location.search),t={},e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,r,i){return t[n]=decodeURIComponent(i)}),t};var t={initialize:function(t){t.core.util.entity=e;var n=t.core.util._;t.config.withEntity===!0&&(og=core.dom.find('meta[property="og:url"]'),og&&og.length&&og.attr("content")?uid=og.attr("content"):(loc=document.location,search=parseQueryString(loc.search),qs=n.map(n.keys(search).sort(),function(e){return[e,search[e]].join("=")}).join("&"),qs.length>0&&(qs="?"+qs),uid=[loc.origin,loc.pathname,qs].join("")),t.config.uid=e.encode(uid))}};return t}),define("aura-extensions/hull-helpers",[],function(){var e={initialize:function(e){var t=e.core.util._;imageUrl=function(n,r,i){return r==null&&(r="small"),i==null&&(i=""),t.isFunction(n)&&(n=n()),n?(n=n.replace(/\/(large|small|medium|thumb)$/,""),t.isString(r)||(r="small"),"//"+e.config.assetsUrl+"/img/"+n+"/"+r):i},e.sandbox.helpers=e.sandbox.helpers||{},e.sandbox.helpers.imageUrl=imageUrl}};return e}),define("aura-extensions/hull-reporting",["lib/api/reporting"],function(e){return{initialize:function(t){t.core.reporting=e}}}),define("aura-extensions/hull-utils",[],function(){return{require:{paths:{string:"bower_components/underscore.string/lib/underscore.string"},shim:{string:{deps:["underscore"]}}},initialize:function(e){var t=e.core.util._;e.sandbox.utils=e.sandbox.utils||{}}}}),function(){define("lib/client/component/actions",["underscore"],function(e){var t,n;return t=function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t&&t.toUpperCase()||""})},n={initialize:function(e){return e.components.before("initialize",n.registerActions)},defaultActions:["login","logout","linkIdentity","unlinkIdentity"],selectAction:function(t,n){var r;r=n.actions[t]||n[""+t+"Action"],e.isString(r)&&(r=n[r]);if(!e.isFunction(r))throw new Error("Can't find action "+t+" on this component");return r},formatActionData:function(e){var n,r,i,s;n={},s=function(){var e;return e=r.replace(/^hull(-)?/,""),e=t(e),e=e.charAt(0).toLowerCase()+e.slice(1),n[e]=i};for(r in e)i=e[r],s();return n},actionHandler:function(e){var t,r,i,s;s=this.sandbox.dom.find(e.currentTarget),t=s.data("hull-action"),r=n.formatActionData(s.data());try{return i=n.selectAction(t,this),i.call(this,e,{el:s,data:r})}catch(o){return console.error("Error in action handler: ",t,o.message,o)}finally{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}},registerActions:function(){var t,r;return t=e.isFunction(this.events)?this.events():this.events,this.events=e.defaults({"click [data-hull-action]":e.bind(n.actionHandler,this)},t),this.actions=e.isFunction(this.actions)?this.actions():this.actions,(r=this.actions)==null&&(this.actions={}),e.each(n.defaultActions,function(e){var t,n,r=this;return(n=(t=this.actions)[e])!=null?n:t[e]=function(t,n){return r.sandbox[e](n.data.provider,n.data)}},this)}},n})}.call(this),function(){var e=[].slice;define("lib/client/component/api",["underscore","lib/utils/promises"],function(t,n){var r,i,s,o,u;return u=Array.prototype.slice,i={},r=function(){return i=t.pick(i,"me","app","org")},o=null,s={initialize:function(r){var s,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O;p=r.core,w=r.sandbox,m=p.data.hullApi,O=function(e,t){var n,r,i,s,o;t==null&&(t={});if(t!=null){i=t["Hull-Track"];if(i)try{o=JSON.parse(atob(i)),r=o[0],s=o[1],p.mediator.emit(r,s)}catch(u){console.warn("Error",u)}if(t["Hull-Auth-Scope"])return n=t["Hull-Auth-Scope"].split(":")[0]}},p.data.api=function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],n=m.api.apply(m,t),n.then(O),n},t.each(["get","put","post","delete"],function(t){return p.data.api[t]=function(){var n,r,i;return n=1<=arguments.length?e.call(arguments,0):[],r=(i=m.api)[t].apply(i,n),r.then(O),r}}),y={create:"post",update:"put","delete":"delete",read:"get"},x=function(e,n,r){var i,s,o,u;return r==null&&(r={}),o=t.isFunction(n.url)?n.url():n.url,u=y[e],i=r.data,i==null&&n&&(e==="create"||e==="update"||e==="patch")&&(i=r.attrs||n.toJSON(r)),s=p.data.api(o,u,i),s.then(r.success),s.then(function(e){return n.trigger("sync",n,e,r)}),s.fail(r.error),s.fail(function(e){return n.trigger("error",n,e,r)}),s},s=p.mvc.Model.extend({sync:x}),l=s.extend({url:function(){return this._id||this.id}}),f=s.extend({url:function(){var e,t;return this.id||this._id?e=this._id||this.id:e=(t=this.collection)!=null?t.url:void 0,e}}),a=p.mvc.Collection.extend({model:f,sync:x}),S=function(e,t){var n;return n=v(e,t),n.on("change",function(){var e,t,r;return e=u.call(arguments),t="model.hull."+n._id+"."+"change",p.mediator.emit(t,{eventName:t,model:n,changes:(r=e[1])!=null?r.changes:void 0})}),n.on("sync",function(){if(n._id==="me")return p.mediator.emit("hull.auth.update",n.attributes)}),n._id=e._id,i[e._id]=n,n},p.data.api.model=function(e){return o(e,!1)},o=function(e,n){n==null&&(n=!1),t.isString(e)&&(e={_id:e}),e._id||(e._id=e.path);if((e!=null?e._id:void 0)==null)throw new Error("A model must have an identifier...");return i[e._id]||S(e,n)},v=function(e,t){var n,r;return r=t?l:f,e.id||e._id?n=new r(e):n=new r},E=function(e){var t,r,i;return i=p.data.api.parseRoute([e])[0],t=new a,t.url=e,t.on("all",function(){var e,n,r;return e=u.call(arguments),n="collection."+i.path.replace(/\//g,".")+"."+e[0],p.mediator.emit(n,{eventName:n,collection:t,changes:(r=e[1])!=null?r.changes:void 0})}),r=t.deferred=n.deferred(),t.models.length>0?(t._fetched=!0,r.resolve(t)):(t._fetched=!1,t.fetch({success:function(){return t._fetched=!0,r.resolve(t)},error:function(){return r.fail(t)}})),t},p.data.api.collection=function(e){if(e==null)throw new Error("A model must have an path...");return E.call(p.data.api,e)},w=r.sandbox,h=m.authScope,b=m.remoteConfig,d=b.data,r.config.assetsUrl=b.assetsUrl,r.config.services=b.settings,r.components.addSource("hull",b.baseUrl+"/aura_components"),(C=w.config)==null&&(w.config={}),w.config.debug=r.config.debug,w.config.assetsUrl=b.assetsUrl,w.config.appId=r.config.appId,w.config.orgUrl=r.config.orgUrl,w.config.services=b.settings,w.config.entity_id=(k=d.entity)!=null?k.id:void 0,w.isAdmin=function(){return h==="Account"||w.data.api.model("me").get("is_admin")},w.login=m.login,w.logout=m.logout,w.linkIdentity=function(e,t,n){return t==null&&(t={}),n==null&&(n=function(){}),t.mode="connect",w.login(e,t,n)},w.unlinkIdentity=function(e,t){return t==null&&(t=function(){}),p.data.api("me/identities/"+e,"delete").then(function(){var e;return e=r.sandbox.data.api.model("me").fetch(),e.then(function(e){return p.mediator.emit("hull.auth.login",e)}),e.then(t)})},L=["me","app","org","entity"],A=[];for(T=0,N=L.length;T<N;T++)g=L[T],c=d[g],c?(c._id=g,A.push(o(c,!0))):A.push(void 0);return A},afterAppStart:function(e){var t;return t=e.core,t.mediator.on("hull.auth.*",r)}},s})}.call(this),function(){define("lib/client/component/context",["underscore","lib/utils/promises"],function(e,t){var n,r,i;return r=function(e,t){return console.log("An error occurred with datasource "+e,t)},i=t.deferred,n=function(){function t(){this._context={},this._errors={}}return t.prototype.add=function(e,t){return this._context[e]=t},t.prototype.addDatasource=function(t,n,s){var o,u=this;return e.isFunction(s)||(s=e.bind(r,void 0,t)),o=i(),n.then(function(n){return e.isFunction(n!=null?n.toJSON:void 0)?u.add(t,n.toJSON()):e.isArray(n)&&n[1]==="success"&&n[2].status===200?u.add(t,n[0]):u.add(t,n),o.resolve(n)},function(e){var n;return u._errors[t]=e,n=s(e),u.add(t,n),o.resolve(n)}),o.promise},t.prototype.errors=function(){var t;return t=e.keys(this._errors).length,t?this._errors:null},t.prototype.build=function(){return this._context},t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("lib/client/component/component",["underscore","lib/client/component/context"],function(t,r){return function(i){var s,o,u,a;return a=function(e,n){var r,s=this;return r=i.core.data.deferred(),this.invokeWithCallbacks("beforeRender",n.build(),n.errors()).then(function(i){return e=t.extend({},s.data,i||n.build(),e),r.resolve(e)},function(e){return console.error(e),r.reject(e)}),r.promise()},o=!1,s=function(i){function s(n){this.render=e(this.render,this),this.afterRender=e(this.afterRender,this),this.doRender=e(this.doRender,this),this.getTemplate=e(this.getTemplate,this),this.loggedIn=e(this.loggedIn,this),this.buildContext=e(this.buildContext,this),this.log=e(this.log,this),this.renderTemplate=e(this.renderTemplate,this);var r,i,s,o,u;this.ref=n.ref,this.api=this.sandbox.data.api,(s=this.refresh)==null&&(this.refresh=t.throttle(function(){return this.invokeWithCallbacks("render")},200)),this.componentName=n.name,o=this.options;for(r in o)i=o[r],(u=n[r])==null&&(n[r]=i);this.className==null&&(this.className="hull-component",this.namespace!=null&&(this.className+=" hull-"+this.namespace)),this.cid=t.uniqueId("view"),this._configure(n||{}),this._ensureElement(),this.invokeWithCallbacks("initialize",n).then(t.bind(function(){var e,t,n,r,i,s=this;this.delegateEvents(),this.invokeWithCallbacks("render"),this.sandbox.on("hull.settings.update",function(e){return s.sandbox.config.services=e}),r=this.refreshEvents||[],i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.sandbox.on(e,function(){return s.refresh()},this));return i},this),function(e){return console.warn("WARNING",e)})}return n(s,i),s.prototype.initialize=function(){},s.prototype.isInitialized=!1,s.prototype.options={},s.prototype.renderTemplate=function(e,n){var r,i;return i=(r=this._templates)!=null?r[e]:void 0,i?i(n||this,{helpers:t.extend({},this.helpers)}):"Cannot find template '"+e+"'"},s.prototype.authServices=function(){return this.sandbox.util._.reject(this.sandbox.util._.keys(this.sandbox.config.services.auth||{}),function(e){return e==="hull"})},s.prototype.beforeRender=function(e){return e},s.prototype.renderError=function(){},s.prototype.log=function(e){return this.options.debug?console.warn(this.options.name,":",this.options.id,e):console.warn("[DEBUG] "+this.options.name,e,this)},s.prototype.buildContext=function(e){var t;return(t=this._renderCount)==null&&(this._renderCount=0),e.add("options",this.options),e.add("loggedIn",this.loggedIn()),e.add("isAdmin",this.sandbox.isAdmin()),e.add("debug",this.sandbox.config.debug),e.add("renderCount",++this._renderCount),e},s.prototype.loggedIn=function(){var e,n,r;return this.sandbox.data.api.model("me").get("id")==null?!1:(e={},n=this.sandbox.data.api.model("me"),t.map(n.get("identities"),function(t){return e[t.provider]=t}),n.get("main_identity")==="email"&&(r=e.email)==null&&(e.email={}),e)},s.prototype.getTemplate=function(e,t){var n;return e||this.template||((n=this.templates)!=null?n[0]:void 0)},s.prototype.doRender=function(e,t){var n,r;return r=this.getTemplate(e,t),n=this.renderTemplate(r,t),this.$el.addClass(this.className),o&&(n="<!-- START "+r+" RenderCount: "+this._renderCount+" -->"+n+"<!-- END "+r+"-->"),this.$el.html(n),this},s.prototype.afterRender=function(e){return e},s.prototype.render=function(e,n){var i,s=this;return i=new r,this.invokeWithCallbacks("buildContext",i).then(function(){return a.call(s,n,i).then(function(n){return s.invokeWithCallbacks("doRender",e,n),t.defer(function(){return s.afterRender.call(s,n)}),t.defer(function(){return s.sandbox.start(s.$el,{reset:!0})}),s.isInitialized=!0,s.emitLifecycleEvent("render")},function(e){return console.error(e.message),s.renderError(e)})})},s.prototype.emitLifecycleEvent=function(e){return this.sandbox.emit("hull."+this.componentName.replace("/",".")+"."+e,{cid:this.cid})},s}(i.core.mvc.View),u={initialize:function(e){return o=e.config.debug,e.components.addType("Hull",s.prototype)}},u}})}.call(this),function(){define("lib/client/datasource",["lib/utils/promises","underscore","backbone"],function(e,t,n){var r,i,s,o;return i=function(e){var t;return t={},e!=null&&e.replace(/<([^>]*)>;\s*rel="([\w]*)\"/g,function(e,n,r){return t[r]=n}),t},s=function(e){var t;return e=e.split("?")[1]||e,t={},e.replace(/([^?&=]+)(=([^&]*))?/g,function(e,n,r,i){if(i!=null)return t[n]=i}),t},o=function(e,n){var r,i,s,o,u;i=e.match(/(\:[a-zA-Z0-9-_]+)/g);if(!i)return e;for(s=0,u=i.length;s<u;s++){r=i[s],o=r.slice(1);if(!t.has(n,o))throw new Error("Cannot resolve datasource binding "+r);e=e.replace(r,n[o])}return e},r=function(){function r(e,r){var i,o,u;if(e instanceof n.Model||e instanceof n.Collection){this.def=e;return}this.transport=r,o=new TypeError("Datasource is missing its definition. Cannot continue."),u=new TypeError("Datasource is missing a transport. Cannot continue.");if(!e)throw o;if(!this.transport)throw u;if(t.isString(e))e={path:e,provider:"hull"};else if(t.isObject(e)&&!t.isFunction(e)){if(!e.path)throw o;e.provider=e.provider||"hull"}t.isFunction(e)||(i=e.params||{},e.params=t.extend(s(e.path),i),e.path=e.path.split("?")[0]),this.def=e}return r.prototype.parse=function(e){if(!(this.def instanceof n.Model||this.def instanceof n.Collection)){t.isFunction(this.def)||(this.def.path=o(this.def.path,e));if(!t.isFunction(this.def))return this.def.provider=o(this.def.provider,e)}},r.prototype.fetch=function(){var r,s,o,u=this;r=e.deferred();if(this.def instanceof n.Model||this.def instanceof n.Collection)r.resolve(this.def);else if(t.isFunction(this.def)){s=this.def.call();if(s!=null?s.promise:void 0)return e.when(s);r.resolve(s)}else{if(/undefined/.test(this.def.path))return r.resolve(!1),r.promise;o=this.transport(this.def),o.then(function(e,s){if(t.isArray(e)){if(s!=null?s.Link:void 0)u.paginationLinks=i(s.Link);return r.resolve(new n.Collection(e))}return r.resolve(new n.Model(e))},function(e){return r.reject(e)})}return r.promise},r.prototype.isPaginable=function(){return this.paginationLinks!=null},r.prototype.isFirst=function(){var e;return(e=this.paginationLinks)!=null?!e.first:!void 0},r.prototype.isLast=function(){var e;return(e=this.paginationLinks)!=null?!e.last:!void 0},r.prototype.previous=function(){if(!this.isFirst())return t.extend(this.def.params,s(this.paginationLinks.prev))},r.prototype.next=function(){if(!this.isLast())return t.extend(this.def.params,s(this.paginationLinks.next))},r.prototype.sort=function(e,t){return t==null&&(t="ASC"),this.def.params.order_by=e+" "+t},r.prototype.where=function(e,n){return n==null&&(n=!1),n&&(e=t.extend(this.def.params.where,e)),this.def.params.where=e,this.def.params.page=1},r}(),r})}.call(this),function(){define("lib/utils/q2jQuery",["jquery"],function(e){return function(t){var n;return n=e.Deferred(),t.then(n.resolve,n.reject),n.promise()}})}.call(this),function(){define("lib/client/component/datasource",["lib/client/datasource","underscore","lib/utils/promises","lib/utils/q2jQuery","string"],function(e,t,n,r){var i;return i={datasourceModel:e,getDatasourceErrorHandler:function(e,n){var r;return r=n["on"+t.string.capitalize(t.string.camelize(e))+"Error"],t.isFunction(r)||(r=i.defaultErrorHandler),t.bind(r,n,e)},defaultErrorHandler:function(e,t){return console.warn("An error occurred with datasource "+e,t.status,t.statusText)},addDatasources:function(e){var n,r=this;return e==null&&(e={}),n=t.map(e,function(e,n){return t.isFunction(e)&&(e=t.bind(e,r)),e instanceof i.datasourceModel||(e=new i.datasourceModel(e,r.api)),e}),this.datasources=t.object(t.keys(e),n)},fetchDatasources:function(){var e,s,o,u=this;return e=[].pop.apply(arguments),(o=this.data)==null&&(this.data={}),s=t.map(this.datasources,function(r,s){var o,a;return r.parse(t.extend({},u,u.options||{})),a=i.getDatasourceErrorHandler(s,u),o=r.fetch(),n.when(o,function(e){return u.data[s]=e}),e.addDatasource(s,o,a)}),r(n.all(s))},initialize:function(e){var n;return n={me:new i.datasourceModel(e.core.data.api.model("me")),app:new i.datasourceModel(e.core.data.api.model("app")),org:new i.datasourceModel(e.core.data.api.model("org"))},e.components.before("initialize",function(e){var r;return r=t.extend({},n,this.datasources,e.datasources),i.addDatasources.call(this,r)}),e.components.after("buildContext",i.fetchDatasources)}},i})}.call(this),function(){var e={}.hasOwnProperty;define("lib/utils/handlebars-helpers",["underscore","moment"],function(t,n){var r;return r=(new Date).getTime(),function(i){var s;return s={},s.imageUrl=function(e,n,r){return n==null&&(n="small"),r==null&&(r=""),t.isFunction(e)&&(e=e()),e?(e=e.replace(/\/(large|small|medium|thumb)$/,""),t.isString(n)||(n="small"),"//"+i.config.assetsUrl+"/img/"+e+"/"+n):r},s.fromNow=function(e){if(e==null)return;return n(e).fromNow()},s.autoLink=function(e){if(e==null)return;return twttr.txt.autoLink(e)},s.formatTime=function(e,t){return n(e).format(t)},s.json=function(e){return JSON.stringify(e)},s.key_value=function(t,n){var r,i;return function(){var s;s=[];for(r in t){if(!e.call(t,r))continue;i=t[r],s.push(n.fn({key:r,value:i}))}return s}().join("")},s.seq=function(e){return e==null&&(e="seq"),""+e+"-"+r++},s.camelize=function(e){return t.str.camelize(e)},s.underscore=function(e){return t.str.underscored(e)},s.humanize=function(e){return t.str.humanize(e)},s.pluralize=function(e,t,n){return e<=1?t:n},s.capitalize=function(e){return t.str.capitalize(e)},s.dasherize=function(e){return t.str.dasherize(e)},s.titlelize=function(e){return t.str.titlelize(e)},s.classify=function(e){return t.str.classify(e)},s.trim=function(e){return t.str.trim(e)},s.ifEqual=function(e,n,r){if(e===n)return r.fn(this);if(t.isFunction(r.inverse))return r.inverse(this)},s.eachWithIndex=function(e,t){var n,r,i,s,o,u;n=[];for(i=o=0,u=e.length;o<u;i=++o)r=e[i],s=r,s.index=i,n.push(t(s));return n.join("")},s.join=function(e,n){var r,i,s;return n&&t.isFunction(n.fn)&&(e=t.map(e,function(e){return n.fn(e)})),s=n.hash.sep||", ",n.hash.lastSep&&e.length>1&&(r=e.splice(-1)),i=e.join(s),r&&(i+=n.hash.lastSep+r),i},s.debug=function(e){console.log("Current Context"),console.log("===================="),console.log(this);if(e)return console.log("Value"),console.log("===================="),console.log(e)},s.outputIf=function(e,t,n,r){return n==null&&(n=""),r==null&&(r=""),e===t?n:r},s.fallback=function(e,t){return e?e:t},s.activity=function(e,t){var n,r,i,s,o,u,a;return t==null||e==null?"":(s=t.verb,i=(o=t.object)!=null?o.type:void 0,i==null||s==null?"":(r=(u=e[s])!=null?u[i]:void 0,r!=null?r:(n=e.fallback,n==null?"":(i=(i==="entity"?(a=t.object)!=null?a.uid:void 0:void 0)||n.object[i]||t.object.name||t.object.description,(n.verb[s]||s)+" "+i))))},s.to_s=function(e){return e==null?"":e.name||e.title||e.uid||e.description||e},s.prune=function(e,n,r){return t.str.prune(e,n,r)},s.truncate=function(e,n,r){return t.str.truncate(e,n,r)},s}})}.call(this),function(){var e=[].slice;define("lib/client/component/templates",["underscore","lib/utils/handlebars","lib/utils/handlebars-helpers","lib/utils/promises","lib/utils/q2jQuery","require"],function(t,n,r,i,s,o){var u,a,f,l,c,h,p,d,v,m;return p={app:["hullGlobal","meteor","sprockets","hullDefault"],dom:["inner","global"],server:["require"]},h=function(e,r,i,s){var o;return t.isFunction(e)?i?o=e:o=n.template(e,s):o=n.compile(e),n.registerPartial(r,o),o},v=function(e){var t,n;if(!e.length)return;return n=e.get(0),t=c.domFind(n),t.text()||t.html()||n.innerHTML},d={dom:{inner:function(e,t,n){var r;return r=c.domFind(e,n),v(r)},global:function(e,t){var n;return n=c.domFind(e,document),v(n)}},app:{hullGlobal:function(e){var t;if((t=c.global.Hull.templates)!=null?t[e]:void 0)return[c.global.Hull.templates[""+e],e,!1]},meteor:function(e){var t;if(c.global.Meteor!=null&&((t=c.global.Template)!=null?t[e]:void 0)!=null)return[c.global.Template[e],e,!1]},sprockets:function(e){var t;if(c.global.HandlebarsTemplates!=null&&((t=c.global.HandlebarsTemplates)!=null?t[e]:void 0)!=null)return[c.global.HandlebarsTemplates[e],e,!0]},hullDefault:function(e){var t,n;if((t=c.global.Hull.templates)!=null?(n=t._default)!=null?n[e]:void 0:void 0)return[c.global.Hull.templates._default[e],e,!1]}},server:{require:function(e,t,n){var r;return t="text!"+t+"."+n,r=i.deferred(),c.require([t],function(t){return r.resolve([t,e,!1])},function(t){return console.error("Error loading template",e,t.message),r.reject(t)}),r.promise}}},m=function(){var t,n,r,i,s,o,u,a;i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],u=p[i];for(s=0,o=u.length;s<o;s++){n=u[s],r=(a=d[i])[n].apply(a,t);if(r)return r}},a=function(e,t){var n,r;n="script[data-hull-template='"+e+"']",r=m("dom",n,e,t);if(r)return[r,e,!1]},u=function(e){return m("app",e)},f=function(e,t,n){return m("server",e,t,n)},l=function(e,t){var n,r,i,s;return r=""+e.ref+"/"+t,s=[e.componentName,t.replace(/^_/,"")].join("/"),c.domFind&&(n=a(s,e.rootEl)),n||(n=u(s)),n?(i=h.apply(null,n),c.define(r,i)):i=f(s,r,e.templateFormat).then(function(e){return h.apply(null,e)}),i},c={global:window,define:define,require:o,domFind:void 0,load:function(e,n,r,s){var o,u,a;return e==null&&(e=[]),s==null&&(s="hbs"),u=i.deferred(),t.isString(e)&&(e=[e]),o={componentName:n.replace("__component__$","").split("@")[0],templateFormat:s,rootEl:r,ref:n},a=t.map(e,t.bind(l,void 0,o)),i.all(a).then(function(n){return u.resolve(t.object(e,n))},function(e){return console.warn("WARNING",e),u.reject(e)}),u.promise},initialize:function(e){var t,i,o;o=r(e);for(t in o)i=o[t],n.registerHelper(t,i);return c.domFind=e.core.dom.find,e.components.before("initialize",function(){var e,t=this;return e=c.load(this.templates,this.ref,this.el).then(function(e){return t._templates=e},function(e){throw console.error("Error while loading templates:",e),e}),s(e)}),null}},c})}.call(this)}).call(root)})()